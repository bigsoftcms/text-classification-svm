<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v42-2006-08-23.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07640744-20100105.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20091221" date-publ="20100105">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07640744</doc-number>
<kind>B2</kind>
<date>20100105</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11293729</doc-number>
<date>20051202</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>65</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>F</section>
<class>02</class>
<subclass>B</subclass>
<main-group>33</main-group>
<subgroup>44</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20100105</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification> 606051</main-classification>
</classification-national>
<invention-title id="d0e53">Method for compensating compressor lag of a hybrid powertrain</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>3015934</doc-number>
<kind>A</kind>
<name>Miller</name>
<date>19620100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60601</main-classification></classification-national>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4805409</doc-number>
<kind>A</kind>
<name>Kobayashi</name>
<date>19890200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60597</main-classification></classification-national>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>4901530</doc-number>
<kind>A</kind>
<name>Kawamura</name>
<date>19900200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60608</main-classification></classification-national>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>4958606</doc-number>
<kind>A</kind>
<name>Hitomi et al.</name>
<date>19900900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>123316</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>4981017</doc-number>
<kind>A</kind>
<name>Hara et al.</name>
<date>19910100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60608</main-classification></classification-national>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5064423</doc-number>
<kind>A</kind>
<name>Lorenz et al.</name>
<date>19911100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5678407</doc-number>
<kind>A</kind>
<name>Hara</name>
<date>19971000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60608</main-classification></classification-national>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5881559</doc-number>
<kind>A</kind>
<name>Kawamura</name>
<date>19990300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60597</main-classification></classification-national>
</citation>
<citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5916130</doc-number>
<kind>A</kind>
<name>Nakae et al.</name>
<date>19990600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60276</main-classification></classification-national>
</citation>
<citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6305169</doc-number>
<kind>B1</kind>
<name>Mallof</name>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60608</main-classification></classification-national>
</citation>
<citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6318083</doc-number>
<kind>B1</kind>
<name>Machida et al.</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6338391</doc-number>
<kind>B1</kind>
<name>Severinsky et al.</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>180 652</main-classification></classification-national>
</citation>
<citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6408625</doc-number>
<kind>B1</kind>
<name>Woon et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60608</main-classification></classification-national>
</citation>
<citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6443125</doc-number>
<kind>B1</kind>
<name>Mendler</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>123316</main-classification></classification-national>
</citation>
<citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>6478100</doc-number>
<kind>B1</kind>
<name>Grewe</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>180 652</main-classification></classification-national>
</citation>
<citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6554088</doc-number>
<kind>B2</kind>
<name>Severinsky et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>180 652</main-classification></classification-national>
</citation>
<citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6659212</doc-number>
<kind>B2</kind>
<name>Geisse et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>180 652</main-classification></classification-national>
</citation>
<citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6705084</doc-number>
<kind>B2</kind>
<name>Allen et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>6735945</doc-number>
<kind>B1</kind>
<name>Hall et al.</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>6847189</doc-number>
<kind>B2</kind>
<name>Frank</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>320104</main-classification></classification-national>
</citation>
<citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>6901324</doc-number>
<kind>B2</kind>
<name>Rose et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701 54</main-classification></classification-national>
</citation>
<citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>6931850</doc-number>
<kind>B2</kind>
<name>Frank et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60608</main-classification></classification-national>
</citation>
<citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>7028793</doc-number>
<kind>B2</kind>
<name>Hu et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>180 652</main-classification></classification-national>
</citation>
<citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>7076954</doc-number>
<kind>B1</kind>
<name>Sopko et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60607</main-classification></classification-national>
</citation>
<citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2003/0188533</doc-number>
<kind>A1</kind>
<name>Jaster</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60608</main-classification></classification-national>
</citation>
<citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>2004/0016419</doc-number>
<kind>A1</kind>
<name>Satou et al.</name>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>2005/0266957</doc-number>
<kind>A1</kind>
<name>Kamijo et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>477  3</main-classification></classification-national>
</citation>
</references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification> 606051</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 60608</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>180305</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>180 652</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 22</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>903942</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20070125083</doc-number>
<kind>A1</kind>
<date>20070607</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Rollinger</last-name>
<first-name>John</first-name>
<address>
<city>Sterling Heights</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Zaremba</last-name>
<first-name>Alexander</first-name>
<address>
<city>Dearborn Heights</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Lippa</last-name>
<first-name>Allan J.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<orgname>Alleman Hall McCoy Russell &#x26; Tuttle LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Ford Global Technologies, LLC</orgname>
<role>02</role>
<address>
<city>Dearborn</city>
<state>MI</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Denion</last-name>
<first-name>Thomas</first-name>
<department>3748</department>
</primary-examiner>
<assistant-examiner>
<last-name>Duff</last-name>
<first-name>Douglas J.</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method for compensating for the torque response of an internal combustion engine having a compressor coupled thereto for boosting cylinder air amount is presented. According to the method, a motor of a hybrid vehicle may assist the internal combustion engine to improve vehicle response. The method may improve driver perception of vehicle response and may reduce lag that can be associated with operating an engine having a compressor.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="137.16mm" wi="204.47mm" file="US07640744-20100105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="204.64mm" wi="137.75mm" orientation="landscape" file="US07640744-20100105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="204.30mm" wi="105.49mm" file="US07640744-20100105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="204.89mm" wi="79.93mm" file="US07640744-20100105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="199.47mm" wi="139.78mm" file="US07640744-20100105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="171.96mm" wi="115.99mm" file="US07640744-20100105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="181.86mm" wi="158.58mm" file="US07640744-20100105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD</heading>
<p id="p-0002" num="0001">The present description relates to a method for compensating for lag of an internal combustion engine in a hybrid vehicle. The method can adjust engine air amount and/or power output of a motor to improve the torque response of a vehicle.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">One system that may be assembled to form a hybrid vehicle is described in U.S. Pat. No. 6,554,088. This system presents an internal combustion engine having a turbo charger that is part of a hybrid powertrain. The system can select tractive torque from an internal combustion engine and/or from an electrical motor. Further, the description mentions using a traction motor to provide additional torque when an operator calls for more power in an attempt to eliminate &#x201c;turbo lag&#x201d;.</p>
<p id="p-0004" num="0003">The above-mentioned system can also have several disadvantages. For example, the system apparently adjusts torque from a traction motor in response to an operator demand. However, if tractive motor torque is adjusted without regard to operating conditions of the turbo charger, the vehicle torque response may lag (follow behind) or lead (be ahead of) the compensation torque provided by the traction motor. This can result in a torque amount that may not match a desired torque amount and that may degrade vehicle drivability. Further, the torque provided by the traction motor may assist the internal combustion engine for a longer period of time than is desired. By increasing the traction motor assist time, additional energy may be consumed by the traction motor, thereby reducing the energy stored in the vehicle battery.</p>
<p id="p-0005" num="0004">The inventors herein have recognized the above-mentioned disadvantages and have developed a method of controlling a hybrid powertrain having a compressor boosted internal combustion engine that offers substantial improvements.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">One embodiment of the present description includes a method to improve engine torque response of a hybrid vehicle powertrain, the hybrid powertrain comprising an internal combustion engine that may be coupled to a motor, the internal combustion engine having a compressor coupled thereto, the method comprising: adjusting a motor output torque in response to an operating condition of said compressor.</p>
<p id="p-0007" num="0006">The torque response of hybrid powertrain, comprising at least a motor and a compressor boosted engine, may be improved by providing some portion of the motor torque in response to an operating condition of the compressor. For example, a compressor boosted engine (e.g., a turbocharged or supercharged engine) can have a torque response that lags behind a desired torque request. The torque response lag may be caused by an inability of the compressor to instantaneously increase flow through the compressor to the intake manifold. Consequently, the amount of air available for combustion may be less than desired at the beginning of a request to increase engine torque. However, it may be possible to more closely follow the requested torque by augmenting the engine torque with torque from a second source. Namely, a motor in the hybrid powertrain system may be capable of contributing torque to the vehicle driveline so that the internal combustion engine torque lag is less perceivable. By determining the compressor output flow or pressure, for example, motor torque may be controlled so that the combined engine and motor torque may more closely match the desired powertrain output torque. In this way, the motor torque can be adjusted as the compressor output changes, thereby improving overall torque response of the powertrain.</p>
<p id="p-0008" num="0007">Further, another embodiment of the present description includes a method to improve engine torque response of a hybrid vehicle powertrain, the hybrid powertrain comprising an internal combustion engine that may be coupled to a motor, the internal combustion engine having a compressor coupled thereto, the method comprising: adjusting at least a cylinder air amount and a motor output torque in response to a compressor operating condition.</p>
<p id="p-0009" num="0008">The torque response of a hybrid vehicle powertrain having a boosted internal combustion engine may be improved by compensating the cylinder air charge of the engine and by adjusting the motor output torque in response to a state of the internal combustion engine compressor. For example, the output of an internal combustion compressor may vary in response to operating conditions (e.g., barometric pressure, ambient temperature, compressor temperature, and compressor friction). If the motor torque is provided without regard to the output of the compressor, the torque response may lag or lead the desired torque. This may lead to degraded drivability and driver disturbance. However, by compensating cylinder air charge and motor torque in response to the state of the compressor, it may be possible to provide a more uniform torque response over a wider range of operating conditions.</p>
<p id="p-0010" num="0009">By adjusting cylinder air charge to compensate for compressor lag, the duration and magnitude of torque provided by the motor to improve powertrain torque response may be reduced. In one example, a turbo charger may be used to increase engine power by compressing air entering the intake manifold. The turbo charger may allow the cylinder fuel amount to be increased while maintaining a desired air-fuel ratio. However, to increase the intake manifold pressure and cylinder charge, the turbo charger compressor relies on exhaust gases to spin the compressor turbine. And since cylinder charge drives exhaust pressure, the engine torque available from turbo charging may not be instantaneous after throttle opening. Consequently, the engine output torque may lag the desired engine torque. By increasing the cylinder air charge while the compressor flow is increasing, via adjusting valve timing for example, the cylinder torque output may increase, thereby bringing the engine output closer to the desired torque. Further, exhaust gas temperature and pressure may be higher at increased cylinder air charge levels so that turbine output may be increased over a shorter time interval. As a result, it may be possible to use less motor torque to meet the desired torque request.</p>
<p id="p-0011" num="0010">The present description may provide several advantages. In particular, the approach may improve coordinated control between a boosted internal combustion engine and a motor. By determining a state of the internal combustion engine compressor, torque provided by the motor may be tailored so that the combined engine and motor torque may be more smooth and continuous. In addition, the method may reduce the amount of power consumed by the motor, at least during some conditions, so that the battery power may be used to propel the vehicle rather than reduce torque disturbances. Furthermore, the internal combustion engine air charge estimate may be improved since the motor may be controlled in a way that reduces the magnitude of engine speed changes, thereby lessoning the amount of prediction that may be needed to determine cylinder air charge.</p>
<p id="p-0012" num="0011">The above advantages and other advantages, and features of the present description will be readily apparent from the following Detailed Description when taken alone or in connection with the accompanying drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">The advantages described herein will be more fully understood by reading an example of an embodiment, referred to herein as the Detailed Description, when taken alone or with reference to the drawings, wherein:</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram of an example hybrid vehicle powertrain;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is a flow chart of an example hybrid powertrain torque control routine;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a flow chart for lag compensation of a hybrid vehicle;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is an example plot of a turbo charger turbine speed map;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> is an example plot of a turbo charger compressor map;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart for an alternative method of lag compensation for a hybrid vehicle; and</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7</figref> is an example plot of signals that illustrate lag compensation for a hybrid vehicle.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0021" num="0020">Referring to <figref idref="DRAWINGS">FIG. 1</figref>, internal combustion engine <b>1</b>, comprising a plurality of cylinders, is controlled by electronic engine controller <b>6</b>. Engine <b>1</b> includes combustion chambers (not shown) that are known communicating with intake manifold <b>3</b> and exhaust manifold <b>4</b> via respective intake valves and exhaust valves (not shown). The intake valves are operated via a cam (not shown) that may be indexed relative to a crankshaft position by cam phaser <b>17</b>. Exhaust valves are operated using a fixed profile exhaust cam. Alternatively, the intake and/or exhaust valves may be operated by fixed cams or by variable event actuators. The variable event valve actuator may be a mechanical apparatus that is controlled by electrical or hydraulic components, or alternatively, the valve actuator may be electrically or hydraulically driven, or may be comprised of a combination of mechanical, electrical, and/or hydraulic components, electromechanical valves for example. In addition, the valve actuator may be capable of adjusting valve lift, valve phase (valve opening and/or closing position relative to a crankshaft position), or the combination of phase and lift. Some actuator designs may allow zero valve lift, a minimum lift, negative valve overlap between intake and exhaust valves, positive valve overlap between intake and exhaust valves, and/or combinations of lift and phase adjustment amounts. U.S. Pat. No. 6,145,483 describes one example of a variable valve actuator and is hereby fully incorporated by reference.</p>
<p id="p-0022" num="0021">Intake manifold <b>3</b> is shown having manifold pressure sensor <b>10</b> coupled thereto, for sensing pressure in manifold plenum <b>2</b>. Further, fuel injectors (not shown) may also be coupled to intake manifold <b>3</b> for delivering liquid fuel to engine <b>1</b> cylinders. Alternatively, the engine may be configured such that the fuel is injected directly into the engine cylinder, which is known to those skilled in the art as direct injection. Fuel is delivered to fuel injectors by a fuel system (not shown) including a fuel tank, fuel pump, and fuel rail (not shown). In addition, intake manifold <b>3</b> is shown communicating with electronic throttle <b>5</b>. Mass air sensor <b>16</b> is located upstream of electronic throttle <b>5</b> and downstream of turbo charger compressor <b>33</b> and air filter <b>15</b>. Alternatively, electronic throttle <b>5</b> may be located upstream of turbo charger compressor <b>33</b>. Further, an intercooler may be inserted after turbo charger compressor <b>33</b> to cool compressed intake air.</p>
<p id="p-0023" num="0022">Distributorless ignition system <b>11</b> provides ignition spark to engine <b>1</b> via respective spark plugs (not shown) in response to controller <b>6</b>. Universal Exhaust Gas Oxygen (UEGO) sensor <b>8</b> is shown coupled to exhaust manifold <b>4</b> upstream of catalytic converter <b>35</b>. Alternatively, a two-state exhaust gas oxygen sensor may be substituted for UEGO sensor <b>8</b>. Exhaust manifold temperature is measured by temperature sensor <b>12</b>, and/or estimated based on operating conditions such as engine speed, load, air temperature, engine temperature, and/or airflow, or combinations thereof.</p>
<p id="p-0024" num="0023">Converter <b>35</b> can include multiple catalyst bricks, in one example. In another example, multiple emission control devices, each with multiple bricks, can be used. Converter <b>35</b> can be a three-way type catalyst in one example. Alternatively, the converter may be a NOx trap, Hydrocarbon trap, oxidation catalyst, or a selective oxidation catalyst.</p>
<p id="p-0025" num="0024">Turbo charger <b>21</b> is shown in communication with to exhaust manifold <b>4</b> and intake manifold <b>3</b>. Fresh air may be inducted at air filter <b>15</b>, compressed by turbo charger compressor <b>33</b>, and directed to intake manifold <b>3</b>. Turbo charger turbine <b>34</b> is connected to turbo charger compressor <b>33</b> by shaft <b>36</b>. During operation exhaust gases can flow from exhaust manifold <b>4</b> to turbo charger <b>21</b>, where expanding exhaust gases can rotate exhaust turbine <b>34</b> and compressor <b>33</b>. Exhaust gases are directed from turbine <b>34</b> to catalyst <b>35</b> for processing. Turbo charger <b>21</b> may be a variable geometry type or waste gate controlled.</p>
<p id="p-0026" num="0025">Controller <b>6</b> is shown in <figref idref="DRAWINGS">FIG. 1</figref> as a conventional microcomputer including: microprocessor unit <b>102</b>, input/output ports <b>104</b>, and read-only-memory <b>106</b>, random-access-memory <b>108</b>, <b>110</b> Keep-alive-memory, and a conventional data bus. Controller <b>6</b> is shown receiving various signals from sensors coupled to engine <b>1</b>, in addition to those signals previously discussed, including: a position sensor <b>119</b> coupled to an accelerator pedal; mass air flow <b>16</b>, a measurement (ACT) of engine air amount temperature from temperature sensor <b>39</b>; catalyst oxygen concentration sensor; and catalyst temperature sensor.</p>
<p id="p-0027" num="0026">Engine crankshaft is connected to starter motor <b>23</b> via output shaft <b>13</b>. Starter motor <b>23</b> is connected to clutch <b>25</b> by shaft <b>45</b>. Shaft <b>47</b> connects clutch <b>25</b> to traction motor <b>27</b>. A battery (not shown) may source or sink current to traction motor <b>27</b> and/or to starter motor <b>23</b>. Alternatively, engine <b>1</b> may be coupled to traction motor <b>27</b> via another device such as a transmission, for example, and/or arranged in another configuration that is not intended limit the scope or breadth of the description. Drivetrain power is output from motor <b>27</b>, engine <b>1</b>, and starter <b>23</b> to axle <b>43</b> via differential <b>41</b>.</p>
<p id="p-0028" num="0027">The hybrid powertrain configuration shown in <figref idref="DRAWINGS">FIG. 1</figref> is presented for illustration purposes and is not intended to limit the scope or breadth of the description. For example, the present description may be used in parallel or serial drivetrain configurations and/or in powertrains that include diesel or gasoline engines.</p>
<p id="p-0029" num="0028">Referring to <figref idref="DRAWINGS">FIG. 2</figref>, a flow chart of an example hybrid powertrain torque control routine is shown. A hybrid powertrain may have two or more potential torque output devices and is hereby defined as the combination of an internal combustion (IC) engine with a secondary power system. For example, a hybrid powertrain may comprise a combination of an IC engine and an electric motor, or an IC engine and a hydraulic motor. These powertrain configurations may allow a variety of control modes. For example, it may be possible to solely operate the internal combustion engine, operate the engine and motor simultaneously at different speeds, operate the engine and motor simultaneously at the same speed, operate the motor and engine at different torque output amounts, and/or solely operate the motor. As such, it may be desirable to coordinate torque control between the engine and the motor.</p>
<p id="p-0030" num="0029">Referring to step <b>201</b>, engine and motor operating conditions may be determined. Sensors and/or actuator may be monitored to determine powertrain operating conditions so that a desired torque output may be achieved. For example, driver demand torque can be determined by interrogating pedal position sensor <b>119</b> output voltage or current and then transforming the sensed voltage or current to a torque demand by way of a predetermined function or table. Observed engine operating conditions may include coolant temperature, engine speed, cylinder air amount, catalyst oxygen level, catalyst temperature, air charge temperature, exhaust temperature, engine mass air flow, intake manifold pressure, and cam shaft angle. Motor operating conditions may include current, voltage, hydraulic pressure, motor temperature, hydraulic oil temperature, and/or motor speed. Furthermore, hybrid battery conditions such as battery temperature and state of charge may be determined in step <b>201</b>. The routine proceeds to step <b>203</b>.</p>
<p id="p-0031" num="0030">In step <b>203</b>, the powertrain operating mode is selected. Operating conditions from step <b>201</b> may be used to determine the powertrain operating mode. In one example, a table of requested powertrain speed/torque operating points may be sectioned into predetermined modes (e.g., motor mode, engine/motor mode, or engine mode). An operating mode may be determined by indexing the table by using desired driver demand torque and powertrain output speed. Furthermore, the operating mode output from the table can be modified by considering the state of the motor, engine, battery state of charge, torque rate of change, and catalyst state (i.e., temperature and/or oxygen state). For example, if operating conditions are used to index a table location calling for motor operation, the mode may be changed to engine/motor state if the battery state of charge is below a desired level. The routine proceeds to step <b>205</b>.</p>
<p id="p-0032" num="0031">Referring to step <b>205</b>, the routine determines if at least engine operation is to be used. If the operating mode determined in step <b>203</b> includes engine operation the routine proceeds to step <b>207</b>. If not, the routine proceeds to exit.</p>
<p id="p-0033" num="0032">Referring to step <b>207</b>, the routine determines the torque split between the engine and the motor. In one example, motor and engine torque may be determined by requesting a portion of the driver demand torque from the motor and a portion from the engine. In other words, driver demand torque may be the sum of engine and motor torque acting through a transmission or driveline to produce wheel torque or conversely driver demand torque may represent wheel torque and engine and/or motor torque may be determined in response to a desired wheel torque. For example, a function holding certain levels of motor torque can be indexed by requested driver demand torque and by motor output speed. The desired output motor torque can be scaled based on the battery state of charge. In one example, if the battery is charged above 50% the full torque capacity of the motor may be used. For a battery charged between 50% and 40% a reduction in motor torque capacity will result. Consequently, during certain operating conditions the balance of the requested torque may be provided by the engine so that the torque request may be split between the motor and the engine. In this way, the driver demand torque may be split into a desired engine torque and a desired motor torque.</p>
<p id="p-0034" num="0033">Another example driveline configuration may be such that the engine provides some proportion of current to the traction motor and/or battery via an alternator/generator. Current originating from engine or battery can be delivered to the traction motor to provide the tractive wheel torque. In this configuration, the engine may operate at one or more nearly steady speed/load operating points, transitioning between operating points based on operating conditions, for example. The engine torque can be a function of a proportion of the current requested to power the traction motor and the battery may provide the remainder of the requested traction motor current. The routine proceeds to step <b>209</b>.</p>
<p id="p-0035" num="0034">In step <b>209</b>, the engine and the motor can be controlled to generate the desired driver demand torque. The traction motor torque can be controlled by the amount of current and voltage that may be supplied to the traction motor. Current may be supplied by an inverter or from other power electronics in response to the torque split determined from step <b>207</b>. Typically, the motor can respond more quickly to requested torque changes than an internal combustion engine.</p>
<p id="p-0036" num="0035">The engine throttle position, fuel amount, valve timing, boost pressure, and spark advance can be determined from look-up tables that may be indexed by engine speed and the engine torque demand determined in step <b>207</b>. During transient conditions the method described in <figref idref="DRAWINGS">FIG. 3</figref> can provide engine air flow and torque control so that drivetrain response and emissions may be improved. Engine controller <b>6</b> outputs control signals to operate the engine. The routine exits.</p>
<p id="p-0037" num="0036">Referring to <figref idref="DRAWINGS">FIG. 3</figref>, a flow chart of an example method to control and compensate cylinder air flow is shown. An internal combustion engine that employs a compressor (e.g., turbo charger or supercharger) may experience a torque response lag that may be due to, at least in part, the rate at which flow can change through the compressor. In other words, the compressor flow rate may not respond as quickly as may be desired to a change in operating point. Therefore, it may be desirable to compensate for compressor lag to improve response of a hybrid powertrain. <figref idref="DRAWINGS">FIG. 3</figref> shows one method that may use cylinder air charge and/or motor torque to reduce the effect of compressor lag of a hybrid powertrain. In another embodiment, the engine torque response lag may be attributed to other devices that may be used to change cylinder air charge, cam phasors for example. The lag of this type of device may be compensated in a similar manner.</p>
<p id="p-0038" num="0037">In step <b>301</b>, engine and motor operating conditions are retrieved from step <b>201</b> of <figref idref="DRAWINGS">FIG. 2</figref>. These operating conditions can be used to modify control parameters that adjust compressor lag compensation. The routine proceeds to step <b>303</b>.</p>
<p id="p-0039" num="0038">In step <b>303</b>, desired cylinder air charge is determined. The powertrain controller can command varying amounts of torque from the engine and/or the motor to meet the operator wheel torque demand. The engine torque demand may be related to vehicle wheel torque and engine air and/or fuel amounts by the following equation:</p>
<p id="p-0040" num="0039">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mi>TWHL</mi>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>TMOT</mi>
        <mo>&#xb7;</mo>
        <msub>
          <mi>R</mi>
          <mi>m</mi>
        </msub>
      </mrow>
      <mo>)</mo>
    </mrow>
    <mo>+</mo>
    <mrow>
      <mrow>
        <mo>[</mo>
        <mrow>
          <mo>(</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mi>Ind_Tor</mi>
                  <mo>-</mo>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mrow>
                    <mi>fengT</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>N</mi>
                        <mo>,</mo>
                        <mrow>
                          <mi>Des_am</mi>
                          <mo>-</mo>
                          <mi>Cyl_am</mi>
                        </mrow>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>&#xb7;</mo>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mfrac>
                  <mn>1</mn>
                  <mrow>
                    <mi>FNSPKRTO</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>SAF</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mfrac>
              </mtd>
            </mtr>
          </mtable>
          <mo>)</mo>
        </mrow>
        <mo>]</mo>
      </mrow>
      <mo>&#xb7;</mo>
      <msub>
        <mi>R</mi>
        <mi>e</mi>
      </msub>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Where TWHL is the vehicle wheel torque, FNSPKRTO is a function that relates spark retard from MBT (minimum spark for best torque) to a corresponding torque reduction for engines utilizing spark ignition, TMOT is the electric motor torque, R<sub>m </sub>is the gear ratio between the electric motor and the vehicle wheels, Ind_Tor is the desired indicated engine output torque, fengT is a function that describes engine torque based on engine speed and engine air amount, N is engine speed, Des_am is desired engine air mass, Cyl_am is the air mass through the cylinders (i.e., the lagging desired engine air mass), and R<sub>e </sub>is the gear ratio between the engine and the wheels. In the before-mentioned equation, fengT is used to determine the torque lag that may be associated with the turbo charger, intake manifold filling, and/or other rate limited actuators (e.g., cam phasors).
</p>
<p id="p-0041" num="0040">In one example, the amount of engine torque commanded by the powertrain controller may be described in terms of engine brake torque by the following equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Ind_Tor=Dsd_Brk_Tor+Fric_Tor+Loss_Tor<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where Ind_Tor represents the desired indicated engine torque, Dsd_Brk represents the desired engine brake torque, Fric_Tor represents the engine friction torque, and Loss_Tor represents the engine torque losses (e.g., accessories such as electrical loads and/or power steering pumps). The engine friction torque and losses may be determined by interrogating empirically based tables and/or functions that describe operation of the engine over various operating conditions.
</p>
<p id="p-0042" num="0041">Note that the driver demand torque may be limited and/or filtered to improve the drivability of the vehicle. For example, if a driver changes a torque demand in an abrupt manner, it may be possible to limit and/or filter the rate of the driver demand torque so that a rapid torque response of the system does not degrade vehicle drivability.</p>
<p id="p-0043" num="0042">Cylinder load (i.e., the fraction of theoretical cylinder air capacity at standard temperature and pressure, e.g., 0.5 load corresponds to half the theoretical cylinder air capacity of a cylinder) for an engine having cylinders that are inducting substantially equal (e.g., within &#xb1;10% of each other) air-fuel mixtures into all cylinders may be determined by the following equation:</p>
<p id="p-0044" num="0043">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mrow>
  <mi>Load</mi>
  <mo>=</mo>
  <mrow>
    <mi>FNLOAD</mi>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>N</mi>
        <mo>,</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>Ind_Tor</mi>
            <mo>&#xd7;</mo>
            <mfrac>
              <mn>1</mn>
              <mrow>
                <mi>FNSPKRTO</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>SAF</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mfrac>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Where FNLOAD is a predetermined table that outputs a fractional cylinder load (e.g., 0.5), and that may be indexed by engine speed and corrected indicated torque.
</p>
<p id="p-0045" num="0044">Cylinder air charge may be determined by multiplying the desired engine load by the theoretical cylinder air charge capacity at standard temperature and pressure. The desired air flow through the engine may be determined by the following equation:</p>
<p id="p-0046" num="0045">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mrow>
  <mi>Des_am</mi>
  <mo>=</mo>
  <mrow>
    <mi>sarchg</mi>
    <mo>&#xd7;</mo>
    <mi>N</mi>
    <mo>&#xd7;</mo>
    <mfrac>
      <mi>numcyl</mi>
      <mn>2</mn>
    </mfrac>
    <mo>&#xd7;</mo>
    <mi>Load</mi>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Where Load is cylinder load determined by the above-mentioned method, numcyl is the number of engine cylinders, N is engine speed, and sarchg is the theoretical cylinder air charge at standard temperature and pressure. The routine proceeds to step <b>305</b>.
</p>
<p id="p-0047" num="0046">In step <b>305</b>, estimated engine air flow is determined. The air flow through the engine may be described as a function of throttle position, compressor outlet pressure, and engine speed. The compressor outlet pressure may be directly measured or may be modeled. One example compressor output model can be developed by the following equations and relationships:</p>
<p id="p-0048" num="0047">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mrow>
  <mi>EXAM</mi>
  <mo>=</mo>
  <mrow>
    <mi>Cyl_am</mi>
    <mo>&#xd7;</mo>
    <mrow>
      <mi>SQRT</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>(</mo>
        <mfrac>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>EXT</mi>
              <mo>+</mo>
              <mn>273</mn>
            </mrow>
            <mo>)</mo>
          </mrow>
          <msub>
            <mi>T</mi>
            <mn>1</mn>
          </msub>
        </mfrac>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Where EXAM is the exhaust air mass, Cyl_am is the air flow through the engine cylinders, EXT is the exhaust gas temperature, and T<sub>1 </sub>a selected operating temperature. Note that this equation assumes all cylinders are exhausted into a common exhaust manifold.
</p>
<p id="p-0049" num="0048">For a variable geometry turbo charger, the exhaust back pressure at the inlet of the exhaust turbine may be determined by the following function:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>TBP=</i>Offset+<i>F</i>1(<i>VGT</i>)(EXAM)+<i>F</i>2(<i>VGT</i>)(EXAM<sup>2</sup>)+<i>F</i>3(<i>VGT</i>)(EXAM<sup>3</sup>)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where TBP is the steady-state pressure on the inlet side of the turbine, VGT is the vane position of the variable geometry turbo charger, and F<b>1</b>-F<b>3</b> are empirically determined coefficients. For a turbo charger having a waste gate the exhaust back pressure at the turbine may be determined from:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>TBP=</i>Offset+EXAM&#xb7;Slope+EXAM<sup>2</sup>&#xb7;Quadratic+EXAM<sub>3</sub>&#xb7;Cubic<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where Slope is an empirically determined open waste gate coefficient or a closed waste gate coefficient, Quadratic is an empirically determined open waste gate coefficient or a closed waste gate coefficient, and Cubic is an empirically determined open waste gate coefficient or a closed waste gate coefficient.
</p>
<p id="p-0050" num="0049">Turbo charger turbine speed can be related to the pressure drop across the turbine. Further, the pressure drop across the turbine can be determined from the absolute exhaust pressure at the inlet side of the turbine and the pressure downstream of the turbo charger which may be assumed to be barometric pressure. The absolute pressure at the inlet side of the turbine can be approximated by adding the barometric pressure to TBP. In an alternative embodiment, the pressure downstream of the turbo charger may be determined by iteratively solving a back pressure algorithm that determines pressure downstream of the turbo charger from the exhaust gas mass flow rate, catalyst brick flow characteristics, and the barometric pressure.</p>
<p id="p-0051" num="0050">The turbine speed may be determined by indexing empirically determined functions and/or tables that describe the relationship between exhaust mass flow, turbine pressure ratio, and turbine speed (See the description of <figref idref="DRAWINGS">FIG. 4</figref> for an example of the relationship between exhaust mass flow, turbine pressure ratio, and turbine speed). For variable geometry turbo chargers the turbine speed can be determined by adding an additional factor or dimension to the describing functions, namely the position of the turbine vanes. The turbine speed look-up functions may be expressed as:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Ntwg=FWGT</i>(EXAM,(<i>TBPA/BP</i>))<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>or<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Ntvgt=FVGT</i>(EXAM,(<i>TBPA/BP</i>),<i>VGT</i>_Pos)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where Ntwg represents the speed of a turbine for a waste gate type of turbo charger, Ntvgt represents the speed of a variable geometry type turbo charger, TBPA is the absolute exhaust pressure at the turbo charger inlet, BP is the barometric pressure, and VGT_Pos is the position of the variable geometry turbo charger vanes.
</p>
<p id="p-0052" num="0051">The turbine speed and the compressor speed are equal or a multiple of one another since the turbine is coupled to the compressor via a shaft and/or gears. The compressor output pressure may be related to the speed of the turbine shaft and the mass flow rate through the compressor. This relationship can be expressed by a compressor map that may be described by a function or set of empirically mapped points, see <figref idref="DRAWINGS">FIG. 5</figref> for example. The compressor air mass flow rate can be determined by monitoring the output of MAF sensor <b>38</b> and compensating the MAF output for temperature. The output of the compressor map (i.e., pressure) can be compensated for barometric pressure and then may be used to determine the flow through the throttle via the following expression:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>TP</i>_FLOW=<i>F</i>Throttle(Tangle,<i>TP</i>drop)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where TP_FLOW is the Flow rate through throttle <b>5</b>, FThrottle is a function or map that describes the flow through the throttle, Tangle is the throttle angle or position, and TPdrop is the temperature and barometric pressure compensated pressure drop across the throttle body. The throttle flow can be used to determine the air mass flow through the engine cylinders using the following equation:
</p>
<p id="p-0053" num="0052">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mrow>
  <mi>Cyl_am</mi>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mrow>
        <mfrac>
          <mrow>
            <mi>FK</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mi>k</mi>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mrow>
            <mi>FK</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>k</mi>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mfrac>
        <mo>&#xb7;</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mn>1</mn>
            <mo>-</mo>
            <mrow>
              <mi>FK</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mi>k</mi>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
        <mo>&#xb7;</mo>
        <mi>Cyl_am</mi>
      </mrow>
      <mo>&#x2062;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>k</mi>
          <mo>-</mo>
          <mn>1</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>+</mo>
    <mrow>
      <mrow>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>FK</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mi>k</mi>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
        <mo>&#xb7;</mo>
        <mi>TP_FLOW</mi>
      </mrow>
      <mo>&#x2062;</mo>
      <mrow>
        <mo>(</mo>
        <mi>k</mi>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Where Cyl_am is the air mass flow through the engine cylinders, k is a variable describing the sample or calculation number index, FK is a filter coefficient used to describe manifold filling. The manifold filter coefficient may be determined as described in U.S. Pat. No. 5,331,936, which is hereby fully incorporated by reference. Assuming that during steady state engine operation the mass flow rate of air entering the engine is equal to the air mass flow rate entering the cylinders, and to the turbo charger compressor mass flow rate through the turbo charger, and to the exhaust air mass flow rate then the mass air flow through the engine can be considered to be the desired mass air flow through the engine, thereby removing the mass air flow from the analysis. The cylinder air charge that may be compensated for intake manifold filling may then be determined from the above cylinder air mass equation without using MAF sensor reading. The amount of additional air flow into the engine used to compensate for turbo charger lag may then be determined by:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Delta_air=Air_gain&#xb7;(Des_am&#x2212;Cyl_am)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where Delta_air is the amount of additional air mass that is to be provided to compensate for turbo charger lag by adjusting the throttle command, Air_gain is a predetermined gain that may be varied by engine speed, turbine speed, engine coolant temperature, cylinder load, and/or other engine operating conditions, for example.
</p>
<p id="p-0054" num="0053">The engine has a limited ability to induct additional air depending on the engine operating conditions, such at the engine speed, valve timing, and throttle position. If air flow through the engine is choked by the throttle or valves then air flow may be increased by changing the valve timing, valve lift, or throttle opening amount. On the other hand, if the throttle and/or valve restriction is slight then there may be little opportunity to increase air flow through the engine by further adjusting valve timing or opening the throttle. Therefore, the Delta_air variable can be limited as a function of engine speed and throttle position or alternatively as a function of engine speed and cylinder load, for example, so that a realizable cylinder air charge amount may be requested.</p>
<p id="p-0055" num="0054">In addition, the before-mentioned Air_gain term may be scheduled based on cylinder load and turbo charger lag. This allows the throttle and/or valve timing and/or lift to be adjusted such that when turbo charger lag is large and cylinder load is low, the throttle and/or valve timing/lift may be adjusted at a higher rate of change. On the other hand, if the turbo charger lag is small and the cylinder load is large, the throttle and/or valve timing/lift may be adjusted at a lower rate of change. In yet another example, if the turbo charger lag is large and the cylinder load is large, the throttle and/or valve timing/lift may be adjusted at a low rate of change. In still another example, if the turbo charger lag is small and the cylinder load is small, the throttle and/or valve timing/lift may be adjusted at a low rate of change. This method can control the amount of actuator over-shoot and cylinder air charge variation.</p>
<p id="p-0056" num="0055">The additional amount of torque provided by the air charge compensation may be determined by:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Delta_tor=Des_Brk_Tor&#x2212;feng<i>T</i>(<i>N</i>,Des_am+Delta_air)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where Delta_tor is the amount of additional torque that can be delivered by the engine by adjusting the throttle or valve timing to compensate for turbo charger lag, fengT is a function that describes engine torque based on engine operating conditions, such as speed and air mass, for example. The variable N represents engine speed. The routine proceeds to step <b>309</b>.
</p>
<p id="p-0057" num="0056">In step <b>309</b>, the amount of lag compensation provided by the electric motor is determined. In one embodiment, the amount of torque supplied by the electric motor can be determined as a function of the motor speed and current.</p>
<p id="p-0058" num="0057">The available motor torque, TMOT_Av<b>1</b>, may be determined from the motor speed and the amount of current available to the motor. And since at least some of the motor current may be supplied by the battery it may also be desirable to consider the state of charge of the battery when determining the available motor torque. By determining the battery state of charge it may be possible to determine how much power (rate of current and voltage delivered) the battery may supply to the electric motor for turbo charger lag compensation. Thus, the available motor torque may be a function of the motor and battery operating conditions. In one example, the motor torque command may be determined by selecting the minimum of equations (1) and (2):</p>
<p id="p-0059" num="0058">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>TMOT</mi>
          <mi>cmd</mi>
        </msub>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mi>TWHL</mi>
            <mo>-</mo>
            <mrow>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>Ind_Tor</mi>
                  <mo>-</mo>
                  <mi>Delta_tor</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
              <mo>&#xb7;</mo>
              <msub>
                <mi>R</mi>
                <mi>e</mi>
              </msub>
            </mrow>
          </mrow>
          <msub>
            <mi>R</mi>
            <mi>s</mi>
          </msub>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>1</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mi>or</mi>
    </mtd>
    <mtd>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>TMOT</mi>
          <mi>cmd</mi>
        </msub>
        <mo>=</mo>
        <mi>TMOT_Avl</mi>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>2</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
When equation one is selected the motor torque demand can be used to supply a portion of the wheel torque that may not be supplied by the engine. That is, the motor torque may act as an additive torque to the engine torque so that the wheel torque demand may be met. Furthermore, since the Delta_tor term may be influenced by compressor and/or engine operating conditions, the compressor and/or engine operating conditions may influence the motor torque. When equation two is selected the motor torque output capacity is limited by the amount of available motor torque. Of course, other methods of selecting engine and motor torque are possible and as such the before-mentioned method is not intended to limit the scope or breadth of the current description. The routine proceeds to step <b>311</b>.
</p>
<p id="p-0060" num="0059">In step <b>311</b>, the motor torque and engine torque are adjusted. The Delta_air term from step <b>305</b> can be added to the desired engine air amount so that the throttle, valves, or other engine air amount adjusting device may alter the engine air amount and compensate for lag that may be present between the desired and actual engine air amount. In one example, the throttle command position may be adjusted in response to the outlet pressure of a turbo charger. In another example, the valve timing may be adjusted in response to the outlet pressure of a turbo charger. In still another example, the valve lift of a variable event valve actuator may be adjusted in response to the outlet pressure or flow from a air intake compressor.</p>
<p id="p-0061" num="0060">The motor torque can also be adjusted in step <b>311</b> by adjusting the current and/or voltage applied to the traction motor. Depending on the control objectives the motor torque may be increased or decreased to compensate for lag in the torque response and/or to provide a portion of the desired wheel torque. After adjusting the motor torque the routine proceeds to exit.</p>
<p id="p-0062" num="0061">Referring to <figref idref="DRAWINGS">FIG. 4</figref>, an example plot of a turbo charger speed map is shown. The x-axis represents the pressure ratio across the turbo charger turbine. The y-axis represents the mass flow rate of exhaust through the turbine. Curves <b>401</b> and <b>402</b> represent the pressure versus flow characteristics of an example variable geometry turbine at selected turbine vane positions. Curve <b>405</b> illustrates the intersection of turbine pressure ratio and exhaust mass flow for a constant engine speed. Other turbine speeds can be represented by similar lines that describe the pressure ratio and flow characteristics of a turbine at a constant speed. The intersection of curves <b>402</b> and <b>405</b> describes a unique operating point that can be used to determine the turbine speed. For example, a table or function can be constructed such that it outputs a unique turbine speed when indexed by a turbine pressure ratio and an exhaust mass flow rate. As a result, the turbine speed may be inferred without imposing a substantial computational load on the powertrain control module. Furthermore, the relationship described by <figref idref="DRAWINGS">FIG. 4</figref> can be used as described by the method of <figref idref="DRAWINGS">FIG. 3</figref> to determine compensation for system lag.</p>
<p id="p-0063" num="0062">Referring to <figref idref="DRAWINGS">FIG. 5</figref>, an example compressor map that relates compressor air flow and compressor speed to the outlet pressure of the turbine is shown. Curve <b>501</b> represents a line of constant compressor speed at various compressor flow rates and outlet pressures. Curves <b>502</b> and <b>503</b> represent the boundaries of compressor operation so that compressor surge may be reduced, for example. The figure shows that for a selected compressor flow rate and compressor speed, a unique outlet pressure may be determined. This allows the evolution of compressor outlet pressure to be determined as the exhaust flow influences the turbine and compressor speed.</p>
<p id="p-0064" num="0063">Referring to <figref idref="DRAWINGS">FIG. 6</figref>, a flow chart of an alternative method to compensate for turbo charge is shown. In step <b>601</b>, the routine determines if a change in engine torque is requested. If the engine torque is varying by more than a predetermined amount the routine proceeds to step <b>602</b>, otherwise the routine proceeds to step <b>607</b>. Note that the above-mentioned predetermined change in engine torque may vary in response to engine speed and/or cylinder load, for example.</p>
<p id="p-0065" num="0064">In step <b>602</b>, the cylinder air amount can be adjusted. The cylinder air amount may be adjusted via throttle opening amount, valve timing and/or lift, EGR amount, or by combinations or sub-combinations of the before-mentioned methods. The amount of the adjustment may be made dependant on the rate of change of engine torque and/or other engine operating conditions (e.g., engine temperature, battery state of charge, electric motor torque capacity and/or reserve, barometric pressure, air temperature, boost pressure, turbo charger turbine speed, time since start, etcetera). In one example, the change in engine torque can be used to index functions or tables that contain control variables that may alter the system response. These control variables may be used to change the response of actuators (e.g., throttle, electrically actuated valves, cam phasors, etcetera) so that other system lags (e.g., turbo charger lag, cam phasor lag, etcetera) may be compensated. An example lead compensator of the following form may be used to adjust cylinder air charge and/or motor torque:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Y</i>(<i>k</i>)=&#x3b1;&#xb7;<i>U</i>(<i>k</i>)+&#x3b2;&#xb7;<i>U</i>(<i>k</i>&#x2212;1)+&#x3b4;&#xb7;<i>Y</i>(<i>k</i>&#x2212;1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where Y is the output variable of the lead compensator, U is the system input variable, k is a variable describing the sample or calculation number index, and coefficients &#x3b1;, &#x3b2;, &#x3b4; are predetermined and may vary with engine operating conditions, for example. Of course, alternative compensator designs may be used in place of the before-mentioned design and as such the described compensator is not meant to limit the scope or breadth of the description. The selection of the coefficients may be based on the stability of the system and drivability constraints. In addition, it is also possible to compensate a fraction of the total number of cylinders for the system delays. However, cylinders are usually compensated in order of firing until the lag period has expired. The routine proceeds to step <b>604</b>.
</p>
<p id="p-0066" num="0065">In step <b>604</b>, electric motor current may be adjusted in response to the engine torque demand. Similar to step <b>602</b>, a lead compensator of the before-mentioned form may also be used to compensate the electric motor torque demand. Alternatively, another compensator design may be used such that the before-mentioned compensator is not meant to limit the breadth or scope that the electric motor compensation method. The coefficients of the compensator may be empirically determined and may be a function of system operating conditions (e.g., operator demand, engine temperature, boost pressure, turbo charger outlet pressure or flow, turbo charger turbine speed, battery state of charge, electric motor torque capacity and/or reserve, barometric pressure, air temperature, time since start, and/or engine torque). The selection of the coefficients can influence the magnitude and duration of the motor response. The routine exits after adjusting engine air amounts and motor torque amounts.</p>
<p id="p-0067" num="0066">Note that coefficients of the compensators may be adjusted during certain operating conditions so that the compensator does not provide any lead to the system. For example, if the motor has no reserve capacity (i.e., the motor is producing substantially (&#xb1;5%) its peak torque at a certain operating point or the torque capacity of the motor may be limited by the battery state of charge) then some of the coefficients may be reduced to zero or near zero so that a small amount or no lead is provided to the system. In addition, the before-mentioned compensators may be used to increase or decrease engine and/or motor torque at an increased rate. Further, the coefficients may be selected such that during an increasing torque demand the amount of engine and/or motor torque increase may be based on the operating conditions or the engine and/or turbo charger (e.g., turbo charger outlet pressure, turbo charger outlet flow rate, driver torque demand, engine speed, turbo charger turbine temperature, and engine temperature).</p>
<p id="p-0068" num="0067">In step <b>607</b>, the coefficients of the cylinder air amount and motor torque compensators are adjusted for steady state torque demand conditions. That is, the coefficients of the before-mentioned compensators may be adjusted for operating conditions where the operator torque demand is substantially (&#xb1;5% of demand) constant. Note that the steady state coefficients may vary between steady state operating conditions so that if a change in torque does occur there may be compensation that may be more suitable for a torque disturbance at particular steady state operating condition.</p>
<p id="p-0069" num="0068">Referring to <figref idref="DRAWINGS">FIG. 7</figref>, an example plot of signals that illustrate engine lag compensation is shown. Graph (a) shows an example desired wheel torque signal <b>701</b>. This signal may be generated by pedal position sensor <b>119</b>, by the combination of several signals, or by a device that can demand a powertrain torque request, an engine speed controller for example.</p>
<p id="p-0070" num="0069">Graph (b) illustrates several examples of simulated engine torque output in response to the demand of Graph (a). The response of an engine without torque compensation may be illustrated by curve <b>705</b>. This torque response lags the output of compensated engine torque response in the <b>20</b> second and <b>115</b> second regions. This torque response comes close to matching the torque request at higher requested torque demands. This type of behavior is common for turbo charged engines where turbo charger lag occurs at lower engine speeds and then decreases after the turbo charger has time to reach a more efficient operating point. Further, curve <b>705</b> indicates that the engine is providing the majority of the requested torque during the operating period. However, it is also possible to use a smaller fraction of engine torque and an increased amount of motor torque to meet the driver demand torque. The powertrain controller may determine the fraction of desired torque that comes from the engine and from the motor, and may vary the fraction based on engine, vehicle, or battery operating conditions. Curve <b>703</b> illustrates one example of engine torque compensation that may be achieved by adjusting the cylinder air amount. Specifically, the torque response of <b>703</b> rises quicker than the response illustrated by curve <b>705</b>. Consequently, the engine torque may be able to more closely follow the desired torque demand. The trajectory of curve <b>703</b> follows the trajectory of curve <b>705</b> after the initial torque compensation.</p>
<p id="p-0071" num="0070">The engine torque response illustrated by curve <b>705</b> may be improved by practicing the cylinder air charge compensation method described by <figref idref="DRAWINGS">FIG. 3</figref> or <b>6</b>. Namely, the intake air system lag may be compensated so that actuators that may influence cylinder air charge may be controlled to reduce the lag. For example, throttle position of electronic throttle <b>5</b> may be adjusted so that intake manifold filling effects may be reduced. This may be accomplished by briefly opening the throttle to a position that is greater than that which would be requested if the torque demand were nearly constant, and then by moving the throttle to the position that meets the torque demand. In other words, during an increase in torque demand, the throttle may be opened to a position that is greater than the position that the throttle would be positioned during a comparable steady state torque demand and then brought back to the steady state position after a period of time. This may allow the intake manifold to fill faster, thereby increasing the amount of air that may be inducted into a cylinder. In another example, the throttle position of electronic throttle <b>5</b> and intake valve phaser may be adjusted to further reduce intake manifold filling effects, similarly reducing the engine torque lag. In yet another example, the throttle position of electronic throttle <b>5</b> and the timing of randomly activated valves may be adjusted to reduce intake manifold filling effects. In still another example, the valve lift of intake valves in a variable event valvetrain may be adjusted to reduce intake manifold filling effects. The before-mentioned lag reduction methods can also adjust throttle and valve operating parameters in response to torque lag so that a smooth and responsive torque may be produced.</p>
<p id="p-0072" num="0071">Graph (c) illustrates example motor torque output that may be combined with the engine torque output to allow the powertrain torque to better follow the desired torque request that is shown in graph (a). The motor torque trajectory illustrated by curve <b>707</b> represents the amount of motor torque that may be added to the engine torque described by curve <b>703</b> to follow the desired torque of curve <b>701</b>. In other words, the engine air amount and motor torque may be adjusted together so that the desired torque demand may be achieved. This curve illustrates that less motor torque is required to meet desired torque when engine torque is compensated. Consequently, less battery energy may be needed by the motor when air charge compensation is provided for the engine. On the other hand, curve <b>709</b> represents the amount of motor torque that may be added to the engine torque described by curve <b>705</b> so that the desired torque of curve <b>701</b> may be followed. In other words, more motor torque may be required to follow the desired wheel torque if engine torque is not compensated. Further, as the engine boost pressure increases or decreases during transient operating conditions, more or less engine torque may be produced so that less battery power may be necessary to meet the desired torque request. By adjusting the motor torque in response to engine boost pressure or other turbo charger operating conditions (e.g., turbine temperature, compressor air flow rate, and/or turbine speed), it may be possible to use less motor torque during transient operating conditions.</p>
<p id="p-0073" num="0072">Graph (d) illustrates an example engine air amount during the example period. Locations <b>709</b>, <b>710</b>, and <b>711</b> show examples of how compensation may affect air flow into the engine. At each of these locations the air charge increases and then falls back to a level that may be more indicative of the steady state torque demand. This effect may be accomplished by opening the throttle beyond the predetermined steady state throttle position and then bringing it back to the steady state command position. In other words, the throttle opening amount is adjusted in response to the dynamic conditions of the engine and torque request so that the desired response may be achieved.</p>
<p id="p-0074" num="0073">As will be appreciated by one of ordinary skill in the art, the routines described in <figref idref="DRAWINGS">FIGS. 2 and 3</figref> may represent one or more of any number of processing strategies such as event-driven, interrupt-driven, multi-tasking, multi-threading, and the like. As such, various steps or functions illustrated may be performed in the sequence illustrated, in parallel, or in some cases omitted. Likewise, the order of processing is not necessarily required to achieve the objects, features, and advantages described herein but is provided for ease of illustration and description. Although not explicitly illustrated, one of ordinary skill in the art will recognize that one or more of the illustrated steps or functions may be repeatedly performed depending on the particular strategy being used.</p>
<p id="p-0075" num="0074">This concludes the description. The reading of it by those skilled in the art would bring to mind many alterations and modifications without departing from the spirit and the scope of the description. For example, I3, I4, I5, V6, V8, V10, and V12 engines operating in natural gas, gasoline, diesel, or alternative fuel configurations could use the present description to advantage.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07640744-20100105-M00001.NB">
<img id="EMI-M00001" he="14.48mm" wi="76.20mm" file="US07640744-20100105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07640744-20100105-M00002.NB">
<img id="EMI-M00002" he="6.35mm" wi="76.20mm" file="US07640744-20100105-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US07640744-20100105-M00003.NB">
<img id="EMI-M00003" he="6.01mm" wi="76.20mm" file="US07640744-20100105-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US07640744-20100105-M00004.NB">
<img id="EMI-M00004" he="6.35mm" wi="76.20mm" file="US07640744-20100105-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005" nb-file="US07640744-20100105-M00005.NB">
<img id="EMI-M00005" he="6.35mm" wi="76.20mm" file="US07640744-20100105-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US07640744-20100105-M00006.NB">
<img id="EMI-M00006" he="16.59mm" wi="76.20mm" file="US07640744-20100105-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method to improve engine torque response of a hybrid vehicle powertrain, the hybrid powertrain comprising an internal combustion engine that may be coupled to a motor, the internal combustion engine having a compressor coupled thereto, the method comprising:
<claim-text>compensating transient compressor lag by adjusting the state of an air charge altering device; and</claim-text>
<claim-text>adjusting a motor output torque delivered to a vehicle driveline to further compensate for said compressor lag, said adjustment to said motor output torque limited by motor speed; where adjustments of the air charge altering device and the motor output torque are based on compressor operation at least during the transient condition, and where adjustments of the air charge altering device and the motor output torque are coordinated to one another to meet desired torque output requested by the operator, the coordination including increasing the air charge adjustment and reducing the motor output torque adjustment in a first state, and the coordination including decreasing the air charge adjustment and increasing the motor output torque adjustment in a second state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising adjusting said motor output torque in response to the operator request.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said compressor operation is an output pressure of said compressor.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said compressor operation is an output flow rate of said compressor.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said compressor is a turbo charger, the method further comprising varying relative adjustment amounts of the air charge altering device and motor torque based on a state of battery charge, where motor torque provides less transient turbo lag torque compensation at lower battery charge.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said compressor is a super charger.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said motor is an electric motor, and wherein the air charge altering device is adjusted at a lower rate of change when compressor lag is a first lag value and cylinder load is a first load value, than when compressor lag is a second lag value and cylinder load is a second load value, said second lag value and said second load value being respectively smaller than said first lag value and said first load value.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said motor is a hydraulic motor.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method to improve engine torque response of a hybrid vehicle powertrain, the hybrid powertrain comprising an internal combustion engine that may be coupled to a motor, the internal combustion engine having a compressor coupled thereto, the method comprising:
<claim-text>in response to an increasing torque demand, increasing airflow to a cylinder of the engine by adjusting cylinder valve timing operation and increasing a motor torque output from said electric motor to a vehicle driveline, the airflow and motor torque output being coordinated to one another to compensate compressor delay, the cylinder valve timing operation based on an operating condition of said compressor, and the magnitude of said increase in torque output based on the operating condition of said compressor and engine valve timing, wherein the coordination includes a greater airflow increase and a smaller motor torque output increase in a first motor torque capacity state, and wherein the coordination includes a smaller airflow increase and a greater motor output torque increase in a second higher motor torque capacity state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising adjusting the duration of said torque output in response to an operating condition of said engine.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising adjusting the duration of said torque output in response to an operating condition of said motor.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein said motor is an electric motor, and wherein the valve timing is adjusted at a higher rate of change when compressor lag is a first lag value and cylinder load is a first load value, and the valve timing is adjusted at a lower rate of change when compressor lag is a second lag value and cylinder load is a second load value, said second lag value being smaller than said first lag value and said second load value being greater than said first load value.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein said motor is a hydraulic motor.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein said compressor is a turbo charger.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A method to improve engine torque response of a hybrid vehicle powertrain, the hybrid powertrain comprising an internal combustion engine that may be coupled to a motor, the internal combustion engine having a compressor coupled thereto, the method comprising:
<claim-text>adjusting at least a cylinder air amount by adjusting valve timing and adjusting a motor output torque to compensate for a transient compressor lag, said cylinder air amount and said motor torque adjusted in response to a compressor operating condition, wherein the cylinder air amount and the motor output torque are adjusted in coordination to each other to achieve a desired torque output requested by an operator, the coordination including a greater transient increase of the cylinder air amount and a smaller transient increase of the motor output torque in a first battery charge state than in a second higher battery charge state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said adjusting at least a cylinder air amount is accomplished by controlling the position of an electrically actuated throttle.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said adjusting at least a cylinder air amount is accomplished by controlling the opening timing of an intake valve.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said motor is an electric motor, and wherein the air charge altering device is adjusted at a lower rate of change when compressor lag is a first lag value and cylinder load is a first load value, than when compressor lag is a second lag value and cylinder load is a second load value, said second lag value and said second load value being respectively greater than said first lag value and said first load value. </claim-text>
</claim>
</claims>
</us-patent-grant>
