<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v42-2006-08-23.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07641121-20100105.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20091221" date-publ="20100105">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07641121</doc-number>
<kind>B2</kind>
<date>20100105</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10546938</doc-number>
<date>20040225</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<us-term-of-grant>
<us-term-extension>266</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>19</main-group>
<subgroup>06</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20100105</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>235492</main-classification>
<further-classification>235440</further-classification>
</classification-national>
<invention-title id="d0e53">Multi-protocol memory card</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6669487</doc-number>
<kind>B1</kind>
<name>Nishizawa et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2002/0111771</doc-number>
<kind>A1</kind>
<name>Huang et al.</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2003/0046472</doc-number>
<kind>A1</kind>
<name>Morrow</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2007/0175994</doc-number>
<kind>A1</kind>
<name>Fruhauf</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235440</main-classification></classification-national>
</citation>
<citation>
<patcit num="00005">
<document-id>
<country>WO</country>
<doc-number>WO 99/49415</doc-number>
<kind>A2</kind>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00006">
<document-id>
<country>WO</country>
<doc-number>WO 02/13021</doc-number>
<date>20020200</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00007">
<document-id>
<country>WO</country>
<doc-number>WO 02/31762</doc-number>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00008">
<document-id>
<country>WO</country>
<doc-number>WO 2004/095365</doc-number>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00009">
<othercit>Supplemental European Search Report and Annex 04714417, Feb. 22, 2006.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>235492</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>235440</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10372304</doc-number>
<kind>00</kind>
<date>20030225</date>
</document-id>
<parent-status>ABANDONED</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>10546938</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20070170266</doc-number>
<kind>A1</kind>
<date>20070726</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Krygier</last-name>
<first-name>Marcelo</first-name>
<address>
<city>Kyriat Ono</city>
<country>IL</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>IL</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Meyassed</last-name>
<first-name>Moshe</first-name>
<address>
<city>Kadima</city>
<country>IL</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>IL</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Amir</last-name>
<first-name>Elad</first-name>
<address>
<city>Hadera</city>
<country>IL</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>IL</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Slater &#x26; Matsil, L.L.P.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>Qimonda AG</orgname>
<role>03</role>
<address>
<city>Munich</city>
<country>DE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Lee</last-name>
<first-name>Michael G.</first-name>
<department>2876</department>
</primary-examiner>
<assistant-examiner>
<last-name>Trail</last-name>
<first-name>Allyson N</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/IL2004/000190</doc-number>
<kind>00</kind>
<date>20040225</date>
</document-id>
<us-371c124-date>
<date>20070125</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2004/077335</doc-number>
<kind>A </kind>
<date>20040910</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">According to some embodiments of the present invention, a multi-protocol non-volatile memory (&#x201c;NVM&#x201d;) card may include a NVM array, at least two protocol units, and a controller adapted to provide an external application access to the NVM array with the use of one of the protocol units. The controller or control logic may select which protocol unit to use based on a signal or other indicator of the protocol used by the external application. According to some embodiments of the present invention, a method of operating a multi-protocol memory card may include switching between a first and a second protocol or mode of the card based on a signal from an application attempting to access to the NVM card.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="137.92mm" wi="242.15mm" file="US07641121-20100105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="214.80mm" wi="144.95mm" orientation="landscape" file="US07641121-20100105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="209.63mm" wi="146.98mm" orientation="landscape" file="US07641121-20100105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="207.18mm" wi="173.06mm" orientation="landscape" file="US07641121-20100105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="250.11mm" wi="166.29mm" orientation="landscape" file="US07641121-20100105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="240.54mm" wi="198.46mm" orientation="landscape" file="US07641121-20100105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="202.27mm" wi="184.66mm" file="US07641121-20100105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="220.30mm" wi="196.17mm" file="US07641121-20100105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of U.S. patent application Ser. No. 10/372,304 filed Feb. 25, 2003, now abandoned.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates generally to non-volatile memory cards and methods for operation thereof and, more particularly, to multi-mode operation of non-volatile memory cards.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">The operation of mass media non-volatile memory (&#x201c;NVM&#x201d;) cards is well known. Various NVM mass storage devices able to handle large data files such as smart media cards, MultiMediaCards, memory sticks, and other like NVM mass storage devices and cards have been gaining market acceptance over the past several years. Hereinbelow, the term MultiMediaCard (&#x201c;MMC&#x201d;), or the like, refers to any NVM mass storage device able to handle large data files regardless of the protocol used. To date, the above NVM cards have been used for consumer applications such as digital cameras and portable music devices. Due to the absence of an agreed upon security standard for the above mentioned NVM card standards, none have been approved by any industry (e.g. banking, telecom, etc.) for the storage of private data such as bank details or telephone account information.</p>
<p id="p-0005" num="0004">A category of NVM cards known as &#x201c;smart-cards,&#x201d; having generally smaller capacity than the above mentioned mass storage devices, which work with secured application such as &#x201c;smart card applications,&#x201d; have been known and adopted for commercial use by several industries including banking and telecommunications. Hereinbelow, the term &#x201c;smart-card applications&#x201d; refers to all secured applications known which relate or conform to the interoperability standard defined by the International Standards Organization (ISO) as the ISO 7816 standard for integrated circuit cards with contacts, or with any other secure standard. The specifications of the ISO 7816 standard, and any other standards which may relate thereto, focus on interoperability of secured applications over the physical, electrical, and data-link protocol levels.</p>
<p id="p-0006" num="0005">There is a broad base of smart-card applications already on the market, and the need for secured applications in general is growing. Banks and credit institutions, for example, have defined an industry-specific smart card specification. This specification adopted the ISO 7816 standards and defined some additional data types and encoding rules for use by the financial services industry. This industry standard is called the EMV (Europay-MasterCard-Visa) standard. The ISO 7816 standard has also been adopted by the telecommunication industry, for use with the global system for mobile communications (GSM), to enable identification and authentication of mobile telephone users.</p>
<p id="p-0007" num="0006">Due to the ISO 7816 standards, as well as the specifications that have adopted it, smart card applications and other ISO 7816 compliant applications currently operate only on an ISO 7816 communication protocol, for the most part using I/O, clock (CLK), and reset (RST) lines to store and retrieve data from a smart-card chip which us usually integrated within a smart-card controller of a protocol unit.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0008" num="0007">According to some embodiments of the present invention, a multi-protocol non-volatile memory (&#x201c;NVM&#x201d;) card may include a NVM array, at least two protocol units, and a controller adapted to provide an external application access to the NVM array with the use of one of the protocol units. The controller or control logic may select which protocol unit to use based on a signal or other indicator of the protocol used by the external application.</p>
<p id="p-0009" num="0008">As part of the present invention, there may be a method of operating a multi-protocol NVM card. According to some embodiments of the present invention, a method of operating a multi-protocol memory card may include switching between a first and a second protocol mode of the card based on a signal from an application attempting to access to the NVM card.</p>
<p id="p-0010" num="0009">According to a further embodiment of the present invention, there may be an interface and a method of operating the interface, where the interface is between an external application substantially compliant with the ISO 7816 standard and a multi-protocol memory card. The interface may include a first connector to the external application and a second connector to the multi-protocol memory card. An interface according to some embodiments of the present invention may also include a signaling structure to indicate to the multi-protocol memory card to operate in a mode substantially compliant with the ISO 7816 standard.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0011" num="0010">Aspects of the present invention may best be understood by reference to the following detailed description when read with the accompanying drawings, in which:</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustration of a multi-protocol memory card, operative in accordance with some embodiments of the present invention;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustration of some embodiments of the multi-protocol memory card of <figref idref="DRAWINGS">FIG. 1</figref>, where the card is adapted to operate in either an ISO 7816 protocol mode or in an MMC protocol mode;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> is a more detailed block diagram of the card of <figref idref="DRAWINGS">FIG. 2</figref>, including details regarding possible logic circuit arrangements according to some embodiments of the present invention;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram showing the multi-protocol card of <figref idref="DRAWINGS">FIG. 1</figref>, wherein the NVM array of the card has been partitioned for use by each of three external applications, in accordance with some of the embodiments of the present invention;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram showing a card according to any of <figref idref="DRAWINGS">FIGS. 1 through 4</figref>, or any other multi-protocol card, communicating with an ISO 7816 external application through an interface according to some embodiments of the present invention;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart illustration of a method by which a multi-protocol card may switch from a first protocol mode (e.g. MMC mode) to a second protocol mode (e.g. ISO 7816 mode) in accordance with some embodiments of the present invention; and</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> is a flow chart illustration of a method by which a multi-protocol card may switch from a second protocol mode (e.g. ISO 7816 mode) to a first protocol mode (e.g. MMC mode) in accordance with some embodiments of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0019" num="0018">It will be appreciated that for simplicity and clarity of illustration, elements shown in the figures have not necessarily been drawn to scale. For example, the dimensions of some of the elements may be exaggerated relative to other elements for clarity. Further, where considered appropriate, reference numerals may be repeated among the figures to indicate corresponding or analogous elements.</p>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE PRESENT INVENTION</heading>
<p id="p-0020" num="0019">In the following detailed description, numerous specific details are set forth in order to provide a thorough understanding of the invention. However, it will be understood by those of ordinary skill in the art that the present invention may be practiced without these specific details. In other instances, well-known methods, procedures, and components have not been described in detail so as not to obscure the present invention.</p>
<p id="p-0021" num="0020">According to some embodiments of the present invention, a multi-protocol non-volatile memory (&#x201c;NVM&#x201d;) card may include a NVM array, at least two protocol units, and a controller or control logic adapted to provide an external application access to the NVM array using one of the protocol units. The controller or control logic may select which protocol unit to use based on an indicator of the protocol used by the external application.</p>
<p id="p-0022" num="0021">As part of the present invention, there may be a method of operating a multi-protocol NVM card. According to some embodiments of the present invention, a method of operating a multi-protocol memory card may include switching between a first and a second protocol mode of the card based on a signal from an application attempting to access to the NVM card.</p>
<p id="p-0023" num="0022">According to a further embodiment of the present invention, there may be an interface and a method of operating the interface, where the interface is between an external application substantially compliant with the ISO 7816 standard and a multi-protocol memory card. The interface may include a first connector to the external application and a second connector to the multi-protocol memory card. An interface according to some embodiments of the present invention may also include a signaling structure to indicate to the multi-protocol memory card to operate in a mode substantially compliant with the ISO 7816 standard.</p>
<p id="p-0024" num="0023">As part of some embodiments of the present invention, there may be an implementation on a single memory card having a first protocol unit, for example a MultiMediaCard (&#x201c;MMC&#x201d;) protocol unit, and a second protocol unit, for example an ISO 7816 memory card protocol unit. According to some embodiments of the present invention, a single NVM card may enable different applications, where each application uses different protocols, to operate on and access an NVM on the same NVM card.</p>
<p id="p-0025" num="0024">Reference is now made to <figref idref="DRAWINGS">FIG. 1</figref>, which is a block diagram illustration of a multi-protocol memory card <b>10</b>, operative in accordance with some embodiments of the present invention. Memory card <b>10</b> may include at least two protocol units, a first protocol unit <b>20</b> and a second protocol unit <b>30</b>, as well as a controller <b>40</b> or control logic unit <b>40</b>, and an NVM array <b>50</b> or NVM unit <b>50</b>.</p>
<p id="p-0026" num="0025">Either or both of the protocol units <b>20</b> and <b>30</b>, may conform to a standardized protocol known in the art, for example; (1) MMC protocol, (2) ISO 7816&#x2014;smart card protocol, (3) memory stick protocol, etc. Any one of the protocols associated with one or more protocol units may include a security or encryption feature. One or more of the protocol units <b>20</b> and <b>30</b>, may include an integrated NVM array <b>32</b>. For example, according to the ISO 7816 smart card standard, an ISO 7816 compliant smartcard may have an integrated controller unit, i.e. protocol unit, and integrated NVM array.</p>
<p id="p-0027" num="0026">A multi-protocol NVM card according to some embodiments of the present invention may include an internal communication bus, which communication bus may allow the control logic <b>40</b> to communicate with either of the protocol units <b>20</b> or <b>30</b>, and which may allow either of the protocol units to access the NVM unit <b>50</b>, either directly or through the controller <b>40</b>. Connector pins <b>60</b> may connect the controller <b>40</b> and internal bus to an external application. One or more of the connector pins, e.g. <b>65</b>, may be used to indicate to the control logic <b>40</b> which protocol unit may communicate with an external application attempting to access the card.</p>
<p id="p-0028" num="0027">Controller or control logic <b>40</b> may include a protocol selection module <b>42</b> and a mode initialization module <b>44</b>. Protocol selection module <b>42</b> may determine, based on signals from an external application, in which protocol mode the card should be operating and may signal internal switching circuits to activate the appropriate protocol unit. Herein, signals may be software/firmware and/or hardware generated. Mode initialization module <b>44</b> may initialize or condition the logic state of the NVM card <b>10</b> in order to produce an internal logic state corresponding to an NVM card of the desired protocol.</p>
<p id="p-0029" num="0028">The various portions of a multi-mode NVM card according to some embodiments of the present invention may be implemented on separate substrates (e.g. semi-conductor chips or cards), may be fabricated on the same substrates, or may be implemented in any combination. For example, according an embodiment of the present invention, the first protocol unit <b>20</b> and the logic unit <b>40</b> may be implemented on the same substrate. In a further embodiment of the invention, the second protocol unit <b>30</b> and logic unit <b>40</b> may be implemented on the same substrate. In yet a further embodiment of the invention, memory unit <b>50</b> and the second protocol unit <b>30</b> may be implemented on the same substrate. Many other combinations will be obvious to a person of ordinary skill in the art and are within the scope of the present invention.</p>
<p id="p-0030" num="0029">The first protocol unit <b>20</b> may be implemented in any manner known in the art. For example, in a non-limiting embodiment of the present invention, it may be implemented as an MMC protocol unit, which protocol unit may be part of an MMC controller commercially available today. Memory unit <b>50</b> may also be implemented in any manner known in the art. It may be implemented, in a non-limiting embodiment of the present invention, as an NROM memory array or unit, for example.</p>
<p id="p-0031" num="0030">Turning now to <figref idref="DRAWINGS">FIG. 2</figref>, there is shown a block diagram illustration of some embodiments of the multi-protocol memory card of <figref idref="DRAWINGS">FIG. 1</figref>, where the card is adapted to operate in either an ISO 7816 protocol mode or in an MMC protocol mode. Multi-protocol memory card <b>10</b> may include a first protocol unit <b>20</b> and a second protocol unit <b>30</b>, which second protocol unit may be ISO 7816 complaint. According to some embodiments of the present invention, first protocol unit <b>20</b> may be a MultiMediaCard protocol unit, a SecureDigital protocol unit, a CompactFlash protocol unit, a Memory Stick protocol unit, and a non-volatile mass memory card protocol unit. Hence, the first protocol unit <b>20</b> may be any MMC controller available on the market today. According to some embodiments of the present invention, the second protocol unit <b>30</b> may be a smart card controller, for example, an Infineon&#x2122; SLE66 smartcard controller (available from Infineon Technologies Flash Ltd., Netanya, Israel) with an integrated NVM array <b>32</b>. The control logic <b>40</b> may either be an ASIC (&#x201c;application specific integrated circuit&#x201d;) or a modified portion of either an ISO 7816 or an MMC compliant controller.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 2</figref> shows an ISO 7816 compliant host application <b>100</b> (e.g. banking application) communicating with the multi-protocol NVM using a data line, a clock line, and a reset line. The control logic <b>40</b>, having identified that the application is an ISO 7816 application, may connect, either directly or through an external switch (not shown), the signals or lines from the ISO 7816 host application to the second protocol unit <b>30</b>. Had the control unit <b>40</b> or control logic <b>40</b> identified the application attempting access to be an MMC application, the control logic <b>40</b> may have connected the relevant lines or signals from the application to the MMC protocol unit <b>20</b>, either directly or through an external switch or multiplexer (&#x201c;MUX&#x201d;). For example, in an embodiment of the present invention, the reserved pin of the ISO 7816 standard may be used.</p>
<p id="p-0033" num="0032">Turning now to <figref idref="DRAWINGS">FIG. 3</figref>, there is shown a more detailed block diagram of the card of <figref idref="DRAWINGS">FIG. 2</figref>, including some details regarding possible logic circuit arrangements according to some embodiments of the present invention. One set of pins <b>60</b>A may be used to communicate with an ISO 7816 application, while a second set of pins <b>60</b>B may be used to communicate with an MMC application. A select pun may receive a signal indicating whether an application attempting to access the card <b>10</b> is either an ISO 7816 or MMC application. Pins <b>60</b>A and <b>60</b>B may be two partially overlapping sets of pins.</p>
<p id="p-0034" num="0033">An ISO controller <b>40</b> may be adapted to accept a protocol indicator signal from pin <b>65</b> and to either connect pin set <b>60</b>A to the second protocol unit <b>30</b> (i.e. SmartCard Controller) or to connected pin set <b>60</b>B to the first protocol unit <b>20</b> (MMC). One or more switches/multiplexers <b>70</b> may be used to switch internal signal paths in a multi-protocol card <b>10</b> according to some embodiments of the present invention.</p>
<p id="p-0035" num="0034">Turning now to <figref idref="DRAWINGS">FIG. 4</figref>, there is shown a block diagram of the multi-protocol card of <figref idref="DRAWINGS">FIG. 1</figref>, wherein the NVM array of the card has been partitioned for use by each of three external applications, in accordance with some of the embodiments of the present invention. The control logic <b>40</b> according to some embodiments of the present invention may produce a file allocation or application allocation table <b>50</b>A of the NVM array <b>50</b>. The allocation table <b>50</b>A may allow several applications to share space on the NVM array. When a particular application attempts to access the card, the control logic <b>40</b> may use the allocation table <b>50</b>A to determine to which physical portions of the NVM array to grant access.</p>
<p id="p-0036" num="0035">According to the example of <figref idref="DRAWINGS">FIG. 4</figref>, an ISO 7816 compliant application <b>100</b>A may either access an integrated NVM array <b>32</b> on a second protocol unit <b>30</b>, or may access a portion of the NVM array <b>50</b>B set aside for ISO 7816 compliant use, also using the second protocol unit <b>30</b>. Each of two MMC applications <b>100</b>B and <b>100</b>C may access NVM array portions <b>50</b>C and <b>50</b>D through the control logic <b>40</b> and first (i.e. MMC) protocol unit <b>20</b>.</p>
<p id="p-0037" num="0036">The partitioning of a fixed amount of memory into separate files or memory segments associated with different applications is well known. Any technique known today or to be devised in the future is applicable to the present invention.</p>
<p id="p-0038" num="0037">Turning now to <figref idref="DRAWINGS">FIG. 5</figref>, there is shown a block diagram of a card according to any of <figref idref="DRAWINGS">FIGS. 1 through 4</figref>, or any other multi-protocol card, communicating with an ISO 7816 external application <b>100</b> through an interface <b>200</b> according to some embodiments of the present invention. An interface according to some embodiments of the present invention may have a first set of connecting pins <b>240</b> to connect to an external application such as an ISO 7816 compliant application, and a second set of pins <b>220</b> to connect a multi-protocol card according some embodiments of the present invention. The first set of pins may be physically configured to engage with a host application such as an ISO 7816 compliant banking or telecommunications application. Since a multi-protocol card <b>10</b> according to some embodiments of the present invention may have any one of several physical configurations and dimensions, including those of an MMC card, a smart media card, a memory stick, etc., the second set of pins may be configured to engage with the specific embodiment of the card. The example of an interface shown in <figref idref="DRAWINGS">FIG. 5</figref> is that of an interface between an ISO 7816 compliant application and a multi-protocol card having a configuration and size of an MMC card.</p>
<p id="p-0039" num="0038">The interface <b>200</b> may include wiring to connect signals from the first set of connecting pins <b>240</b> to the second set of connecting pins <b>220</b>. The wiring may be adapted to map the signals sent by the application <b>100</b> to the appropriate corresponding pins on the card <b>10</b>. A signaling structure <b>260</b> may produce a signal, which may indicate to the multi-protocol card <b>10</b> to switch to a mode or protocol corresponding to the protocol associated with the host application <b>100</b>. In some embodiments of the present invention, the signaling structure is a signal source, while in other embodiments of the present invention, the signaling structure may be little more than a conductor or jumper which may connect two or more pins on the card <b>10</b>.</p>
<p id="p-0040" num="0039">Reference is now made to <figref idref="DRAWINGS">FIG. 6</figref>, which is a flow chart illustration of a method that may be performed to switch a multi-protocol card according to some embodiments of the present invention from a first protocol mode, for example an MMC mode, to a second protocol mode, for example an ISO 7816 compliant mode. The method may be performed by a controller or control logic <b>40</b> operative in accordance with an embodiment of the present invention.</p>
<p id="p-0041" num="0040">The description hereinbelow will use an exemplary non-limiting implementation with reference to the multi-protocol card <b>10</b> of <figref idref="DRAWINGS">FIGS. 1 and 2</figref>. Memory card <b>10</b> may start in an MMC compliant mode (phase <b>1000</b>). The card's control logic or controller <b>40</b> may be using an MMC protocol unit to communicate with an MMC application, or may simply keep the MMC protocol unit online while in idle mode. Phase <b>1200</b> may be prompted upon receiving an indication or signal from an external application requiring the card <b>10</b> to be in ISO 7816 mode. According to Phase <b>1200</b>, an internal switching command to switch to ISO 7816 mode may be sent. Before the switching occurs, a check may be done to determine whether the card's current MMC mode details (e.g. configuration, files, etc.) should be saved (phase <b>1300</b>). If so, at phase <b>1400</b> the current MMC compliant details may be saved to a NVM array within the card. Part of the NVM array may contain a memory segment for storing file allocation and card configuration data. If details do not need to be saved, phase <b>1400</b> may be skipped.</p>
<p id="p-0042" num="0041">Following phases <b>1300</b> and <b>1400</b>, as part of phase <b>1500</b>, in setting up the second protocol mode, it may be determined whether an ISO 7816 compliant mode reset sequence is required. If a reset sequence is not required, an ISO 7816 compliant mode may be established (phase <b>1600</b>), and at phase <b>1700</b> an ISO 7816 compliant mode may be initialized.</p>
<p id="p-0043" num="0042">If a reset sequence is required, restoration of a previously saved ISO 7816 compliant mode may be performed as part of phase <b>1800</b>. The mode may be restored based on data stored in an NVM array.</p>
<p id="p-0044" num="0043">At phase <b>1900</b>, which may follow either phase <b>1700</b> or phase <b>1800</b>, an ISO 7816 mode may be operational.</p>
<p id="p-0045" num="0044">Reference is now made to <figref idref="DRAWINGS">FIG. 7</figref>, which is a flow chart illustration of a method that may be performed in accordance with some embodiments of the present invention to switch a multi-protocol NVM card according to an embodiment of the present invention from an ISO 7816 compliant protocol mode to an MMC protocol compliant mode. A memory card <b>10</b> according to any one of <figref idref="DRAWINGS">FIGS. 1 through 5</figref> may start in an ISO 7816 compliant mode (phase <b>2000</b>). A check may be performed so as to determine whether a switch to an MMC protocol compliant mode may be executed (phase <b>2100</b>). Mode switching from ISO 7816 mode to MMC protocol mode may be executed in many ways, including but not limited to by a command that may be executed from host <b>100</b> to memory card <b>10</b>, by sending signals through ISO 7816 connector pin <b>65</b>, or by other signal lines. Under some conditions, a switch from ISO 7816 mode to MMC mode may not be executed (phase <b>2200</b>) and, therefore, memory card <b>10</b> may remain in ISO 7816 compliant mode. It may, however, be operated in MMC mode in other circumstances, including, but not limited to, after power up of memory card <b>10</b>. A switching command to MMC mode may be sent (phase <b>2300</b>). A check may then be made as to whether the current ISO 7816 compliant mode should be saved (phase <b>2400</b>). If so, at phase <b>2500</b>, the current ISO 7816 compliant mode may be saved.</p>
<p id="p-0046" num="0045">A check, which may follow phase <b>2400</b> or phase <b>2500</b>, is made as to whether in setting up the second protocol mode, an MMC mode initialization sequence is required (phase <b>2600</b>). If an initialization sequence is required, an initialization of MMC mode may be executed (phase <b>2700</b>). When an initialization sequence is not required, a previously saved MMC mode may be restored (phase <b>2800</b>). A saved MMC mode may be restored if, during a previous session, an MMC mode was saved, e.g. phase <b>1400</b>, <figref idref="DRAWINGS">FIG. 6</figref>. At phase <b>2900</b>, a card's MMC mode may be operational.</p>
<p id="p-0047" num="0046">While certain features of the invention have been illustrated and described herein, many modifications, substitutions, changes, and equivalents will now occur to those of ordinary skill in the art. It is, therefore, to be understood that the appended claims are intended to cover all such modifications and changes as fall within the true spirit of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A multi protocol non-volatile memory non-volatile memory (&#x201c;NVM&#x201d;) card comprising:
<claim-text>an NVM unit;</claim-text>
<claim-text>at least two protocol units, at least one of said protocol units having access to said NVM unit, wherein said at least two protocol units comprise a first protocol unit operable in a first protocol mode, and a second protocol unit operable in a second protocol mode; and</claim-text>
<claim-text>a logic unit to select one of said at least two protocol units, wherein said logic unit is configured to switch from the first to the second protocol unit based on a signal from an application seeking access to the NVM card, wherein the logic unit is configured to switch from the first to the second protocol unit by commanding the NVM memory card to switch to the second protocol mode, and to set up the second protocol mode by restoring a previous card state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The memory card according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein said second protocol unit substantially conforms to the ISO 7816 standard.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The memory card according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein said second protocol unit comprises an integrated non-volatile memory array.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The memory card according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein said first protocol unit is selected from the group consisting of a MultiMediaCard protocol unit, a SecureDigital protocol unit, a CompactFlash protocol unit, a Memory Stick protocol unit, and a non-volatile mass memory card protocol unit.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The memory card according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said NVM unit, said at least two protocol units, and said logic unit are on a single substrate.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The memory card according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said first and second protocol units are on separate substrates.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The memory card according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said logic unit selects a protocol unit based on an external signal indicating a protocol used by a host application.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The memory card according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein said second protocol unit is selected if the host application substantially conforms to the ISO 7816 standard.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The memory card according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said second protocol unit grants the host application access to said integrated non-volatile memory array.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The memory card according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein said first protocol unit is selected if the host application does not substantially conform to the ISO 7816 standard, and said first protocol unit grants the host application access to the NVM unit.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A method of operating a multi protocol NVM card, the method comprising:
<claim-text>switching between a first and a second protocol mode based on a signal from an application seeking access to the NVM card, wherein said switching from the first to the second protocol modes comprises:
<claim-text>commanding the NVM memory card to switch to the second protocol mode, and</claim-text>
<claim-text>setting up the second protocol mode, wherein said setting up comprises restoring a previous card state.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein said commanding comprises activating a physical switch.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein said commanding comprises sending a firmware command.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein said commanding comprises activating a second protocol unit.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein said setting up comprises performing an initialization sequence.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref> further comprising saving the current card state.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein switching from the second protocol mode to the first protocol mode comprises:
<claim-text>commanding the NVM memory card command to switch to the first protocol mode;</claim-text>
<claim-text>and setting up the first protocol mode.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein said commanding comprises activating a physical switch.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The method according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein said commanding comprises sending a firmware command.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein said second protocol mode substantially conforms to the ISO 7816 standard and before the NVM card switches from the second protocol mode to the first protocol mode, a determination is made whether such a switch is possible.</claim-text>
</claim>
</claims>
</us-patent-grant>
