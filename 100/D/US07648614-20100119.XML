<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v42-2006-08-23.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.2 2006-08-23" file="US07648614-20100119.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20100104" date-publ="20100119">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>07648614</doc-number>
<kind>B2</kind>
<date>20100119</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11943643</doc-number>
<date>20071121</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>86</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>D</section>
<class>21</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>06</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20100119</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>162263</main-classification>
<further-classification>162198</further-classification>
<further-classification>700127</further-classification>
<further-classification>700128</further-classification>
<further-classification>700129</further-classification>
</classification-national>
<invention-title id="d0e53">Method and apparatus for controlling cross-machine direction (CD) controller settings to improve CD control performance in a web making machine</invention-title>
<references-cited>
<citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5400258</doc-number>
<kind>A</kind>
<name>He</name>
<date>19950300</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5898589</doc-number>
<kind>A</kind>
<name>Shakespeare et al.</name>
<date>19990400</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6564117</doc-number>
<kind>B1</kind>
<name>Chen et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<patcit num="00004">
<document-id>
<country>WO</country>
<doc-number>01/49931</doc-number>
<kind>A1</kind>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by other</category>
</citation>
<citation>
<nplcit num="00005">
<othercit>Tim Mast et al., New Optimization of CD Control for Global and Localized Profile Performance; Presented at 2003 Spring Technical Conference Proceedings of the Technical Association of the Pulp and Paper Industry; week of May 11, 2003; Chicago.</othercit>
</nplcit>
<category>cited by other</category>
</citation>
</references-cited>
<number-of-claims>4</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>162263</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>162198</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>700127</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>700128</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>700129</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>17</number-of-figures>
</figures>
<us-related-documents>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>10434869</doc-number>
<kind>00</kind>
<date>20030509</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7300548</doc-number>
<kind>A </kind>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>11943643</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20080066884</doc-number>
<kind>A1</kind>
<date>20080320</date>
</document-id>
</related-publication>
</us-related-documents>
<parties>
<applicants>
<applicant sequence="001" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Tran</last-name>
<first-name>Peter Quang</first-name>
<address>
<city>Dublin</city>
<state>OH</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="002" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Starr</last-name>
<first-name>Kevin Dale</first-name>
<address>
<city>Lancaster</city>
<state>OH</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
<applicant sequence="003" app-type="applicant-inventor" designation="us-only">
<addressbook>
<last-name>Mast</last-name>
<first-name>Timothy Andrew</first-name>
<address>
<city>Dublin</city>
<state>OH</state>
<country>US</country>
</address>
</addressbook>
<nationality>
<country>omitted</country>
</nationality>
<residence>
<country>US</country>
</residence>
</applicant>
</applicants>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Stevens &#x26; Showalter LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</parties>
<assignees>
<assignee>
<addressbook>
<orgname>ABB, Inc.</orgname>
<role>02</role>
<address>
<city>Westerville</city>
<state>OH</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Halpern</last-name>
<first-name>Mark</first-name>
<department>1791</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A web making machine is monitored to identify at least one cross-machine direction (CD) actuator that is developing local mapping problems. The identified CD actuator and a segment of surrounding actuators are probed to determine a performance curve for the actuator. The center of an insensitivity region of the performance curve is selected as an optimal mapping alignment setting for the identified actuator with the setting for the actuator being updated. Global smoothing may also be accomplished by probing a global smoothness factor to generate a corresponding performance curve that is then similarly used to select an optimal value for the smoothness factor.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="250.27mm" wi="178.56mm" file="US07648614-20100119-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="222.33mm" wi="172.47mm" file="US07648614-20100119-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="129.03mm" wi="156.89mm" file="US07648614-20100119-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="214.38mm" wi="160.95mm" file="US07648614-20100119-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="165.86mm" wi="154.26mm" file="US07648614-20100119-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="148.25mm" wi="157.73mm" file="US07648614-20100119-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="190.84mm" wi="147.83mm" file="US07648614-20100119-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="201.51mm" wi="158.16mm" file="US07648614-20100119-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="211.50mm" wi="158.41mm" file="US07648614-20100119-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="152.57mm" wi="157.90mm" file="US07648614-20100119-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This application is a division of U.S. patent application Ser. No. 10/434,869 filed May 9, 2003, entitled METHOD AND APPARATUS FOR CONTROLLING CROSS-MACHINE DIRECTION (CD) CONTROLLER SETTINGS TO IMPROVE CD CONTROL PERFORMANCE IN A WEB MAKING MACHINE which is incorporated by reference herein in its entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates in general to web forming processes and, more particularly, to improved cross-machine direction control of such processes. While the present invention can be applied to a variety of systems, it will be described herein with reference to a web-forming machine used for making sheets of paper for which it is particularly applicable and initially being utilized.</p>
<p id="p-0004" num="0003">Uniformity of a property of a web of sheet material can be specified as variations in two perpendicular directions: the machine direction (MD), which is in the direction of web movement during production, and the cross-machine direction (CD), which is perpendicular to the MD or across the web during production. Different sets of actuators are used to control the variations in each direction. CD variations appear in measurements known as CD profiles and are typically controlled by an array of actuators located side-by-side across the web width. For example, in a paper making machine, an array of slice screws on a headbox or an array of white-water dilution valves distributed across a headbox are usually used to control the weight profiles of webs of paper produced by the machine.</p>
<p id="p-0005" num="0004">Control schemes are used to control the CD actuators in order to reduce the variations at different CD locations across the web. For such schemes to succeed, it is crucial to apply control adjustments to the correct actuators, i.e., actuators that control areas of the web in which CD variations are to be reduced. Hence, the spatial relationship between the CD location of an actuator and the area of the profile the actuator influences is key to the implementation of a high-performance CD controller. The cross direction spatial relationship, between CD actuators and a CD profile, is known to those skilled in the art as &#x201c;CD mapping&#x201d;. <figref idref="DRAWINGS">FIG. 1</figref> shows an example of a CD mapping relationship <b>100</b> wherein bumps <b>102</b> made to actuators in an actuator array are reflected in the CD profile <b>106</b>.</p>
<p id="p-0006" num="0005">In many sheet-forming processes, the CD mapping relationship is not a linear function. For example, on a paper-making machine, the CD mapping between the headbox slice screws or dilution valves and weight profile is particularly non-linear near the edges of the web due to higher edge shrinkage. The nonlinear mapping relationship is a function of various machine conditions. The relationship cannot be easily represented with a fixed explicit function. Particularly in an ongoing web making operation where the CD mapping can change either gradually or abruptly, depending on the evolution of machine conditions.</p>
<p id="p-0007" num="0006">Misalignment in the CD mapping can lead to deterioration in control performance. One typical symptom of mapping misalignment is the presence of sinusoidal variation patterns in both the CD profile and the actuator profile. The appearance of the sinusoidal pattern is often referred to in the art as a &#x201c;picket fence&#x201d; pattern or &#x201c;pickets.&#x201d; The picket fence cycles that appear in both the CD profile and the actuator profile occur in the same region of the sheet and are usually of comparable spatial frequencies. Another typical symptom of mapping misalignment is the presence of sinusoidal variation patterns in the MD lanes corresponding to the sinusoidal variation patterns developed in both the CD profile and the actuator profile. The appearance of the sinusoidal pattern in the MD lanes in combination with the &#x201c;picket fence&#x201d; pattern is often referred to in the art as a &#x201c;walking pattern&#x201d;. The patterns are caused by the control actions being applied to the misaligned actuators.</p>
<p id="p-0008" num="0007">Although the mapping misalignment can be corrected by adjusting the control setup, often such adjustment has required manual intervention. Dependent on the frequency of CD mapping changes, the number of manual interventions may be significant. At a minimum, manual intervention requires determination of how wide the sheet is at the forming end (location of the process where the actuator array is situated) and at the finishing end (location of the process where the CD profiles are measured). While these determinations may be sufficient to satisfy processes with very minimal nonlinear shrinkage, for processes with greater non-linear shrinkage, the scope of manual intervention may require perturbing the actuator array, at multiple locations, to determine the mapping relationship between the actuators and the CD profile. Such perturbations or &#x201c;bumps&#x201d; are typically performed with the CD control system turned off. Additionally, only a few actuators, spaced sufficiently far apart, are normally perturbed at a given time to ensure separation of the response locations in the CD profile. For a CD control system with a large actuator array, such perturbations or bumps may consume an extended period of production on the process.</p>
<p id="p-0009" num="0008">Automated on-line mapping misalignment correction has been proposed based on using global indicators, such as variability of the entire CD profile, to identify a plurality of misalignment problems across the web and to activate corresponding profile optimization sequences. See, for example, U.S. patent application Ser. No. 09/592,921, entitled AUTOMATED OPTIMIZATION OF CROSS MACHINE DIRECTION PROFILE CONTROL PERFORMANCE FOR SHEET MAKING PROCESSES, that was filed Jun. 13, 2000, is assigned to the same assignee as the present application, is incorporated herein by reference and is now U.S. Pat. No. 6,564,117. Unfortunately, if global indicators are used, local profile problem areas have to get to product damaging levels before corrective action can be taken and, since a plurality of problems are identified at a given time, problems that do not occur at that time are not addressed.</p>
<p id="p-0010" num="0009">In addition, such correction schemes have assumed that the performance curve can be classified as a curve with a sharply defined minimum, such as a &#x201c;V&#x201d; shape. This form of performance curve has an optimal solution at the sharply defined minimum point. The inventors of the present application have determined that is not the case but rather, in cross direction applications, the performance curve is characterized by sharp edges and a wide, flat central region &#x201c;\______/&#x201d; such that the optimal point is near the center of the flat region and not near the sharply defined edges. Accordingly, previously proposed misalignment correction schemes find an optimal point at the sharply defined edges, which are points that are marginally stable. Further, a persistent &#x201c;bad&#x201d; spot in the profile resulting from mechanical problems can be identified as having a profile problem that needs to be probed resulting in time searching for a solution to a problem that cannot be solved.</p>
<p id="p-0011" num="0010">It is also possible to control the smoothness of the setpoints of the actuator array, i.e., to restrict the setpoint differences between adjacent actuators in the actuator array, to reduce the amplitude of the cycles. Control of smoothness is also a mechanism for making the CD control system more robust for modeling uncertainty under different process conditions and the presence of uncontrollable variations in the CD profile.</p>
<p id="p-0012" num="0011">Accordingly, there is an ongoing need in the art for improved cross-machine direction (CD) mapping control in web making machines that can overcome changes in the mapping relationships between CD actuators and the corresponding CD profile of the web that they control. The control arrangement would correct the mappings without interruption of the CD control system and preferably would also control the smoothness of the setpoints of the actuator array instead of or in addition to corrections of the mappings.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0013" num="0012">This need is currently met by the invention of the present application wherein a web making machine is monitored to identify at least one cross-machine direction (CD) actuator that is developing local mapping problems. The identified CD actuator and a segment of surrounding actuators are probed to determine a performance curve for the actuator. The performance curve is used to select an optimal mapping alignment setting for the identified actuator with the setting for the actuator being updated. Global smoothing may also be accomplished by probing a global smoothness factor to generate a corresponding performance curve that is then used to select an optimal value for the smoothness factor.</p>
<p id="p-0014" num="0013">In accordance with one aspect of the present invention, a method for controlling cross-machine direction (CD) mapping in a web making machine comprises monitoring a web being produced by the web making machine and generating at least two web analysis profiles from data representative of the web. A first one of the at least two web analysis profiles is combined with a second one of the at least two web analysis profiles and the combination is used to identify a developing CD mapping problem. At least one CD actuator corresponding to the identified developing CD mapping problem is probed and an optimal performance point for the at least one CD actuator is determined from results of the probing. The CD mapping for the at least one CD actuator is adjusted in accordance with the optimal performance point.</p>
<p id="p-0015" num="0014">Probing the at least one CD actuator corresponding to the identified developing CD mapping problem may comprise stepping mapping alignment for the at least one CD actuator being probed with mapping alignment steps beginning at an initial value. The web is monitored at each of the mapping alignment steps and a performance measure and tolerance limit is determined for the at least one CD actuator being probed for the current mapping alignment step. A stepping threshold is determined for the at least one CD actuator being probed based on data collected during all preceding mapping alignment steps.</p>
<p id="p-0016" num="0015">Mapping alignment stepping is initially performed in a first direction and the probing may further comprise comparing the performance measure for the current mapping alignment step and the stepping threshold and stopping mapping alignment stepping in the first direction upon the performance measure exceeding the stepping threshold. The probing may further comprise setting a hard limit to the number of mapping alignment steps in the first direction and stopping mapping alignment stepping if the hard limit is met.</p>
<p id="p-0017" num="0016">Probing may further comprise comparing the performance measure for the mapping alignment step at the initial value after mapping alignment stepping has terminated in the first direction and the stepping threshold and stopping further stepping if the performance measure for the mapping alignment step at the initial value exceeds the stepping threshold. If the performance measure for the mapping alignment step at the initial value does not exceed the stepping threshold, probing is performed in a second direction opposite to the first direction by stepping mapping alignment for the at least one CD actuator being probed with mapping alignment steps beginning at the initial value and proceeding in the second direction. The web is monitored at each of the mapping alignment steps in the second direction and a performance measure and tolerance limit is determined for the at least one CD actuator being probed for the current mapping alignment step in the second direction. A stepping threshold is determined for the at least one CD actuator being probed in the second direction based on data collected during all preceding mapping alignment steps in the second direction.</p>
<p id="p-0018" num="0017">Probing in the second direction may further comprise comparing the performance measure for the current mapping alignment step for probing in the second direction and the stepping threshold for the at least one CD actuator being probed in the second direction and stopping mapping alignment stepping in the second direction upon the performance measure exceeding the stepping threshold for the at least one CD actuator being probed in the second direction. The probing may further comprise setting a hard limit to the number of mapping alignment steps in the second direction and stopping mapping alignment stepping in the second direction if the hard limit is met. The hard limit to the number of mapping alignment steps in the first direction may be equal to the hard limit to the number of mapping alignment steps in the second direction.</p>
<p id="p-0019" num="0018">Generating at least two web analysis profiles may comprise generating a spatial analysis profile by defining a window corresponding to a number of data points generated by a sensor. The center of the window is aligned with each of a plurality of CD actuators in the web making machine to select sensor data local to the actuators and the sensor data within windows corresponding to the CD actuators is statistically processed to statistically map local data corresponding to the CD actuators into the spatial analysis profile. The statistical processing may comprise taking the variance of local data within the windows or taking the second order difference of local data within the windows.</p>
<p id="p-0020" num="0019">The first one of the at least two web analysis profiles may be a spatial analysis profile and the second one of the at least two web analysis profiles may be a temporal analysis profile. The spatial analysis profile may be a spatial variance profile or a spatial second order difference profile. The first and second ones of the at least two web analysis profiles may be spatial analysis profiles with at least one of the first and second ones of the at least two web analysis profiles being a spatial variance profile and at least one of the first and second ones of the at least two web analysis profiles being a spatial second order difference profile. The first and second ones of the at least two web analysis profiles may be temporal profiles.</p>
<p id="p-0021" num="0020">The method for controlling cross-machine direction (CD) mapping may further comprise generating a performance curve for the at least one CD actuator and the determination of an optimal performance point for the at least one CD actuator may comprise determining an insensitivity region of the performance curve; and defining the optimal performance point for the at least one CD actuator to be approximately the center of the insensitivity region of the performance curve.</p>
<p id="p-0022" num="0021">In accordance with another aspect of the present invention, a method for controlling cross-machine direction (CD) mapping in a web making machine comprises monitoring CD actuators extending across the web making machine and generating at least two actuator analysis profiles from data representative of the CD actuators. A first one of the at least two actuator analysis profiles is combined with a second one of the at least two actuator analysis profiles to identify a developing CD mapping problem. At least one CD actuator corresponding to the identified developing CD mapping problem is probed and an optimal performance point is determined for the at least one CD actuator from probing results. The CD mapping for the at least one CD actuator is adjusted in accordance with the optimal performance point.</p>
<p id="p-0023" num="0022">The first one of the at least two actuator analysis profiles may be a temporal analysis profile and the second one of the at least two actuator analysis profiles may be a spatial analysis profile. The spatial analysis profile may be a spatial variance profile or a spatial second order difference profile.</p>
<p id="p-0024" num="0023">In accordance with yet another aspect of the present invention, a method for controlling cross-machine direction (CD) mapping in a web making machine comprises monitoring a web being produced by the web making machine and monitoring CD actuators extending across the web. At least two analysis profiles are generated from data representative of the web and data representative of the CD actuators. A first one of the at least two analysis profiles is combined with a second one of the at least two analysis profiles and a developing CD mapping problem from the combination. At least one CD actuator corresponding to the identified developing CD mapping problem is identified and an optimal performance point for the at least one CD actuator is determined from results of probing the at least one CD actuator. The CD mapping for the at least one CD actuator is adjusted in accordance with the optimal performance point. The first and second ones of the at least two analysis profiles may be generated from data representative of the web, from data representative of the CD actuators or the first one of the at least two analysis profiles may be generated from data representative of the web and the second one of the at least two analysis profiles may be generated from data representative of the CD actuators.</p>
<p id="p-0025" num="0024">In accordance with still another aspect of the present invention, a method for controlling cross-machine direction (CD) mapping in a web making machine comprises monitoring a web making machine and identifying a developing CD mapping problem from data generated by the monitoring. At least one CD actuator corresponding to the developing CD mapping problem is identified and a performance curve is generated for the at least one CD actuator. An insensitivity region of the performance curve is identified and an optimal performance point is identified for the at least one CD actuator to be approximately the center of the insensitivity region of the performance curve.</p>
<p id="p-0026" num="0025">The step of generating a performance curve may comprise probing the at least one CD actuator by stepping mapping alignment for the at least one CD actuator in a first direction with mapping alignment steps beginning at an initial value. A web being produced by the web making machine is monitored at each of the mapping alignment steps. A performance measure and tolerance limit is determined for the at least one CD actuator being probed for the current mapping alignment step. A stepping threshold is determined for the at least one CD actuator being probed based on data collected during all preceding mapping alignment steps with the performance measure for the current mapping alignment step being compared to the stepping threshold. Mapping alignment stepping in the first direction is stopped upon the performance measure exceeding the stepping threshold or a hard limit on the number of mapping alignment steps to be performed. The performance measure for the mapping alignment step at the initial value after mapping alignment stepping has terminated in the first direction is compared with the stepping threshold. Further stepping is stopped if the performance measure for the mapping alignment step at the initial value exceeds the stepping threshold. If the performance measure for the mapping alignment step at the initial value does not exceed the stepping threshold determined during probing in the first direction, probing in a second direction opposite to the first direction is performed by stepping mapping alignment for the at least one CD actuator with mapping alignment steps beginning at the initial value and proceeding in the second direction. The web is monitored at each of the mapping alignment steps in the second direction. A performance measure and tolerance limit for the at least one CD actuator being probed is determined for the current mapping alignment step in the second direction. A stepping threshold for the at least one CD actuator being probed in the second direction is determined based on data collected during all preceding mapping alignment steps in the second direction. The performance measure for the current mapping alignment step for probing in the second direction is compared with the stepping threshold for the at least one CD actuator being probed in the second direction. Mapping alignment stepping in the second direction is stopped upon the performance measure exceeding the stepping threshold for the at least one CD actuator being probed in the second direction or a hard limit on the number of mapping alignment steps to be performed.</p>
<p id="p-0027" num="0026">In accordance with an additional aspect of the present invention, a method for controlling cross-machine direction (CD) mapping in a web making machine comprises monitoring a web making machine and generating at least two web analysis profiles from data representative of the web making machine. First and second ones of the at least two web analysis profiles are combined to identify a developing CD mapping problem. At least one CD actuator corresponding to the identified developing CD mapping problem is probed and an optimal performance point for the at least one CD actuator is determined from results of probing the at least one CD actuator. CD mapping for the at least one CD actuator is adjusted in accordance with the optimal performance point.</p>
<p id="p-0028" num="0027">The step of monitoring a web making machine may comprise monitoring a web being produced by the web making machine, monitoring CD actuators extending across the web making machine or monitoring a web being produced by the web making machine; and monitoring CD actuators extending across the web making machine.</p>
<p id="p-0029" num="0028">In accordance with a further aspect of the present invention, apparatus for controlling cross-machine direction (CD) mapping in a web making machine comprises a sensor for monitoring the web making machine and a controller programmed to perform the operations of: monitoring a web making machine; generating at least two web analysis profiles from data representative of the web making machine; combining a first one of the at least two web analysis profiles with a second one of the at least two web analysis profiles; identifying a developing CD mapping problem from the combination; probing at least one CD actuator corresponding to the identified developing CD mapping problem; determining an optimal performance point for the at least one CD actuator from results of probing the at least one CD actuator; and adjusting CD mapping for the at least one CD actuator in accordance with the optimal performance point.</p>
<p id="p-0030" num="0029">The controller may perform the operation of monitoring a web being produced by the web making machine, the operation of monitoring CD actuators extending across the web making machine or the operations of monitoring a web being produced by the web making machine and monitoring CD actuators extending across the web making machine.</p>
<p id="p-0031" num="0030">In accordance with yet still another aspect of the present invention, a method for controlling smoothness of setpoint settings of cross-machine direction (CD) actuators in a web making machine may comprise monitoring a web being produced by the web making machine and probing a global smoothing factor. A performance curve is generated for the global smoothing factor from the probing results. An optimal performance value is determined for the smoothing factor from the performance curve and the global smoothing factor is set to the optimal value. Probing a global smoothing factor may comprise stepping the global smoothing factor with steps beginning at an initial value. The web is monitored at each of the global smoothing factor steps and a performance measure and tolerance limit are determined for said global smoothing factor for the current smoothing factor step. A minimum performance measure and minimum tolerance limit for the global smoothing factor is determined based on data collected during a series of preceding mapping alignment steps.</p>
<p id="p-0032" num="0031">Other features and advantages of the invention will be apparent from the following description, the accompanying drawings and the appended claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 1</figref> shows an example of CD mapping between CD actuators and their corresponding regions of influence in a CD profile;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 2</figref> is a perspective view of a paper-making machine operable in accordance with the invention of the present application;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 3</figref> is a graphical representation of mapping misalignment;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 4</figref> shows the history of a mapped CD error profile represented by a matrix;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a counting method employed for calculation of a persistence profile;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 6</figref> illustrates an example of evaluation of two persistence profiles in accordance with rules of the present application;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 7</figref> illustrates a performance curve for a CD actuator produced using probing techniques of the present application;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing the closed-loop optimization of the present application;</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 9</figref> graphically illustrates probing techniques of the present application;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 10A</figref> illustrates local variability results for six scans at a given mapping alignment setting (epsilon value) being probed and a performance measure for the local variability;</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 10B</figref> illustrates an example of a stepping threshold that is used for stopping a mapping probe operation after probing at a second epsilon value setting.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 11</figref> illustrates termination of a probing search in a first or initial direction due to the performance measure exceeding the stepping threshold with no probing in the second direction;</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 12</figref> illustrates termination of a probing search in a first or initial direction due to reaching a user set hard limit or number of mapping alignment steps with no probing in the second direction;</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 13</figref> illustrates actuator probing that goes from one side of the performance curve to the other side of the performance curve, i.e., probing in both the first and second directions, with probing being stopped by exceeding the stepping threshold;</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 14</figref> illustrates that probing and monitoring routines of the present application continue to work together after initial probing has begun so that new probing areas are received and processed while probing is taking place; and</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIGS. 15 and 16</figref> illustrate two pass optimization in accordance with the present application.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0049" num="0048">The invention of the present application will now be described with reference to the drawings wherein <figref idref="DRAWINGS">FIG. 2</figref> schematically illustrates a paper making machine <b>108</b> having a Fourdrinier wire section <b>110</b>, a press section <b>112</b>, a dryer section <b>114</b> having its midsection broken away to indicate that other web processing equipment, such as a sizing section, additional dryer sections and other equipment, well known to those skilled in the art, may be included within the machine <b>108</b>.</p>
<p id="p-0050" num="0049">The Fourdrinier wire section <b>110</b> comprises an endless wire belt <b>116</b> wound around a drive roller <b>118</b> and a plurality of guide rollers <b>120</b> properly arranged relative to the drive roller <b>118</b>. The drive roller <b>118</b> is driven for rotation by an appropriate drive mechanism (not shown) so that the upper side of the endless wire belt <b>116</b> moves in the direction of the arrow labeled MD that indicates the machine direction for the process. A headbox <b>122</b> receives pulp slurry, i.e. paper stock, that is discharged through a slice lip <b>124</b>, controlled using a plurality of CD actuators <b>126</b>, slice screws as illustrated in <figref idref="DRAWINGS">FIG. 2</figref> although dilution valves can also be used, onto the upper side of the endless wire belt <b>116</b>. The pulp slurry is drained of water on the endless wire belt <b>116</b> to form a web <b>128</b> of paper. The water drained from the pulp slurry to form the web <b>128</b> is called white-water that contains pulp in a low concentration and is collected under the Fourdrinier wire section <b>110</b> and recirculated in the machine <b>108</b> in a well known manner.</p>
<p id="p-0051" num="0050">The web <b>128</b> so formed is further drained of water in the press section <b>112</b> and is delivered to the dryer section <b>114</b>. The dryer section <b>114</b> comprises a plurality of steam-heated drums <b>130</b>. The web <b>128</b> may be processed by other well known equipment located in the MD along the process and is ultimately taken up by a web roll <b>130</b>. Equipment for sensing characteristics of the web <b>128</b>, illustrated as a scanning sensor <b>132</b> in <figref idref="DRAWINGS">FIG. 2</figref>, is located substantially adjacent to the web roll <b>130</b>. It is noted that other forms of sensing equipment can be used in the invention of the present application including stationary sensing equipment for measuring part or the entire web <b>128</b> and that sensing equipment can be positioned at other locations along the web <b>128</b>.</p>
<p id="p-0052" num="0051">As previously mentioned, misalignment of the CD mapping in the machine <b>108</b> can lead to deterioration in CD control performance resulting, for example, in sinusoidal patterns often referred to as &#x201c;picket fence&#x201d; patterns or &#x201c;pickets.&#x201d; Also, a sinusoidal pattern in the MD lanes in combination with the &#x201c;picket fence&#x201d; patterns can result in patterns often referred to in the art as &#x201c;walking patterns&#x201d;. The invention of the present application overcomes CD mapping misalignment by recognizing individual local mapping misalignment problems as they occur, determining improved local CD control settings for each local mapping misalignment after it is detected and applying the improved CD control settings to fine tune a CD controller and thereby improve upon or correct the misalignment so that the CD controller will have improved and consistent long-term performance. The invention of the present application can also control the smoothness of the setpoints of the CD actuators instead of or in addition to corrections of the mappings. The CD control of the present application is preferably included within a controller <b>134</b> for the paper-making machine <b>108</b>, although it can be included within a separate controller (not shown) coupled to the controller <b>134</b>.</p>
<p id="p-0053" num="0052">The control arrangement of the present application comprises the operations of profile monitoring, profile probing and profile correction. Profile monitoring uses pattern recognition to identify local profile actuator misalignment areas quickly. Once mapping misalignment areas have been identified, the areas are probed by adjusting CD control parameters to generate a profile performance curve. Once the profile performance curve is generated, the CD control parameters are updated to reflect the performance curve's optimal point.</p>
<p id="p-0054" num="0053">Mapping misalignment arises whenever the CD controller no longer has accurate information about CD mapping or actuator to profile alignment. An example is shown in <figref idref="DRAWINGS">FIG. 3</figref> where the actuators and the profile have a one to one relationship. That is, when one actuator is moved, only one area of the profile having the width of the actuator is affected. In this example, three control actions are shown. The top images show the actuator positions, and the bottom images show the CD measurement of the sheet. The dotted lines represent the CD mapping for actuator and sensor profile alignment in the CD controller. The solid black diagonal lines represent actual actuator and sensor alignment.</p>
<p id="p-0055" num="0054">In section A of <figref idref="DRAWINGS">FIG. 3</figref>, <b>136</b>B shows the measurement when control is first turned on. The CD controller recognizes this error and makes a correction. The problem is that the CD controller adjusts an actuator to solve a profile problem, but the actuator change actually causes a problem in the next zone due to the misalignment. Since the mapping is off across all actuators shown, the mapping problem causes a &#x201c;walking&#x201d; pattern to appear. By the third control action <b>138</b>B, the original error is still present, and now three more errors that were not present at the start have been introduced due to the CD mapping misalignment.</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 3</figref> illustrates only one example of a mapping mismatch. Of course other profile problems having differing degrees of severity can arise depending on the initial error and the type of actuator response that is applied by the CD controller. It is also noted that the mismatch of <figref idref="DRAWINGS">FIG. 3</figref> presumes a global mapping problem wherein all the actuators are mismatched, which is the worst case. This is often not the case. Rather, in most cases, the mapping alignment problem is local and limited to only the locally affected areas.</p>
<p id="p-0057" num="0056">The human eye can detect areas of the web where local mapping misalignments are present. Unfortunately, the web cannot be visually observed all the time and visual detection of misalignment problems is possible only after misalignment problems have persisted for a significant period of time. In addition to the web itself, the actuator profile, i.e., the actuator settings, corresponding to web production provides additional information regarding CD mapping misalignment.</p>
<p id="p-0058" num="0057">Depending on the process gain relationship between the CD profile and the CD actuators, a mapping misalignment, such as a walking pattern, can be more easily seen in the sensor profile or in the actuator profile. If the process gain is large, then small actuator changes result in large process changes. In that event, the sensor profile shows mapping misalignment sooner than the actuator profile. On the other hand, if the process gain is small, then the actuator profile shows mapping misalignment sooner than the sensor profile. As a result, looking at only one without the other can result in delays in mapping misalignment identification.</p>
<p id="p-0059" num="0058">Since the web cannot be visually observed all the time and visual observation detects mapping misalignments problems only after the problems have been present for some time, continuous mathematical analysis is provided by the mapping control of the present application to substitute for the eye. Indeed, this analysis improves upon the sensing abilities of the eye by detecting alignment mismatch problems sooner than could be detected by the eye and correcting the problems oftentimes before the eye can even detect that a problem is present.</p>
<p id="p-0060" num="0059">Monitoring aspects of the mapping control of the present application include the step of analysis, the step of evaluating persistence of the analysis results, and the step of applying rules to combine the persistence evaluations to identify CD actuators with developing CD mapping problems. Monitoring is performed continuously to identify CD actuators that are aligned with an area of the web that has a mapping problem. After a CD actuator having a mapping problem has been identified and probing starts on that CD actuator, a segment of CD actuator positions surrounding the identified CD actuator being probed is removed from the scope of the CD picking aspect of monitoring, i.e., cannot be picked for probing. The other remaining CD actuators continue to be evaluated and, if any of the other actuators show up as having mapping problem during the on-going probing operations, they are added as new probing actuators. The monitoring continues until all CD actuators are removed from the scope of the picking aspect of monitoring. After probing has been completed on the current set of picked CD actuators, the monitoring process is reset so that monitoring operations may once again be performed on the entire web.</p>
<p id="p-0061" num="0060">In the analysis step, analysis profiles are formulated from CD control information having high correlation to CD mapping problems. In the present application, the high-resolution CD error profile and the CD actuator setpoints are examples of CD control information that have high correlation to CD mapping problems.</p>
<p id="p-0062" num="0061">The high-resolution CD error profile is a column vector representing deviations of the full-width CD sensor profile from a full-width CD target profile. The high-resolution error profile can be defined by the equation
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>e</i>(<i>x,z</i>)=<i>p</i>(<i>x,z</i>)&#x2212;<i>p</i><sub>r</sub>(<i>x,z</i>)&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0062">x=m-element vector of contiguous CD position for the full-width web or sheet of paper. The elements of x are often referred to as the CD profile databox numbers (or simply CD databoxes) or lane numbers.</li>
        <li id="ul0002-0002" num="0063">z=current data sample.</li>
        <li id="ul0002-0003" num="0064">e(x,z)=column vector representing the full-width, high-resolution CD error profile.</li>
        <li id="ul0002-0004" num="0065">e(x<sub>i</sub>,z)=element of e(x,z) representing error in the sheet property at CD databox x<sub>i</sub>.</li>
        <li id="ul0002-0005" num="0066">p(x,z)=column vector representing the full-width, high-resolution CD sensor profile.</li>
        <li id="ul0002-0006" num="0067">p(x<sub>i</sub>,z)=element of p(x,z) representing the sheet property at CD databox x<sub>i</sub>.</li>
        <li id="ul0002-0007" num="0068">p<sub>r</sub>(x,z)=column vector representing the full-width, high-resolution CD target profile.</li>
        <li id="ul0002-0008" num="0069">p<sub>r</sub>(x<sub>i</sub>,z)=element of p<sub>r</sub>(x,z) representing the target value at CD databox x<sub>i</sub>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0063" num="0070">The high-resolution CD error profile, e(x,z), and high-resolution CD sensor profile, p(x,z), are updated periodically. For a scanning measurement system, this update occurs when the sensor housed in the scanning measurement system reaches the edge of the web or sheet. The high-resolution CD target profile, p<sub>r</sub>(x,z), updates when a user changes the target profile.</p>
<p id="p-0064" num="0071">From the high-resolution CD error profile, a mapped CD error profile is formulated by aligning the high-resolution CD error profile with the CD actuators. The mapped CD error profile is a column vector with the same number of elements as there are CD actuators. By having the mapped CD error profile at the resolution of the CD actuators, the actuator number corresponding to the profile region with a mapping misalignment can be directly picked by the monitoring operation of the present application. The high-resolution CD error profile is transformed to the mapped CD error profile by the equation
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>e</i><sub>m</sub>(<i>y,z</i>)=<i>M&#xb7;F&#xb7;e</i>(<i>x,z</i>)&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0072">y=n-element vector of contiguous CD actuators. The elements of y are often referred to as the CD actuator zone numbers.</li>
        <li id="ul0004-0002" num="0073">z=current data sample.</li>
        <li id="ul0004-0003" num="0074">e<sub>m</sub>(y,z)=column vector representing the mapped CD error profile.</li>
        <li id="ul0004-0004" num="0075">e(x,z)=column vector representing the full-width, high-resolution CD error profile.</li>
        <li id="ul0004-0005" num="0076">F=an anti-aliasing filter matrix with m-columns and m-rows.</li>
        <li id="ul0004-0006" num="0077">M=mapping matrix for transforming the high-resolution CD error profile to the mapped CD error profile. The mapping matrix has n-rows and m-columns.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0065" num="0078">The filter matrix F serves the purpose of removing high frequency variations in the high-resolution CD error profile before the re-sampling operation of matrix M is performed to produce the mapped CD error profile. If F is a band-diagonal matrix, then the non-zero band-diagonal elements of F define a two-sided low-pass filter window. For those skilled in the art, the non-zero elements in matrix F can be computed from accepted windowing filters such as Hanning, Hemming, and Blackman.</p>
<p id="p-0066" num="0079">The mapping matrix M is non-square. For all rows of the matrix M, if row j contains a single element m<sub>ji </sub>equal to the value one (1) and all other elements in the same row equal to the value zero (0), then the mapping matrix maps the filtered value of the high-resolution CD error profile corresponding to the CD databox x<sub>i </sub>to the CD actuator y<sub>j </sub>of the mapped CD error profile. For all rows of the matrix M, if row j contains a range of contiguous elements centered about element m<sub>ji </sub>having a sum of the range of contiguous elements equal to the value one (1) and all other elements not included in the range of contiguous elements equal to the value zero (0), then the mapping matrix is a two-sided low-pass filter that maps the range of CD databoxes corresponding to the range of contiguous elements centered about element m<sub>ji </sub>in the high-resolution CD error profile to the CD actuator y<sub>j </sub>of the mapped CD error profile.</p>
<p id="p-0067" num="0080">In the analysis step of the monitoring operation, a history of the mapped CD error profile is necessary to establish the presence of a mapping misalignment problem that results in what is often referred to as a &#x201c;walking&#x201d; pattern. For this step in the monitoring operation, the mapped CD error profile is stored in a circular buffer. A circular buffer is a storage method that first shifts data currently stored in the buffer by one register in the direction of historic data before introducing the new data. A history of the mapped CD error profile can be represented by a matrix E<sub>m</sub>(y,z) <b>140</b>, as shown as an example in <figref idref="DRAWINGS">FIG. 4</figref>. As previously defined, the variable y is a vector of contiguous CD actuator numbers. The variable z is an s-element vector of consecutive updates of the mapped CD error profile. The elements of z are often referred to as data samples or updates, such that z<sub>o</sub>, or z, is the current data sample and z<sub>k </sub>is the data sample received k updates prior to z. In the present application, the number of elements s in z is defined by the user to specify the extent of the temporal data to be analyzed. The column e<sub>m</sub>(y,z<sub>k</sub>) <b>142</b>, as shown in <figref idref="DRAWINGS">FIG. 4</figref>, is an element of matrix E<sub>m</sub>(y,z) and is a column vector representing the mapped CD error profile stored k updates prior to the most current update. The row e<sub>m</sub>(y<sub>j</sub>,z) <b>144</b>, as shown in <figref idref="DRAWINGS">FIG. 4</figref>, is also an element of matrix E<sub>m</sub>(y,z) and is a row vector representing the mapped CD error profile value at CD actuator y<sub>j </sub>for all samples of the mapped CD error profiles.</p>
<p id="p-0068" num="0081">The CD actuator profile is a column vector representing the setpoint values for each of the CD actuators. The actuator setpoint values can be represented by a vector u(y,z). The variable y is a vector of contiguous CD actuator numbers. The variable z is the current sample of the actuator setpoints. The element u(y<sub>j</sub>,z), of u(y,z), represents setpoint value for CD actuator y<sub>j</sub>.</p>
<p id="p-0069" num="0082">It is typical for the CD actuator setpoints to update periodically with a periodicity equal to an integer number of the CD error profile updates, with the update period specified by a user. For example, the CD actuator setpoints may be updated after every fifth update of the CD error profile. However, for use in the monitoring operation of the present application, the CD actuator setpoints are sampled at the same frequency as the CD error profile update. This introduces coordination between the CD error profile and the CD actuator setpoints.</p>
<p id="p-0070" num="0083">Similar to analysis performed on the mapped CD error profile, a history of the CD actuator setpoints is needed for the monitoring operation. A history of the mapped CD error profile can be represented by a matrix U(y,z). The variable y is a vector of contiguous CD actuator numbers. The variable z is a vector of consecutive samples of the CD actuator setpoints. The time horizon of z in U(y,z) is the same as that appearing in E<sub>m</sub>(y,z) in order to maintain coordination between the history of the mapped CD error profile and the CD actuator setpoints. The element u(y,z<sub>k</sub>), of matrix U(y,z), is a column vector representing the CD actuator setpoint values stored k updates prior to the most current update. The element u(y<sub>j</sub>,z), of matrix U(y,z), is a row vector representing the CD actuator setpoint values at CD actuator y<sub>j </sub>for all samples of the CD actuator setpoint values.</p>
<p id="p-0071" num="0084">Based on the mapped CD error profile and the CD actuator setpoints, the analysis step includes the execution of statistical operations to formulate analysis profiles that provide insights into spatial (CD profile) and temporal (MD history) characteristics of the mapping misalignment problems. Formulation of the analysis profile can be defined by the generalized equation
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>a</i>(<i>y,W,v</i>)=<i>W&#xb7;v</i>(<i>y</i>)&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0085">v(y)=column vector representing a conditioned input vector.</li>
        <li id="ul0006-0002" num="0086">W=analysis profile transformation matrix.</li>
        <li id="ul0006-0003" num="0087">y=n-element vector of contiguous CD actuators.</li>
        <li id="ul0006-0004" num="0088">a(y,W,v)=analysis profile of input v transformed by matrix W.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0072" num="0089">While certain transformations are described below to derive the analysis profiles considered in the present application, it should be understood that other transformations are possible to provide insights into mapping misalignment problems. While the mapped CD error profile and the CD actuator setpoints are different types of information related to CD control, the previously developed variables e<sub>m</sub>(y,z) and u(y,z), and E<sub>m</sub>(y,z) and U(y,z) are similar in structure. For illustrative purposes, the following development of analysis profiles will be applied to the mapped CD error profile. For those skilled in the art, the same development can be easily extended to the CD actuator setpoints or any other input that can be characterized with the same structure as e<sub>m</sub>(y,z) or u(y,z), and E<sub>m</sub>(y,z) or U(y,z).</p>
<p id="p-0073" num="0090">A spatial variance analysis profile is a column vector represented by a<sub>s</sub>(y,W<sub>s</sub>,v) and is defined as a profile of windowed variance at each CD location of the input profile. The spatial variance analysis profile is derived by convolving an equally-weighted squared mean window with the input vector. In Equation 3, the spatial variance analysis profile is derived by executing the following steps to define the conditioned input vector v(y) and the spatial variance transformation matrix W<sub>s</sub>:
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0091">1. The step of removing the mean value from the input vector e<sub>m</sub>(y,z) and assigning the result to an intermediate column vector q(y,z)</li>
</ul>
</p>
<p id="p-0074" num="0092">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>q</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>y</mi>
                <mo>,</mo>
                <mi>z</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <msub>
                <mi>e</mi>
                <mi>m</mi>
              </msub>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>y</mi>
                  <mo>,</mo>
                  <mi>z</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>-</mo>
            <mrow>
              <mfrac>
                <mn>1</mn>
                <mi>n</mi>
              </mfrac>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>O</mi>
                <mo>&#xb7;</mo>
                <mrow>
                  <msub>
                    <mi>e</mi>
                    <mi>m</mi>
                  </msub>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>y</mi>
                      <mo>,</mo>
                      <mi>z</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mi>O</mi>
          <mo>=</mo>
          <mrow>
            <mo>[</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mi>&#x2026;</mi>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>&#x22ee;</mi>
                </mtd>
                <mtd>
                  <mi>&#x22f0;</mi>
                </mtd>
                <mtd>
                  <mi>&#x22ee;</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mi>&#x2026;</mi>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>]</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>4</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0075" num="0093">where
<ul id="ul0008" list-style="none">
    <li id="ul0008-0001" num="0000">
    <ul id="ul0009" list-style="none">
        <li id="ul0009-0001" num="0094">e<sub>m</sub>(y,z)=column vector representing the input vector (for example, the mapped CD error profile).</li>
        <li id="ul0009-0002" num="0095">n=number of elements in the input vector.</li>
        <li id="ul0009-0003" num="0096">q(y,z)=intermediate column vector with the number of elements equal to the number of elements in the input vector and representing the input vector with its mean removed.</li>
        <li id="ul0009-0004" num="0097">O=square matrix with the number of rows and columns equal to the number of elements in the input vector. All elements o<sub>ij </sub>in matrix O are equal to the value of one (1).</li>
    </ul>
    </li>
    <li id="ul0008-0002" num="0098">2. The step of creating the conditioned input vector v(y), where the element v(y<sub>j</sub>) is equal to the squared value of corresponding element q(y<sub>j</sub>,z) of vector q(y,z).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>v</i>(<i>y</i>)=&#x2514;<i>q</i><sup>2</sup>(<i>y</i><sub>j</sub><i>,z</i>)&#x2518;&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?>
</li>
    <li id="ul0008-0003" num="0099">3. The step of creating the spatial variance transformation matrix W<sub>s </sub>where the element w<sub>ij </sub>is defined by Equation 6. W<sub>s </sub>is a square matrix with the number of rows and columns equal to the number of elements in the input vector. The variable D<sub>sva </sub>is a single-sided weighting length used to define an equally-weighted window. If the single-sided weighting length D<sub>sva </sub>is set too small, there will not be enough data to warrant a statistically valid variance profile. If the single-sided weighting length D<sub>sva </sub>is set too large, then the local spatial problems will be heavily filtered. A good starting value is to set the single-sided weighting length D<sub>sva </sub>to a value such that the length is equal to 5 to 10 actuators.</li>
</ul>
</p>
<p id="p-0076" num="0100">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mrow>
                <msub>
                  <mi>w</mi>
                  <mi>ij</mi>
                </msub>
                <mo>=</mo>
                <mfrac>
                  <mn>1</mn>
                  <mtable>
                    <mtr>
                      <mtd>
                        <mrow>
                          <mrow>
                            <mi>min</mi>
                            <mo>&#x2061;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mi>n</mi>
                                <mo>,</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>+</mo>
                                  <msub>
                                    <mi>D</mi>
                                    <mi>sva</mi>
                                  </msub>
                                </mrow>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>-</mo>
                        </mrow>
                      </mtd>
                    </mtr>
                    <mtr>
                      <mtd>
                        <mrow>
                          <mrow>
                            <mi>max</mi>
                            <mo>&#x2061;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>1</mn>
                                <mo>,</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>-</mo>
                                  <msub>
                                    <mi>D</mi>
                                    <mi>sva</mi>
                                  </msub>
                                </mrow>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>+</mo>
                          <mn>1</mn>
                        </mrow>
                      </mtd>
                    </mtr>
                  </mtable>
                </mfrac>
              </mrow>
              <mo>,</mo>
            </mrow>
          </mtd>
          <mtd>
            <mtable>
              <mtr>
                <mtd>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mrow>
                        <mi>if</mi>
                        <mo>&#x2062;</mo>
                        <mstyle>
                          <mspace width="0.8em" height="0.8ex"/>
                        </mstyle>
                        <mo>&#x2062;</mo>
                        <mrow>
                          <mi>max</mi>
                          <mo>(</mo>
                          <mrow>
                            <mn>1</mn>
                            <mo>,</mo>
                            <mrow>
                              <mi>i</mi>
                              <mo>-</mo>
                              <msub>
                                <mi>D</mi>
                                <mi>sva</mi>
                              </msub>
                            </mrow>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>&#x2264;</mo>
                    </mrow>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mi>j</mi>
                    <mo>&#x2264;</mo>
                    <mrow>
                      <mi>min</mi>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>n</mi>
                          <mo>,</mo>
                          <mrow>
                            <mi>i</mi>
                            <mo>+</mo>
                            <msub>
                              <mi>D</mi>
                              <mi>sva</mi>
                            </msub>
                          </mrow>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mrow>
                <mo>=</mo>
                <mn>0</mn>
              </mrow>
              <mo>,</mo>
            </mrow>
          </mtd>
          <mtd>
            <mi>otherwise</mi>
          </mtd>
        </mtr>
      </mtable>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>6</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<ul id="ul0010" list-style="none">
    <li id="ul0010-0001" num="0101">4. The step of computing the spatial variance analysis profile a<sub>s</sub>(y,W<sub>s</sub>,v).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>a</i><sub>s</sub>(<i>y,W</i><sub>s</sub><i>,v</i>)=<i>W</i><sub>s</sub><i>&#xb7;v</i>(<i>y</i>)&#x2003;&#x2003;(7)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
A spatial second order difference analysis profile is a column vector represented by a<sub>d</sub>(y,W<sub>d</sub>,v) and is defined as a profile of windowed spatial second order difference at each CD location of the input profile. The spatial second order difference analysis profile is derived by convolving a three element window with the input vector. In Equation 3, the spatial second order difference analysis profile is derived by executing the following steps to define the conditioned input vector v(y) and the spatial second order difference transformation matrix W<sub>d</sub>:
</li>
    <li id="ul0010-0002" num="0102">1. The step of setting the conditioned input vector v(y) equal to the input vector e<sub>m</sub>(y,z).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>v</i>(<i>y</i>)=<i>e</i><sub>m</sub>(<i>y,z</i>)&#x2003;&#x2003;(8)<?in-line-formulae description="In-line Formulae" end="tail"?>
</li>
    <li id="ul0010-0003" num="0103">2. The step of creating the spatial second order difference transformation matrix W<sub>d </sub>is defined by Equation 9. W<sub>d </sub>is a band-diagonal square matrix with the number of rows and columns equal to the number of elements in the input vector.</li>
</ul>
</p>
<p id="p-0077" num="0104">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>W</mi>
          <mi>d</mi>
        </msub>
        <mo>=</mo>
        <mrow>
          <mo>[</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
              </mtd>
              <mtd>
                <mn>1</mn>
              </mtd>
              <mtd>
                <mn>0</mn>
              </mtd>
              <mtd>
                <mi>&#x2026;</mi>
              </mtd>
              <mtd>
                <mn>0</mn>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mn>1</mn>
              </mtd>
              <mtd>
                <mrow>
                  <mo>-</mo>
                  <mn>2</mn>
                </mrow>
              </mtd>
              <mtd>
                <mi>&#x22f0;</mi>
              </mtd>
              <mtd>
                <mi>&#x22f0;</mi>
              </mtd>
              <mtd>
                <mi>&#x22ee;</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mn>0</mn>
              </mtd>
              <mtd>
                <mi>&#x22f0;</mi>
              </mtd>
              <mtd>
                <mi>&#x22f0;</mi>
              </mtd>
              <mtd>
                <mi>&#x22f0;</mi>
              </mtd>
              <mtd>
                <mn>0</mn>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mi>&#x22ee;</mi>
              </mtd>
              <mtd>
                <mi>&#x22f0;</mi>
              </mtd>
              <mtd>
                <mi>&#x22f0;</mi>
              </mtd>
              <mtd>
                <mrow>
                  <mo>-</mo>
                  <mn>2</mn>
                </mrow>
              </mtd>
              <mtd>
                <mn>1</mn>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mn>0</mn>
              </mtd>
              <mtd>
                <mi>&#x22ee;</mi>
              </mtd>
              <mtd>
                <mn>0</mn>
              </mtd>
              <mtd>
                <mn>1</mn>
              </mtd>
              <mtd>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mo>]</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>9</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0105">3. The step of computing the spatial variance analysis profile a<sub>d</sub>(y,W<sub>d</sub>,v).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>a</i><sub>d</sub>(<i>y,W</i><sub>d</sub><i>,v</i>)=<i>w</i><sub>d</sub><i>&#xb7;v</i>(<i>y</i>)&#x2003;&#x2003;(10)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
A temporal variance analysis profile is a column vector represented by a<sub>t</sub>(y,W<sub>t</sub>,v) and is defined as a profile of variance at each CD location over the history matrix of the input vector. The temporal variance analysis profile is derived by computing the variance of s-samples at each CD location and assigning the resultant variance value to the element of a<sub>t </sub>corresponding to the CD location. In Equation 3, the temporal variance analysis profile is derived by executing the following steps to define the conditioned input vector v(y) and the transformation matrix W<sub>t</sub>:
</li>
    <li id="ul0011-0002" num="0106">1. The step of removing the mean value from the input vector e<sub>m</sub>(y<sub>j</sub>,z) at CD position y<sub>j</sub>, a row vector element of matrix E<sub>m</sub>(y,z), and assigning the result to an intermediate row vector q(y<sub>j</sub>,z)</li>
</ul>
</p>
<p id="p-0078" num="0107">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>q</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>j</mi>
                </msub>
                <mo>,</mo>
                <mi>z</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <msub>
                <mi>e</mi>
                <mi>m</mi>
              </msub>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <msub>
                    <mi>y</mi>
                    <mi>j</mi>
                  </msub>
                  <mo>,</mo>
                  <mi>z</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>-</mo>
            <mrow>
              <mfrac>
                <mn>1</mn>
                <mi>s</mi>
              </mfrac>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <msub>
                    <mi>e</mi>
                    <mi>m</mi>
                  </msub>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <msub>
                        <mi>y</mi>
                        <mi>j</mi>
                      </msub>
                      <mo>,</mo>
                      <mi>z</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>&#xb7;</mo>
                <mi>O</mi>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mi>O</mi>
          <mo>=</mo>
          <mrow>
            <mo>[</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mi>&#x2026;</mi>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>&#x22ee;</mi>
                </mtd>
                <mtd>
                  <mi>&#x22f0;</mi>
                </mtd>
                <mtd>
                  <mi>&#x22ee;</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mi>&#x2026;</mi>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>]</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>11</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0079" num="0108">where
<ul id="ul0012" list-style="none">
    <li id="ul0012-0001" num="0000">
    <ul id="ul0013" list-style="none">
        <li id="ul0013-0001" num="0109">e<sub>m</sub>(y<sub>j</sub>,z)=row vector representing the sample history of the input vector at CD position y<sub>j </sub>(for example, the mapped CD error profile).</li>
        <li id="ul0013-0002" num="0110">s=number of history elements in the input vector.</li>
        <li id="ul0013-0003" num="0111">q(y<sub>j</sub>,z)=intermediate row vector with the number of elements equal to the number of elements in the input vector e<sub>m</sub>(y<sub>j</sub>,z) and representing the input vector with its mean removed.</li>
        <li id="ul0013-0004" num="0112">O=square matrix with the number of rows and columns equal to the number of elements in the input vector. All elements o<sub>ij </sub>in matrix O are equal to the value of one (1).</li>
    </ul>
    </li>
    <li id="ul0012-0002" num="0113">2. The step of creating the conditioned input vector element v(y<sub>j</sub>), where the element v(y<sub>j</sub>) is equal to the summed, squared value of elements q(z<sub>k</sub>) of vector q(z).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i>(<i>y</i><sub>j</sub>)=<i>q</i>(<i>y</i><sub>j</sub><i>,z</i>)<i>q</i><sup>T</sup>(<i>y</i><sub>j</sub><i>,z</i>)&#x2003;&#x2003;(12)<?in-line-formulae description="In-line Formulae" end="tail"?>
</li>
    <li id="ul0012-0003" num="0114">3. The step of creating the conditioned input vector v(y) by repeatedly performing steps 1 and 2 for all y<sub>j </sub>elements in y.</li>
    <li id="ul0012-0004" num="0115">4. The step of creating the transformation matrix W<sub>t </sub>that is the identity matrix, pre-multiplied by the reciprocal of the number of elements in the input vector v(y). Matrix W<sub>t </sub>is defined by Equation 13. W is a square matrix with the number of rows and columns equal to the number of elements in the input vector.</li>
</ul>
</p>
<p id="p-0080" num="0116">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>W</mi>
          <mi>t</mi>
        </msub>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mi>s</mi>
            </mfrac>
            <mo>&#xb7;</mo>
            <mrow>
              <mo>[</mo>
              <mtable>
                <mtr>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mi>&#x2026;</mi>
                  </mtd>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mi>&#x22f0;</mi>
                  </mtd>
                  <mtd>
                    <mi>&#x22f0;</mi>
                  </mtd>
                  <mtd>
                    <mi>&#x22ee;</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>&#x22ee;</mi>
                  </mtd>
                  <mtd>
                    <mi>&#x22f0;</mi>
                  </mtd>
                  <mtd>
                    <mi>&#x22f0;</mi>
                  </mtd>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mi>&#x2026;</mi>
                  </mtd>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mn>1</mn>
                  </mtd>
                </mtr>
              </mtable>
              <mo>]</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mi>s</mi>
            </mfrac>
            <mo>&#xb7;</mo>
            <mi>I</mi>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>13</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<ul id="ul0014" list-style="none">
    <li id="ul0014-0001" num="0117">5. The step of computing the spatial variance analysis profile a<sub>t</sub>(y,W<sub>d</sub>,v).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>a</i><sub>t</sub>(<i>y,W</i><sub>t</sub><i>,v</i>)=<i>W</i><sub>t</sub><i>&#xb7;v</i>(<i>y</i>)&#x2003;&#x2003;(14)<?in-line-formulae description="In-line Formulae" end="tail"?>
</li>
</ul>
</p>
<p id="p-0081" num="0118">For the temporal variance analysis profile, storing s-elements of the input vector may be limited by the available system memory. For limited memory systems, a recursive form of the temporal variance, employing a forgetting factor, can also be applied to the MD histories on a per lane basis. For one skilled in the art, the equation for the temporal variance analysis profile can be transformed from a matrix form to a summation form as seen in Equation 15.</p>
<p id="p-0082" num="0119">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mrow>
              <msub>
                <mover>
                  <mi>e</mi>
                  <mi>_</mi>
                </mover>
                <mi>m</mi>
              </msub>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>y</mi>
                  <mi>j</mi>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>=</mo>
            <mrow>
              <mfrac>
                <mn>1</mn>
                <mi>s</mi>
              </mfrac>
              <mo>&#x2062;</mo>
              <mrow>
                <munderover>
                  <mo>&#x2211;</mo>
                  <mrow>
                    <mi>k</mi>
                    <mo>=</mo>
                    <mn>0</mn>
                  </mrow>
                  <mrow>
                    <mi>s</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                </munderover>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <mrow>
                  <msub>
                    <mi>e</mi>
                    <mi>m</mi>
                  </msub>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <msub>
                        <mi>y</mi>
                        <mi>j</mi>
                      </msub>
                      <mo>,</mo>
                      <msub>
                        <mi>z</mi>
                        <mi>k</mi>
                      </msub>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
          <mo>]</mo>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <msub>
              <mi>a</mi>
              <mi>t</mi>
            </msub>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>j</mi>
                </msub>
                <mo>,</mo>
                <mi>z</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mi>s</mi>
            </mfrac>
            <mo>&#x2062;</mo>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>=</mo>
                  <mn>0</mn>
                </mrow>
                <mrow>
                  <mi>s</mi>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
              </munderover>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <msup>
                <mrow>
                  <mo>[</mo>
                  <mrow>
                    <mrow>
                      <msub>
                        <mi>e</mi>
                        <mi>m</mi>
                      </msub>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <msub>
                            <mi>y</mi>
                            <mi>j</mi>
                          </msub>
                          <mo>,</mo>
                          <msub>
                            <mi>z</mi>
                            <mi>k</mi>
                          </msub>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <msub>
                        <mover>
                          <mi>e</mi>
                          <mi>_</mi>
                        </mover>
                        <mi>m</mi>
                      </msub>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <msub>
                          <mi>y</mi>
                          <mi>j</mi>
                        </msub>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>]</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>15</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0083" num="0120">where
<ul id="ul0015" list-style="none">
    <li id="ul0015-0001" num="0000">
    <ul id="ul0016" list-style="none">
        <li id="ul0016-0001" num="0121">e<sub>m</sub>(y<sub>j</sub>,z<sub>k</sub>)=scalar representing the mapped CD profile at position y<sub>j </sub>and at time z<sub>k</sub>.</li>
        <li id="ul0016-0002" num="0122">s=number of history elements in the input vector.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0084" num="0123">The addition of a decaying weighting factor to Equation 15 yields a second form which diminishes the contribution of older values in the summation and allows the gradual removal of older information. This new form is shown in Equation 16.</p>
<p id="p-0085" num="0124">
<maths id="MATH-US-00007" num="00007">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>a</mi>
            <mi>t</mi>
          </msub>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <msub>
                <mi>y</mi>
                <mi>j</mi>
              </msub>
              <mo>,</mo>
              <mi>z</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <msub>
              <mi>T</mi>
              <mi>d</mi>
            </msub>
          </mfrac>
          <mo>&#x2062;</mo>
          <mrow>
            <munderover>
              <mo>&#x2211;</mo>
              <mrow>
                <mi>k</mi>
                <mo>=</mo>
                <mn>0</mn>
              </mrow>
              <mrow>
                <mi>s</mi>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
            </munderover>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <mrow>
              <mrow>
                <mi>exp</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mo>-</mo>
                    <mfrac>
                      <mrow>
                        <mi>s</mi>
                        <mo>-</mo>
                        <mi>k</mi>
                      </mrow>
                      <msub>
                        <mi>T</mi>
                        <mi>d</mi>
                      </msub>
                    </mfrac>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>&#xb7;</mo>
              <msup>
                <mrow>
                  <mo>[</mo>
                  <mrow>
                    <mrow>
                      <msub>
                        <mi>e</mi>
                        <mi>m</mi>
                      </msub>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <msub>
                            <mi>y</mi>
                            <mi>j</mi>
                          </msub>
                          <mo>,</mo>
                          <msub>
                            <mi>z</mi>
                            <mi>k</mi>
                          </msub>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>-</mo>
                    <mrow>
                      <msub>
                        <mover>
                          <mi>e</mi>
                          <mi>_</mi>
                        </mover>
                        <mi>m</mi>
                      </msub>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <msub>
                          <mi>y</mi>
                          <mi>j</mi>
                        </msub>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>]</mo>
                </mrow>
                <mn>2</mn>
              </msup>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>16</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0086" num="0125">where
<ul id="ul0017" list-style="none">
    <li id="ul0017-0001" num="0000">
    <ul id="ul0018" list-style="none">
        <li id="ul0018-0001" num="0126">e<sub>m</sub>(y<sub>j</sub>,z<sub>k</sub>)=scalar representing the mapped CD profile at position y<sub>j </sub>and at time z<sub>k</sub>.</li>
        <li id="ul0018-0002" num="0127">s=number of history elements in the input vector.</li>
        <li id="ul0018-0003" num="0128">T<sub>d</sub>=user defined decay value.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0087" num="0129">The advantage equation 16 is that it can be calculated recursively from previous values. This allows for continuous calculation of the temporal variance analysis profile without the need for storage of the s-element memory buffer needed for Equation 15. Using standard recursive techniques known to one skilled in the art, the next value of the sequence defined in Equation 16 is defined in Equation 17.</p>
<p id="p-0088" num="0130">
<maths id="MATH-US-00008" num="00008">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <msub>
              <mover>
                <mi>e</mi>
                <mi>_</mi>
              </mover>
              <mi>m</mi>
            </msub>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>j</mi>
                </msub>
                <mo>,</mo>
                <mi>z</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <mrow>
                <mi>exp</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mo>-</mo>
                    <mfrac>
                      <mn>1</mn>
                      <msub>
                        <mi>T</mi>
                        <mi>d</mi>
                      </msub>
                    </mfrac>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>&#xb7;</mo>
              <mrow>
                <msub>
                  <mover>
                    <mi>e</mi>
                    <mi>_</mi>
                  </mover>
                  <mi>m</mi>
                </msub>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>j</mi>
                    </msub>
                    <mo>,</mo>
                    <msub>
                      <mi>z</mi>
                      <mrow>
                        <mi>k</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mfrac>
                <mn>1</mn>
                <msub>
                  <mi>T</mi>
                  <mi>d</mi>
                </msub>
              </mfrac>
              <mo>&#xb7;</mo>
              <mrow>
                <msub>
                  <mi>e</mi>
                  <mi>m</mi>
                </msub>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>j</mi>
                    </msub>
                    <mo>,</mo>
                    <msub>
                      <mi>z</mi>
                      <mi>k</mi>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <mi>&#x3b2;</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>j</mi>
                </msub>
                <mo>,</mo>
                <msub>
                  <mi>z</mi>
                  <mi>k</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <mrow>
                <mi>exp</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mo>-</mo>
                    <mfrac>
                      <mn>1</mn>
                      <msub>
                        <mi>T</mi>
                        <mi>d</mi>
                      </msub>
                    </mfrac>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>&#xb7;</mo>
              <mrow>
                <mi>&#x3b2;</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>j</mi>
                    </msub>
                    <mo>,</mo>
                    <msub>
                      <mi>z</mi>
                      <mrow>
                        <mi>k</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mfrac>
                <mn>1</mn>
                <msub>
                  <mi>T</mi>
                  <mi>d</mi>
                </msub>
              </mfrac>
              <mo>&#xb7;</mo>
              <mrow>
                <msubsup>
                  <mi>e</mi>
                  <mi>m</mi>
                  <mn>2</mn>
                </msubsup>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>j</mi>
                    </msub>
                    <mo>,</mo>
                    <msub>
                      <mi>z</mi>
                      <mi>k</mi>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <mi>&#x3b3;</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>j</mi>
                </msub>
                <mo>,</mo>
                <msub>
                  <mi>z</mi>
                  <mi>k</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <mrow>
                <mi>exp</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mo>-</mo>
                    <mfrac>
                      <mn>1</mn>
                      <msub>
                        <mi>T</mi>
                        <mi>d</mi>
                      </msub>
                    </mfrac>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>&#xb7;</mo>
              <mrow>
                <mi>&#x3b3;</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>j</mi>
                    </msub>
                    <mo>,</mo>
                    <msub>
                      <mi>z</mi>
                      <mrow>
                        <mi>k</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
            <mo>+</mo>
            <mfrac>
              <mn>1</mn>
              <msub>
                <mi>T</mi>
                <mi>d</mi>
              </msub>
            </mfrac>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <msub>
              <mi>a</mi>
              <mi>t</mi>
            </msub>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <msub>
                  <mi>y</mi>
                  <mi>j</mi>
                </msub>
                <mo>,</mo>
                <msub>
                  <mi>z</mi>
                  <mi>k</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <mi>&#x3b2;</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <msub>
                    <mi>y</mi>
                    <mi>j</mi>
                  </msub>
                  <mo>,</mo>
                  <msub>
                    <mi>z</mi>
                    <mi>k</mi>
                  </msub>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>+</mo>
            <mrow>
              <msup>
                <mrow>
                  <mo>[</mo>
                  <mrow>
                    <msub>
                      <mover>
                        <mi>e</mi>
                        <mi>_</mi>
                      </mover>
                      <mi>m</mi>
                    </msub>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <msub>
                        <mi>y</mi>
                        <mi>j</mi>
                      </msub>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>]</mo>
                </mrow>
                <mn>2</mn>
              </msup>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>[</mo>
                <mrow>
                  <mrow>
                    <mi>&#x3b3;</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <msub>
                          <mi>y</mi>
                          <mi>j</mi>
                        </msub>
                        <mo>,</mo>
                        <msub>
                          <mi>z</mi>
                          <mi>k</mi>
                        </msub>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>-</mo>
                  <mn>2</mn>
                </mrow>
                <mo>]</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>17</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0089" num="0131">where
<ul id="ul0019" list-style="none">
    <li id="ul0019-0001" num="0000">
    <ul id="ul0020" list-style="none">
        <li id="ul0020-0001" num="0132">e<sub>m</sub>(y<sub>j</sub>,z<sub>k</sub>)=scalar representing the mapped CD profile at position y<sub>j </sub>and at time z<sub>k</sub>.</li>
        <li id="ul0020-0002" num="0133">s=number of history elements in the input vector.</li>
        <li id="ul0020-0003" num="0134">T<sub>d</sub>=user defined decay value.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0090" num="0135">This recursion will produce a very close approximation of the actual temporal variance analysis profile without the need for buffering of the s-element history matrix.</p>
<p id="p-0091" num="0136">From the foregoing and the following table:</p>
<p id="p-0092" num="0137">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="56pt" align="left"/>
<colspec colname="2" colwidth="70pt" align="left"/>
<colspec colname="3" colwidth="133pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Input</entry>
<entry>Analysis Applied, W v</entry>
<entry>Output, a(W, v)</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>Mapped CD Error</entry>
<entry>Spatial Variance</entry>
<entry>Spatial Variance Analysis of Mapped CD</entry>
</row>
<row>
<entry>Profile</entry>
<entry/>
<entry>Error Profile</entry>
</row>
<row>
<entry>Mapped CD Error</entry>
<entry>Temporal Variance</entry>
<entry>Temporal Variance Analysis of Mapped</entry>
</row>
<row>
<entry>Profile</entry>
<entry/>
<entry>CD Error Profile</entry>
</row>
<row>
<entry>Spatial Variance</entry>
<entry>Temporal Variance</entry>
<entry>Temporal Variance Analysis of Spatial</entry>
</row>
<row>
<entry>Analysis of</entry>
<entry/>
<entry>Variance Analysis of Mapped CD Error</entry>
</row>
<row>
<entry>Mapped CD Error</entry>
<entry/>
<entry>Profile</entry>
</row>
<row>
<entry>Profile</entry>
</row>
<row>
<entry>Mapped CD Error</entry>
<entry>Spatial Second Order</entry>
<entry>Spatial Second Order Difference Analysis of</entry>
</row>
<row>
<entry>Profile</entry>
<entry>Difference</entry>
<entry>Mapped CD Error Profile</entry>
</row>
<row>
<entry>CD Actuator</entry>
<entry>Temporal Variance</entry>
<entry>Temporal Variance Analysis of CD</entry>
</row>
<row>
<entry>Setpoints</entry>
<entry/>
<entry>Actuator Setpoints</entry>
</row>
<row>
<entry>CD Actuator</entry>
<entry>Spatial Second Order</entry>
<entry>Spatial Second Order Difference Analysis</entry>
</row>
<row>
<entry>Setpoints</entry>
<entry>Difference</entry>
<entry>of CD Actuator Setpoints</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
<br/>
it is apparent that the analysis portion of profile monitoring as illustrated in the present application results in the generation of six analysis profiles: spatial variance analysis of mapped CD error profile, temporal variance analysis of mapped CD error profile, temporal variance analysis of spatial variance analysis of mapped CD error profile, spatial second order difference analysis of mapped CD error profile, temporal variance analysis of CD actuator setpoints, and spatial second order difference analysis of CD actuator setpoints.
</p>
<p id="p-0093" num="0138">A normalized analysis profile &#x3b1;(y,z) is calculated by first removing the mean value of all elements in the analysis profile a(y,W,v) from each element of the analysis profile and then dividing the resulting &#x201c;zero-mean analysis profile&#x201d; by the standard deviation of all elements in the corresponding analysis profile</p>
<p id="p-0094" num="0139">
<maths id="MATH-US-00009" num="00009">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>q</mi>
          <mo>=</mo>
          <mrow>
            <mrow>
              <mi>a</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>y</mi>
                  <mo>,</mo>
                  <mi>W</mi>
                  <mo>,</mo>
                  <mi>v</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>-</mo>
            <mrow>
              <mfrac>
                <mn>1</mn>
                <mi>n</mi>
              </mfrac>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>O</mi>
                <mo>&#xb7;</mo>
                <mrow>
                  <mi>a</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>y</mi>
                      <mo>,</mo>
                      <mi>W</mi>
                      <mo>,</mo>
                      <mi>v</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mi>O</mi>
          <mo>=</mo>
          <mrow>
            <mo>[</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mi>&#x2026;</mi>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mi>&#x22ee;</mi>
                </mtd>
                <mtd>
                  <mi>&#x22f0;</mi>
                </mtd>
                <mtd>
                  <mi>&#x22ee;</mi>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mn>1</mn>
                </mtd>
                <mtd>
                  <mi>&#x2026;</mi>
                </mtd>
                <mtd>
                  <mn>1</mn>
                </mtd>
              </mtr>
            </mtable>
            <mo>]</mo>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <mi>a</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>y</mi>
                <mo>,</mo>
                <mi>z</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <msqrt>
              <mfrac>
                <mi>n</mi>
                <mrow>
                  <msup>
                    <mi>q</mi>
                    <mi>T</mi>
                  </msup>
                  <mo>&#x2062;</mo>
                  <mi>q</mi>
                </mrow>
              </mfrac>
            </msqrt>
            <mo>&#xb7;</mo>
            <mi>q</mi>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>18</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0095" num="0140">where
<ul id="ul0021" list-style="none">
    <li id="ul0021-0001" num="0000">
    <ul id="ul0022" list-style="none">
        <li id="ul0022-0001" num="0141">a(y,W,v)=analysis profile.</li>
        <li id="ul0022-0002" num="0142">n=number of elements in the analysis profile.</li>
        <li id="ul0022-0003" num="0143">q=intermediate column vector with the number of elements equal to the number of elements in the analysis profile.</li>
        <li id="ul0022-0004" num="0144">O=square matrix with the number of rows and columns equal to the number of elements in the analysis profile. All elements o<sub>ij </sub>in matrix O are equal to the value of one (1).</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0096" num="0145">Normalization of the analysis profiles, to generate the normalized analysis profiles, removes concerns of units from the analysis profiles. The values of the normalized analysis profiles represent a factor of the standard deviation of all elements in the analysis profile. For example, a value of two (2) for an element of the normalized analysis profile means that the element is two times the standard deviation of the analysis profile. If an area of the web represented by an element of the normalized analysis profile starts to exceed the persistence threshold (user selected or automatically set), then persistence is considered to exist for that element of the normalized analysis profile.</p>
<p id="p-0097" num="0146">The persistence step, performed after the analysis profiles have been determined, generates a persistence profile c(y,z) for each of the determined analysis profiles. The persistence profile c(y,z) is a vector with the same number of elements as the analysis profile for which it is created. A persistence profile is the result of comparing the elements of a normalized analysis profile to either a user specified or an automatically set persistence threshold L<sub>pt</sub>. A counting method is employed to update the elements of the persistence profile based on the comparison of corresponding elements in the normalized analysis profile to the persistence threshold. The element c(y<sub>j</sub>,z) of the persistence profile c(y,z) represents a persistence count at CD position y<sub>j</sub>.</p>
<p id="p-0098" num="0147">A particular persistence profile c(y,z) is updated based on comparison of the corresponding normalized analysis profile to the persistence threshold L<sub>pt</sub>. The value of element c(y<sub>j</sub>,z) of the persistence profile is incremented by one (1) every time the value at CD position y<sub>j </sub>of the normalized analysis profile is above the persistence threshold. The value of element c(y<sub>j</sub>,z) of the persistence profile is decremented by one (1) every time the value at CD position y<sub>j </sub>of the normalized analysis profile is below the persistence threshold.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>c</i>(<i>y,z</i><sub>k</sub>)=<i>c</i>(<i>y,z</i><sub>k&#x2212;1</sub>)+<i>sgn</i>(&#x3b1;(<i>y,z</i><sub>k</sub>)&#x2212;<i>L</i><sub>pt</sub>)&#x2003;&#x2003;(19)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0099" num="0148"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the counting method employed where four scans of a normalized analysis profile illustrate calculation of a persistence profile. The persistence count of all elements in the persistence profile c(y,z) are limited between zero and an upper limit to prevent &#x201c;wind-up&#x201d; of the persistence count. The upper limit is also set for the persistence count so as to prevent a single element of the persistence profile from triggering selection of a probing CD actuator in a following step, the step of applying the combining rules. As an example, the upper limit was set to be 1.5 times the persistence threshold, in a working embodiment of the present invention. The persistence profiles are tuned by setting the persistence threshold to a factor of the standard deviation of the analysis profiles. For example, a value of two (2) means that the normalized analysis profile has to have a section go above two times the standard deviation of the analysis profile before updating of a persistence profile is started.</p>
<p id="p-0100" num="0149">The step of applying the combining rules, performed after the persistence profiles have been determined, generates a rules profile c<sub>r</sub>(y,z) from two different persistence profiles c(y,z) and is used to pick CD actuators with developing CD mapping problems. The rules profile c<sub>r</sub>(y,z) is a vector with the same number of elements as the persistence profiles c(y,z) for which it is created. A combination of logical and arithmetic operations are employed to update the elements of the rules profile based on a windowed area around corresponding elements in the two different persistence profiles. The rules profile is then compared to a user specified or an automatically set rules threshold L<sub>rt</sub>. Once an element of the rules profile exceeds the rules threshold, a center-of-gravity operation is performed to pick a CD actuator. The picked CD actuator is then probed to find an improved mapping alignment.</p>
<p id="p-0101" num="0150">In the illustrated embodiment, since there are six persistence profiles, one for each of the analysis profiles, a pairing of two different persistence profiles results in the calculation of fifteen (15) possible rules profiles with the user being able to enable or disable the calculation of one or more of the rules profiles. The rules profile(s) is then used to determine what area(s) of the profile has degraded, i.e., where alignment problems are developing across the web. Currently, rules profiles combine two different persistence profiles to reduce the chance for false identifications of alignment problems. It is contemplated that for given applications of the present invention, it will be possible to produce rules profiles from a single persistence profile or any combination (2, 3, etc.) of persistence profiles.</p>
<p id="p-0102" num="0151">Inputs for the calculation of the rules profiles are the persistence profiles. As mentioned above, currently, two different persistence profiles are used to generate each rules profile. For two arbitrarily chosen persistence profiles <b>1</b> and <b>2</b>, a sliding window, with a user specified single-sided width D<sub>rw</sub>, is superimposed on the vector c(y,z) of the two persistence profiles. The sliding window is determined by adding one (1) to twice the value of D<sub>rw </sub>to yield a window that is equal to an odd number of elements in y. The sliding windows, represented by windows A <b>160</b> and B <b>161</b> in <figref idref="DRAWINGS">FIG. 6</figref>, are moved one element of y at a time along the vector c(y,z) of each persistence profiles and aligned over the same y<sub>j </sub>elements of the two persistence profiles. At each CD position y<sub>j</sub>, the maximum values in the persistence profiles within the two aligned windows A and B are determined as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3bb;<sub>1</sub>(<i>y</i><sub>j</sub><i>,z</i><sub>k</sub>)=max{<i>c</i><sub>1</sub>(<i>y</i><sub>j&#x2212;D</sub><sub><sub2>rw</sub2></sub><i>,z</i><sub>k</sub>), . . . , <i>c</i><sub>1</sub>(<i>y</i><sub>j</sub><i>,z</i><sub>k</sub>), . . . , <i>c</i><sub>1</sub>(<i>y</i><sub>j+D</sub><sub><sub2>rw</sub2></sub><i>,z</i><sub>k</sub>)}<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3bb;<sub>2</sub>(<i>y</i><sub>j</sub><i>,z</i><sub>k</sub>)=max{<i>c</i><sub>2</sub>(<i>y</i><sub>j&#x2212;D</sub><sub><sub2>rw</sub2></sub><i>,z</i><sub>k</sub>), . . . , <i>c</i><sub>2</sub>(<i>y</i><sub>j</sub><i>,z</i><sub>k</sub>), . . . , <i>c</i><sub>2</sub>(<i>y</i><sub>j+D</sub><sub><sub2>rw</sub2></sub><i>,z</i><sub>k</sub>)}&#x2003;&#x2003;(20)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
The maximum values for the two windows are added together and the average is taken to result in an entry in the rules profile at the CD location y<sub>j </sub>as illustrated in <figref idref="DRAWINGS">FIG. 6</figref>.
</p>
<p id="p-0103" num="0152">
<maths id="MATH-US-00010" num="00010">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>c</mi>
            <mi>r</mi>
          </msub>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <msub>
                <mi>y</mi>
                <mi>j</mi>
              </msub>
              <mo>,</mo>
              <msub>
                <mi>z</mi>
                <mi>k</mi>
              </msub>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mrow>
              <msub>
                <mi>&#x3bb;</mi>
                <mn>1</mn>
              </msub>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <msub>
                    <mi>y</mi>
                    <mi>j</mi>
                  </msub>
                  <mo>,</mo>
                  <msub>
                    <mi>z</mi>
                    <mi>k</mi>
                  </msub>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>+</mo>
            <mrow>
              <msub>
                <mi>&#x3bb;</mi>
                <mn>2</mn>
              </msub>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <msub>
                    <mi>y</mi>
                    <mi>j</mi>
                  </msub>
                  <mo>,</mo>
                  <msub>
                    <mi>z</mi>
                    <mi>k</mi>
                  </msub>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mn>2</mn>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>21</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0104" num="0153">In <figref idref="DRAWINGS">FIG. 6</figref>, the windows A and B are illustrated as being three actuators wide from a value of one (1) for D<sub>rw</sub>; however, other odd numbers of actuators can be used as the sliding window size. As illustrated, the maximum of the three elements of window A is 4 and the maximum of the three elements of window B is 2 so that the sum of the maximums is 4+2=6. Since two windows are used, the average is 6 divided by 2 or 3 for the entry in the corresponding rules profile entry location that is centered on the windows A, B. The window then slides one actuator position and the next calculation is performed.</p>
<p id="p-0105" num="0154">Inputs for the picking of CD actuators to probe are the rules profiles and the rules threshold L<sub>rt</sub>. The rules threshold determines how long a problem has to be present before a CD actuator is picked for probing actions. If the rules threshold is set too low, false triggers may be generated. If the rules threshold is set too high, the profile may degrade seriously before a trigger is generated. The elements of each of the rules profiles c<sub>r</sub>(y,z) is compared to the rules threshold. Once an element c<sub>r</sub>(y<sub>j</sub>,z) of the rules profile exceeds the rules threshold, a center-of-gravity calculation, over a user specified single-sided window length D<sub>cog </sub>around y<sub>j</sub>, is performed to pick the CD actuator y*(h). As an example, in the current embodiment of the present application, the single-sided window length D<sub>cog </sub>is chosen over the range of 5 to 10 CD actuators. The nearest integer value resulting from the center-of-gravity calculation is the CD actuator y*(h)</p>
<p id="p-0106" num="0155">
<maths id="MATH-US-00011" num="00011">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msup>
            <mi>y</mi>
            <mo>*</mo>
          </msup>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <mi>h</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mi>round</mi>
          <mo>(</mo>
          <mfrac>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>l</mi>
                  <mo>=</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>j</mi>
                    </msub>
                    <mo>-</mo>
                    <msub>
                      <mi>D</mi>
                      <mi>cog</mi>
                    </msub>
                  </mrow>
                </mrow>
                <mrow>
                  <msub>
                    <mi>y</mi>
                    <mi>j</mi>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>D</mi>
                    <mi>cog</mi>
                  </msub>
                </mrow>
              </munderover>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mrow>
                <mo>[</mo>
                <mrow>
                  <msub>
                    <mi>y</mi>
                    <mi>l</mi>
                  </msub>
                  <mo>&#xb7;</mo>
                  <mrow>
                    <msub>
                      <mi>c</mi>
                      <mi>r</mi>
                    </msub>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <msub>
                          <mi>y</mi>
                          <mi>l</mi>
                        </msub>
                        <mo>,</mo>
                        <mi>z</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>]</mo>
              </mrow>
            </mrow>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>l</mi>
                  <mo>=</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>j</mi>
                    </msub>
                    <mo>-</mo>
                    <msub>
                      <mi>D</mi>
                      <mi>cog</mi>
                    </msub>
                  </mrow>
                </mrow>
                <mrow>
                  <msub>
                    <mi>y</mi>
                    <mi>j</mi>
                  </msub>
                  <mo>+</mo>
                  <msub>
                    <mi>D</mi>
                    <mi>cog</mi>
                  </msub>
                </mrow>
              </munderover>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mrow>
                <msub>
                  <mi>c</mi>
                  <mi>r</mi>
                </msub>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>y</mi>
                      <mi>l</mi>
                    </msub>
                    <mo>,</mo>
                    <mi>z</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
          </mfrac>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>22</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0107" num="0156">where
<ul id="ul0023" list-style="none">
    <li id="ul0023-0001" num="0000">
    <ul id="ul0024" list-style="none">
        <li id="ul0024-0001" num="0157">c<sub>r</sub>(y<sub>j</sub>,z)=elements of rules profile that exceeds the rules threshold.</li>
        <li id="ul0024-0002" num="0158">D<sub>cog</sub>=single-sided window length in center-of-gravity calculation.</li>
        <li id="ul0024-0003" num="0159">round( )=function rounding the input to the nearest integer value.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0108" num="0160">The picked CD actuator y*(h) is added to the set Y* and is then probed. The set Y* may have zero elements to h<sub>total </sub>elements, which is a set containing currently picked and all previously picked CD actuators corresponding to a CD profile region with a mapping problem. The variable h is the index of y*. In the illustrated embodiment, h<sub>total </sub>is a growing count of the total number of actuators that have been identified as having a mapping problem.</p>
<p id="p-0109" num="0161">Once a CD actuator has been identified from the rules profiles, that CD actuator and a range of CD actuators, specified by the user as a single-sided window length D<sub>b</sub>, are removed from the scope of the picking aspect of monitoring until such time as the probing process is completed for all actuators y*(h) in the set Y*. As an example, in the illustrated embodiment of the present application, the single-sided window length D<sub>b </sub>is chosen over the range of 5 to 10 CD actuators. CD actuators are removed from the scope of the picking aspect of monitoring by setting the value for the associated elements in all the rules profiles to zero (0). The range of CD actuators removed from the scope of the picking aspect of monitoring are chosen to satisfy
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>1<i>&#x2266;y</i>*(<i>h</i>)&#x2212;(2<i>&#xb7;D</i><sub>b</sub>)&#x2266;<i>y</i><sub>j</sub><i>&#x2266;y</i>*(<i>h</i>)+(2<i>&#xb7;D</i><sub>b</sub>)&#x2266;<i>n</i>&#x2003;&#x2003;(23)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0110" num="0162">As noted, each rule can be enabled or disabled by the user. The rule pairs represent all combinations of the persistence profiles for the analysis profiles and generate as outputs actuator numbers to be probed. The rule pairs considered in the illustrated embodiment are presenting in the following table:</p>
<p id="p-0111" num="0163">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="21pt" align="center"/>
<colspec colname="2" colwidth="112pt" align="left"/>
<colspec colname="3" colwidth="126pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry>Persistence Profile of First Analysis</entry>
<entry>Persistence Profile of Second Analysis</entry>
</row>
<row>
<entry>Rule</entry>
<entry>Profile</entry>
<entry>Profile</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="21pt" align="char" char="."/>
<colspec colname="2" colwidth="112pt" align="left"/>
<colspec colname="3" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry>1</entry>
<entry>Spatial Variance Analysis of Mapped</entry>
<entry>Temporal Variance Analysis of Spatial</entry>
</row>
<row>
<entry/>
<entry>CD Error Profile</entry>
<entry>Variance Analysis of Mapped CD Error</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Profile</entry>
</row>
<row>
<entry>2</entry>
<entry>Spatial Variance Analysis of Mapped</entry>
<entry>Spatial Second Order Difference Analysis</entry>
</row>
<row>
<entry/>
<entry>CD Error Profile</entry>
<entry>of Mapped CD Error Profile</entry>
</row>
<row>
<entry>3</entry>
<entry>Spatial Variance Analysis of Mapped</entry>
<entry>Temporal Variance Analysis of Mapped</entry>
</row>
<row>
<entry/>
<entry>CD Error Profile</entry>
<entry>CD Error Profile</entry>
</row>
<row>
<entry>4</entry>
<entry>Spatial Variance Analysis of Mapped</entry>
<entry>Spatial Second Order Difference Analysis</entry>
</row>
<row>
<entry/>
<entry>CD Error Profile</entry>
<entry>of CD Setpoints</entry>
</row>
<row>
<entry>5</entry>
<entry>Spatial Variance Analysis of Mapped</entry>
<entry>Temporal Variance Analysis of CD</entry>
</row>
<row>
<entry/>
<entry>CD Error Profile</entry>
<entry>Setpoints</entry>
</row>
<row>
<entry>6</entry>
<entry>Temporal Variance of Spatial</entry>
<entry>Spatial Second Order Difference Analysis</entry>
</row>
<row>
<entry/>
<entry>Variance Analysis of Mapped CD</entry>
<entry>of Mapped CD Error Profile</entry>
</row>
<row>
<entry/>
<entry>Error Profile</entry>
</row>
<row>
<entry>7</entry>
<entry>Temporal Variance of Spatial</entry>
<entry>Temporal Variance Analysis of Mapped</entry>
</row>
<row>
<entry/>
<entry>Variance Analysis of Mapped CD</entry>
<entry>CD Error Profile</entry>
</row>
<row>
<entry/>
<entry>Error Profile</entry>
</row>
<row>
<entry>8</entry>
<entry>Temporal Variance of Spatial</entry>
<entry>Spatial Second Order Difference Analysis</entry>
</row>
<row>
<entry/>
<entry>Variance Analysis of Mapped CD</entry>
<entry>of CD Setpoints</entry>
</row>
<row>
<entry/>
<entry>Error Profile</entry>
</row>
<row>
<entry>9</entry>
<entry>Temporal Variance of Spatial</entry>
<entry>Temporal Variance Analysis of CD</entry>
</row>
<row>
<entry/>
<entry>Variance Analysis of Mapped CD</entry>
<entry>Setpoints</entry>
</row>
<row>
<entry/>
<entry>Error Profile</entry>
</row>
<row>
<entry>10</entry>
<entry>Spatial Second Order Difference</entry>
<entry>Temporal Variance Analysis of Mapped</entry>
</row>
<row>
<entry/>
<entry>Analysis of Mapped CD Error Profile</entry>
<entry>CD Error Profile</entry>
</row>
<row>
<entry>11</entry>
<entry>Spatial Second Order Difference</entry>
<entry>Spatial Second Order Difference Analysis</entry>
</row>
<row>
<entry/>
<entry>Analysis of Mapped CD Error Profile</entry>
<entry>of CD Setpoints</entry>
</row>
<row>
<entry>12</entry>
<entry>Spatial Second Order Difference</entry>
<entry>Temporal Variance Analysis of CD</entry>
</row>
<row>
<entry/>
<entry>Analysis of Mapped CD Error Profile</entry>
<entry>Setpoints</entry>
</row>
<row>
<entry>13</entry>
<entry>Temporal Variance Analysis of</entry>
<entry>Spatial Second Order Difference Analysis</entry>
</row>
<row>
<entry/>
<entry>Mapped CD Error Profile</entry>
<entry>of CD Setpoints</entry>
</row>
<row>
<entry>14</entry>
<entry>Temporal Variance Analysis of</entry>
<entry>Temporal Variance Analysis of CD</entry>
</row>
<row>
<entry/>
<entry>Mapped CD Error Profile</entry>
<entry>Setpoints</entry>
</row>
<row>
<entry>15</entry>
<entry>Spatial Second Order Difference</entry>
<entry>Temporal Variance Analysis of CD</entry>
</row>
<row>
<entry/>
<entry>Analysis of CD Setpoints</entry>
<entry>Setpoints</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0112" num="0164">Profile probing will now be described. The basis for optimization of CD performance in a local region of the sensor profile is the performance of the CD control in that local region. If actuator alignment is correct for some arbitrary local region of the sensor profile centered on a particular actuator, in that local region, a well-tuned CD control will exhibit excellent performance and will produce none of the possible patterns associated with mapping misalignment. Local variability in the region will remain relatively stable, with only a few variations due to normal operation of the paper-making machine. If the mapping alignment for the actuator is shifted in a small region about the actuator, while the CD control remains active, the change in mapping alignment will have little or no effect. However, as the mapping alignment gets further from the correct value, local variability begins to increase. A plot of local variability for the region as the mapping alignment is swept through some range centered about the correct alignment results in a generally parabolic shape. An example of the generally parabolic shape <b>180</b> is shown in <figref idref="DRAWINGS">FIG. 7</figref> wherein each black circle represents the nominal local variability in the region.</p>
<p id="p-0113" num="0165">An important feature of <figref idref="DRAWINGS">FIG. 7</figref> is a generally flat region <b>182</b> in the middle of the generally parabolic shape <b>180</b>. The flat region <b>182</b> is due to the effect of a well-designed CD controller that is insensitive to small errors in the actuator alignment. As long as the mapping alignment in the CD controller is close to the correct value, the controller performs well. This CD controller operation creates the generally flat region <b>182</b> that is substantially centered on the optimal alignment location <b>184</b>. The flat region <b>182</b> is a region of CD controller &#x201c;insensitivity.&#x201d; The recognition of the &#x201c;insensitivity&#x201d; region by the inventors of the present application is important because an optimization technique that correctly locates the optimal actuator mapping alignment during optimization will enable the controller to be more robust in the face of changing process conditions.</p>
<p id="p-0114" num="0166">The &#x201c;insensitivity&#x201d; region is also significant due to the impact it has on many traditional optimization techniques that presume a performance curve has a minimum point that defines optimal mapping alignment. Applying this traditional presumption, the optimization parameter is changed until the performance value is no longer decreasing thus having reached its minimum. At this point, the optimization technique stops its operation with the corresponding value being determined to be the correct alignment value. Unfortunately, such a traditional optimization scheme does not work well since it finds the correct mapping alignment to be at a point where the performance curve stops decreasing. However, in the performance curve shown in <figref idref="DRAWINGS">FIG. 7</figref>, this results in an alignment value on the edge of the &#x201c;insensitivity&#x201d; region. Such a mapping alignment result yields satisfactory short-term performance, but is not an optimal solution. Slight change in the local shrinkage can easily move the non-optimal solution into an area where control performance begins to degrade. An optimal solution is at the center of the flat-portion <b>182</b> of the generally parabolic performance curve <b>180</b> where slight changes in actuator alignment due to process operation, such as changing shrinkage values, remains in the &#x201c;insensitivity&#x201d; region and continues to yield excellent control performance.</p>
<p id="p-0115" num="0167">Using the concept of the local performance curve of the present application, the primary goal for optimization of local profile performance is the determination of optimal local mapping alignments. The optimization is performed to capitalize on the flatness of the performance curve in its &#x201c;insensitivity&#x201d; region. The optimization is performed closed-loop with the existing CD controller operating rather than being interrupted. This is important since the optimization routine determines the optimal mapping alignment based upon the closed-loop performance of the CD controller. Closed-loop optimization differs from most traditional techniques for the correction of mapping misalignment since they identify mapping alignment in an open-loop fashion. Unfortunately, the correct open-loop alignment may not be the same as the optimal mapping alignment identified using a closed-loop technique. In addition, open-loop identification techniques require that the CD controller be turned off for some period of time. A great advantage of closed-loop techniques is that control is maintained during the entire optimization period. <figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing the closed-loop optimization of the present application.</p>
<p id="p-0116" num="0168">The first step of profile probing is identification of the local region of CD actuators to be optimized for the newly picked CD actuator y*(h). The analysis steps described above provide an automated technique for determining one or more CD actuators y*(h) to be probed. It is also possible for the user to manually enter one or more CD actuators y*(h) to be probed. Probing operations must take into account that improper mapping alignment is a local phenomenon and that the region of a sheet that undergoes process changes, such as uneven drying and shrinkage, is not limited to the region of influence of a single actuator. Accordingly, a probing operation must account for the mapping alignments in the CD controller for a region rather than for a single actuator. The local region of CD actuators is identified by two extreme CD actuators, with the probed actuator y*(h) centered between the extreme CD actuators. The two extreme CD actuators are selected by a user specified single-sided spacing distance D<sub>p </sub>from the probed actuator y*(h) to yield the lower CD actuator range y<sub>L</sub>*(h) and the upper CD actuator range y<sub>U</sub>*(h), where y<sub>L</sub>*(h) and y<sub>U</sub>*(h) are calculated from equation
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>y*</i><sub>L</sub>(<i>h</i>)=<i>y</i>*(<i>h</i>)&#x2212;(<i>D</i><sub>p</sub>+1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>y*</i><sub>U</sub>(<i>h</i>)=<i>y</i>*(<i>h</i>)+(<i>D</i><sub>p</sub>+1)&#x2003;&#x2003;(24)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0117" num="0169">The extreme CD actuators y<sub>L</sub>*(h) and y<sub>U</sub>*(h) are referred to as &#x201c;pinning&#x201d; actuators. In a working embodiment, the default spacing distance D<sub>p </sub>was set at between 5 and 10 actuators, i.e., if a spacing of 5 is selected, there are five actuators between the probed actuator and its respective pinning actuators.</p>
<p id="p-0118" num="0170">Following the selection of a CD actuator y*(h) to be probed and the CD actuator range defined by actuators y<sub>L</sub>*(h) and y<sub>U</sub>*(h), the next step is identification of the mapping alignments corresponding to CD actuators y*(h), y<sub>L</sub>*(h) and y<sub>U</sub>*(h). The mapping alignments corresponding to CD actuators y*(h), y<sub>L</sub>*(h) and y<sub>U</sub>*(h) are represented by &#x3c7;(y*(h)), &#x3c7;(y<sub>L</sub>*(h)) and &#x3c7;(y<sub>U</sub>*(h)) respectively. The mapping alignment &#x3c7; are the CD databoxes x<sub>i </sub>identified in the mapping matrix M, from Equation 2, corresponding to the CD actuator numbers y*(h), y<sub>L</sub>*(h) and y<sub>U</sub>*(h). The mapping alignment &#x3c7;(y*(h)) is the CD controller parameter that is adjusted during the probing steps for optimizing the local control performance. The mapping alignments &#x3c7;(y<sub>L</sub>*(h)) and &#x3c7;(y<sub>U</sub>*(h)) are CD controller parameters used in the determination of local performance for the probing. The latter two mapping alignments are also used in the local updating of CD actuators surrounding the probed CD actuator y*(h) while this actuator mapping alignment is being adjusted.</p>
<p id="p-0119" num="0171">As illustrated in <figref idref="DRAWINGS">FIG. 9</figref>, the diagonal line <b>190</b> represents the current alignment in the CD controller between the CD actuators y<sub>j </sub>shown on the horizontal axis and the mapping alignment in the measured CD profile on the vertical axis. The open circles along the horizontal axis represent actuators y*(h) <b>192</b>, <b>194</b> to be probed and correspond to regions manually or automatically identified as having developing mapping problems. The squares along the horizontal axis represent pinning actuators <b>196</b>, <b>198</b>, <b>200</b>, <b>202</b> chosen by the user specified single-sided spacing distance D<sub>p </sub>from the probed actuators <b>192</b>, <b>194</b>. Actuators <b>196</b> and <b>198</b> are pinning actuators for probed actuator <b>192</b>, and actuators <b>200</b> and <b>202</b> are pinning actuators for probed actuator <b>194</b>.</p>
<p id="p-0120" num="0172">With the pinning actuators <b>196</b>, <b>198</b> (<b>200</b>, <b>202</b>) defined for the probed actuator <b>192</b> (<b>194</b>), the mapping alignment &#x3c7;(y*(h)) for the probed actuator <b>192</b> (<b>194</b>) is changed to mark out the performance curve <b>180</b> illustrated in <figref idref="DRAWINGS">FIG. 7</figref>. While the mapping alignment for the probed actuator <b>192</b> (<b>194</b>) is changed, the mapping alignment values &#x3c7;(y<sub>L</sub>*(h)) and &#x3c7;(y<sub>U</sub>*(h)) for the pinning actuators <b>196</b>, <b>198</b> (<b>200</b>, <b>202</b>) are held fixed at the values corresponding to the moment when the actuators were selected to be pinning actuators. The mapping alignment values for all actuators between the probed actuator <b>192</b> (<b>194</b>) and pinning actuator <b>196</b> (<b>200</b>) are linearly interpolated between the mapping alignment values corresponding to those two actuators and the mapping alignment values for all actuators between the probed actuator <b>192</b> (<b>194</b>) and pinning actuator <b>198</b> (<b>202</b>) are linearly interpolated between the mapping alignment values corresponding to those two actuators, as illustrated by <b>192</b>A-D (<b>194</b>A-D) in <figref idref="DRAWINGS">FIG. 9</figref>.</p>
<p id="p-0121" num="0173">The probed actuator mapping alignment is changed in discrete steps over a single-sided mapping alignment search range D<sub>sr</sub>. The number of discrete steps is limited to a maximum, single-sided number of discrete steps N<sub>s</sub>. Both the maximum, single-sided number of discrete steps N<sub>s </sub>and the single-sided mapping alignment search range D<sub>sr </sub>are stopping conditions for adjusting the mapping alignment value of the probed actuator. The maximum, single-sided number of discrete steps N<sub>s </sub>and the single-sided mapping alignment search range D<sub>sr </sub>are user specified. The mapping alignment for the probed actuator is changed in directions that both decrease and increase the mapping alignment value relative to the value that corresponds to the moment when the probed actuator was identified by the monitoring aspect of the present application.</p>
<p id="p-0122" num="0174">When the value of the mapping alignment is decreased, the mapping alignment value is not permitted to be less than the mapping alignment value that results in subtracting the mapping alignment search range D<sub>sr </sub>from the mapping alignment value that corresponds to the moment when the probed actuator was identified by the monitoring aspect. When the value of the mapping alignment is increased, the mapping alignment value is not permitted to be greater than the mapping alignment value that results in adding the mapping alignment search range D<sub>sr </sub>to the mapping alignment value that corresponds to the moment when the probed actuator was identified by the monitoring aspect. The number of discrete steps executed in either the decreasing or increasing value change steps is limited to the maximum, single-sided number of discrete steps N<sub>s</sub>. In the illustrated embodiment, a value of 6 to 8 is used for the maximum, single-sided number of discrete steps N<sub>s </sub>and a CD databox number equaling 2 to 3 times the CD actuator mapping alignment span between two consecutive CD actuators is used for the mapping alignment search range D<sub>sr</sub>. The absolute step size of the mapping alignment value on each of the discrete steps is equal to the search range D<sub>sr </sub>divided by the maximum number of discrete steps N<sub>s</sub>.</p>
<p id="p-0123" num="0175">To aid in the description of adjusting the mapping alignment value in a decreasing direction and an increasing direction, the following parameter is introduced:</p>
<p id="p-0124" num="0176">
<maths id="MATH-US-00012" num="00012">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mrow>
                <mi>&#x25b;</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>y</mi>
                        <mo>*</mo>
                      </msup>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>h</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                    <mrow>
                      <mi>&#x3b6;</mi>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>l</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>=</mo>
              <mrow>
                <mrow>
                  <mi>&#x3c7;</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>y</mi>
                          <mo>*</mo>
                        </msup>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>h</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>,</mo>
                      <mi>l</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mi>&#x3c7;</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mrow>
                        <msup>
                          <mi>y</mi>
                          <mo>*</mo>
                        </msup>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>h</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>,</mo>
                      <mn>0</mn>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mrow>
                <mi>&#x3c7;</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>y</mi>
                        <mo>*</mo>
                      </msup>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>h</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                    <mi>l</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>=</mo>
              <mrow>
                <mrow>
                  <mrow>
                    <mi>&#x3c7;</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mrow>
                          <msup>
                            <mi>y</mi>
                            <mo>*</mo>
                          </msup>
                          <mo>&#x2061;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mi>h</mi>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>,</mo>
                        <mn>0</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mi>l</mi>
                    <mo>&#xb7;</mo>
                    <mfrac>
                      <msub>
                        <mi>D</mi>
                        <mi>sr</mi>
                      </msub>
                      <msub>
                        <mi>N</mi>
                        <mi>s</mi>
                      </msub>
                    </mfrac>
                  </mrow>
                  <mo>-</mo>
                  <mrow>
                    <mo>(</mo>
                    <msub>
                      <mi>N</mi>
                      <mi>s</mi>
                    </msub>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>&#x2264;</mo>
                <mi>l</mi>
                <mo>&#x2264;</mo>
                <msub>
                  <mi>N</mi>
                  <mi>s</mi>
                </msub>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>25</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0125" num="0177">where
<ul id="ul0025" list-style="none">
    <li id="ul0025-0001" num="0000">
    <ul id="ul0026" list-style="none">
        <li id="ul0026-0001" num="0178">&#x3c7;(y*(h),0)=mapping alignment value for the probed actuator corresponding to the moment when the probed actuator was picked by the monitoring aspect.</li>
        <li id="ul0026-0002" num="0179">&#x3c7;(y*(h),l)=mapping alignment value for the probed actuator on the l-th step of the probing process and in the direction denoted by the sign of l. A negative l value means that the mapping alignment value is decreasing. A positive l value means that the mapping alignment value is increasing.</li>
        <li id="ul0026-0003" num="0180">D<sub>sr</sub>=mapping alignment search range.</li>
        <li id="ul0026-0004" num="0181">N<sub>s</sub>=maximum number of discrete probing steps to be taken in either the decreasing or increasing direction.</li>
        <li id="ul0026-0005" num="0182">&#x3b6;(l)=stepping count for probing in both increasing and decreasing directions</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0126" num="0183">To further aid in the description of adjusting the mapping alignment value in a decreasing direction and an increasing direction, the notation in Equation 25 will also be written in the following form:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b5;<sub>l</sub>&#x2261;&#x3b5;(<i>y</i>*(<i>h</i>),&#x3b6;(<i>l</i>))&#x2003;&#x2003;(26)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0127" num="0184">At each discrete step in the mapping alignment of the probed CD actuator <b>192</b> (<b>194</b>), the process is allowed to settle and data is collected to represent the local variability of the CD profile segment corresponding to the mapping alignment region spanning between the pinning actuators <b>196</b>, <b>198</b> (<b>200</b>, <b>202</b>) of the probed CD actuator <b>192</b> (<b>194</b>).</p>
<p id="p-0128" num="0185">The location of the mapping alignment for the probed actuator <b>192</b> (<b>194</b>) is moved in a first direction until the edge of the &#x201c;insensitivity&#x201d; region is determined by a rise in the local variability. The location of the mapping alignment is then returned to the location where probing started. The mapping alignment is then moved in discrete steps in a second direction, opposite to the first direction, so that the entire performance curve <b>180</b> for the probed actuator is determined. It is noted that even though the mapping alignment is continually being changed, the mapping alignment is only outside the &#x201c;insensitivity&#x201d; region for a short period of time so that the probing operation has minimal impact upon the process.</p>
<p id="p-0129" num="0186">When the performance curve <b>180</b> has been completely determined, the edges of the &#x201c;insensitivity&#x201d; region are apparent. The optimal mapping alignment for the probed actuator <b>192</b>, <b>194</b> is in the center of the &#x201c;insensitivity&#x201d; region where small changes in the web due, for example, to drying and shrinkage of the sheet will have little impact upon the performance of the CD control.</p>
<p id="p-0130" num="0187">After a CD actuator has been identified for probing, a performance measure corresponding to that CD actuator is defined. The performance measure used in the illustrated embodiment is based on the range of CD profile data boxes between the mapping alignments corresponding to the pinning actuators for the probed actuator, or between mapping alignments &#x3c7;(y<sub>L</sub>*(h)) and &#x3c7;(y<sub>U</sub>*(h)). This range of CD profile data boxes is used to determine the local variability for a specified number of scans Z<sub>sc </sub>at a particular mapping alignment, &#x3b5;<sub>l </sub>setting. The local variability for each of the Z<sub>sc </sub>scans is calculated as follows:</p>
<p id="p-0131" num="0188">
<maths id="MATH-US-00013" num="00013">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mover>
              <mi>e</mi>
              <mi>_</mi>
            </mover>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <msub>
                <mi>z</mi>
                <mi>k</mi>
              </msub>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mrow>
                <msub>
                  <mi>x</mi>
                  <mi>b</mi>
                </msub>
                <mo>-</mo>
                <msub>
                  <mi>x</mi>
                  <mi>a</mi>
                </msub>
                <mo>+</mo>
                <mn>1</mn>
              </mrow>
            </mfrac>
            <mo>&#xb7;</mo>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <msub>
                    <mi>x</mi>
                    <mi>i</mi>
                  </msub>
                  <mo>=</mo>
                  <msub>
                    <mi>x</mi>
                    <mi>a</mi>
                  </msub>
                </mrow>
                <msub>
                  <mi>x</mi>
                  <mi>b</mi>
                </msub>
              </munderover>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>e</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <msub>
                      <mi>x</mi>
                      <mi>i</mi>
                    </msub>
                    <mo>,</mo>
                    <msub>
                      <mi>z</mi>
                      <mi>k</mi>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <mi>&#x3c3;</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <msup>
                    <mi>y</mi>
                    <mo>*</mo>
                  </msup>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>h</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>,</mo>
                <msub>
                  <mi>&#x25b;</mi>
                  <mi>l</mi>
                </msub>
                <mo>,</mo>
                <msub>
                  <mi>z</mi>
                  <mi>k</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <msqrt>
            <mfrac>
              <mrow>
                <munderover>
                  <mo>&#x2211;</mo>
                  <mrow>
                    <msub>
                      <mi>x</mi>
                      <mi>i</mi>
                    </msub>
                    <mo>=</mo>
                    <msub>
                      <mi>x</mi>
                      <mi>a</mi>
                    </msub>
                  </mrow>
                  <msub>
                    <mi>x</mi>
                    <mi>b</mi>
                  </msub>
                </munderover>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <msup>
                  <mrow>
                    <mo>[</mo>
                    <mrow>
                      <mrow>
                        <mi>e</mi>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <msub>
                              <mi>x</mi>
                              <mi>i</mi>
                            </msub>
                            <mo>,</mo>
                            <msub>
                              <mi>z</mi>
                              <mi>k</mi>
                            </msub>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mover>
                          <mi>e</mi>
                          <mi>_</mi>
                        </mover>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <msub>
                            <mi>z</mi>
                            <mi>k</mi>
                          </msub>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>]</mo>
                  </mrow>
                  <mn>2</mn>
                </msup>
              </mrow>
              <mrow>
                <msub>
                  <mi>x</mi>
                  <mi>b</mi>
                </msub>
                <mo>-</mo>
                <msub>
                  <mi>x</mi>
                  <mi>a</mi>
                </msub>
                <mo>+</mo>
                <mn>1</mn>
              </mrow>
            </mfrac>
          </msqrt>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>27</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0132" num="0189">where
<ul id="ul0027" list-style="none">
    <li id="ul0027-0001" num="0000">
    <ul id="ul0028" list-style="none">
        <li id="ul0028-0001" num="0190">e(x<sub>i</sub>,z<sub>k</sub>)=high-resolution CD error profile element at CD position x<sub>i </sub>of profile sample z<sub>k</sub>.</li>
        <li id="ul0028-0002" num="0191">x<sub>a</sub>=&#x3c7;(y<sub>L</sub>*(h)), low bound of CD position x<sub>i</sub>.</li>
        <li id="ul0028-0003" num="0192">x<sub>b</sub>=&#x3c7;(y<sub>U</sub>*(h)), upper bound of CD position x<sub>i</sub>.</li>
        <li id="ul0028-0004" num="0193">&#x113;(z<sub>k</sub>)=mean value of the high-resolution CD error profile element e(x<sub>i</sub>,z<sub>k</sub>) over the CD position range of a and b.</li>
        <li id="ul0028-0005" num="0194">&#x3c3;(y*(h), &#x3b5;<sub>l</sub>,z<sub>k</sub>)=local variability for the high-resolution CD error profile sample z<sub>k</sub>, over a local profile region corresponding to probed actuator y*(h), and for the l-th step of the optimization search of the mapping alignment setting &#x3b5;<sub>l</sub>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0133" num="0195">After the specified number of scans Z<sub>sc </sub>has been collected, a performance measure J(y*(h), &#x3b5;<sub>l</sub>) and a tolerance limit T(y*(h),&#x3b5;<sub>l</sub>) are calculated from all local variability samples &#x3c3;(y*(h), &#x3b5;<sub>l</sub>,z<sub>k</sub>). The performance measure is calculated as the mean value of all local variability samples &#x3c3;(y*(h), &#x3b5;<sub>l</sub>,z<sub>k</sub>) and the tolerance limit is calculated as the variability for all local variability samples &#x3c3;(y*(h), &#x3b5;<sub>l</sub>,z<sub>k</sub>).</p>
<p id="p-0134" num="0196">
<maths id="MATH-US-00014" num="00014">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>J</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <msup>
                    <mi>y</mi>
                    <mo>*</mo>
                  </msup>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>h</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>,</mo>
                <msub>
                  <mi>&#x25b;</mi>
                  <mi>l</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <msub>
                <mi>Z</mi>
                <mi>sc</mi>
              </msub>
            </mfrac>
            <mo>&#xb7;</mo>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>=</mo>
                  <mn>1</mn>
                </mrow>
                <mrow>
                  <mi>k</mi>
                  <mo>=</mo>
                  <msub>
                    <mi>Z</mi>
                    <mi>sc</mi>
                  </msub>
                </mrow>
              </munderover>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>&#x3c3;</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mrow>
                      <msup>
                        <mi>y</mi>
                        <mo>*</mo>
                      </msup>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>h</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                    <msub>
                      <mi>&#x25b;</mi>
                      <mi>l</mi>
                    </msub>
                    <mo>,</mo>
                    <msub>
                      <mi>z</mi>
                      <mi>k</mi>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <mi>T</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mrow>
                  <msup>
                    <mi>y</mi>
                    <mo>*</mo>
                  </msup>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>h</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>,</mo>
                <msub>
                  <mi>&#x25b;</mi>
                  <mi>l</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <msqrt>
            <mfrac>
              <mrow>
                <munderover>
                  <mo>&#x2211;</mo>
                  <mrow>
                    <mi>k</mi>
                    <mo>=</mo>
                    <mn>1</mn>
                  </mrow>
                  <mrow>
                    <mi>k</mi>
                    <mo>=</mo>
                    <msub>
                      <mi>Z</mi>
                      <mi>sc</mi>
                    </msub>
                  </mrow>
                </munderover>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <msup>
                  <mrow>
                    <mo>[</mo>
                    <mrow>
                      <mrow>
                        <mi>&#x3c3;</mi>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <msup>
                                <mi>y</mi>
                                <mo>*</mo>
                              </msup>
                              <mo>&#x2061;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mi>h</mi>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>,</mo>
                            <msub>
                              <mi>&#x25b;</mi>
                              <mi>l</mi>
                            </msub>
                            <mo>,</mo>
                            <msub>
                              <mi>z</mi>
                              <mi>k</mi>
                            </msub>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mrow>
                        <mi>J</mi>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mrow>
                              <msup>
                                <mi>y</mi>
                                <mo>*</mo>
                              </msup>
                              <mo>&#x2061;</mo>
                              <mrow>
                                <mo>(</mo>
                                <mi>h</mi>
                                <mo>)</mo>
                              </mrow>
                            </mrow>
                            <mo>,</mo>
                            <msub>
                              <mi>&#x25b;</mi>
                              <mi>l</mi>
                            </msub>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>]</mo>
                  </mrow>
                  <mn>2</mn>
                </msup>
              </mrow>
              <msub>
                <mi>Z</mi>
                <mi>sc</mi>
              </msub>
            </mfrac>
          </msqrt>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>28</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
The parameter &#x3b5;<sub>l </sub>setting is then changed and the sequence is repeated after the process has settled at the new epsilon setting.
</p>
<p id="p-0135" num="0197">In order to determine when to stop introducing mapping alignment changes into the CD controller in the first direction of probing, a minimum performance measure J<sub>min</sub>(y*(h),&#x3b5;<sub>l+(&#x2212;1)sgn(l)</sub>) and a minimum tolerance limit T<sub>min</sub>(y*(h),&#x3b5;<sub>l+(&#x2212;1)sgn(l)</sub>) are calculated at each stepping change to the epsilon setting. The minimum performance measure and the minimum tolerance limit are combined to generate a stepping threshold T<sub>step</sub>(y*(h),&#x3b5;<sub>l&#x2212;1</sub>)
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>T</i><sub>step</sub>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>l+(&#x2212;1)&#xb7;sgn(l)</sub>)=<i>J</i><sub>min</sub>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>l+(&#x2212;1)&#xb7;sgn(l)</sub>)+<i>T</i><sub>min</sub>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>l+(&#x2212;1)&#xb7;sgn(l)</sub>)&#x2003;&#x2003;(29)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0136" num="0198">When the performance measure for the current mapping setting step &#x3b5;<sub>l </sub>exceeds the stepping threshold
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>J</i>(<i>y*</i>(<i>h</i>),&#x3b5;<sub>l</sub>)&#x3e;<i>T</i><sub>step</sub>(<i>y*</i>(<i>h</i>),&#x3b5;<sub>l+(&#x2212;1)&#xb7;sgn(l)</sub>)&#x2003;&#x2003;(30)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
then no further epsilon changes are made in that direction. This stopping check is not performed against the performance measure corresponding to the mapping setting at the start of the optimization, before the first probing step is applied, because this performance measure represents a benchmark of the current mapping setting. When the stepping direction is changed, determination of the minimum performance measure, the minimum tolerance limit, and the stepping threshold starts over for the second search direction.
</p>
<p id="p-0137" num="0199">The minimum performance measure is determined at each step of the mapping setting to be the minimum value among all performance measures calculated on the preceding steps of the mapping setting for the current probing direction
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>J</i><sub>min</sub>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>l</sub>)=min{<i>J</i>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>0</sub>),<i>J</i>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>1</sub>),<i>J</i>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>2</sub>), . . . , <i>J</i>(<i>y</i>*(<i>h</i>),&#x3b5;<sub>l&#x2212;1</sub>),}&#x2003;&#x2003;(31)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0138" num="0200">where
<ul id="ul0029" list-style="none">
    <li id="ul0029-0001" num="0000">
    <ul id="ul0030" list-style="none">
        <li id="ul0030-0001" num="0201">J(y*(h), &#x3b5;<sub>0</sub>)=performance measure corresponding to the mapping setting at the start of the optimization, before the first probing step is applied.</li>
        <li id="ul0030-0002" num="0202">J(y*(h), &#x3b5;<sub>1</sub>)=performance measure corresponding to the mapping setting after the first probing step is applied.</li>
        <li id="ul0030-0003" num="0203">J(y*(h), &#x3b5;<sub>l&#x2212;1</sub>)=performance measure corresponding to the mapping setting after the (l&#x2212;1)-th probing step is applied.</li>
        <li id="ul0030-0004" num="0204">l=current probing step.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0139" num="0205">The minimum performance measure is not calculated for the starting value of the mapping setting because the starting value represents a benchmark of the current performance. The minimum performance measure calculated on the first step in the current direction is equal to the performance measure calculated for starting value (benchmark) of the mapping setting. The minimum performance measure calculated on the second step in the current direction, where two preceding performance measure values exist, is equal to the minimum value of the two available values. This updating method for determining the minimum performance measure continues until the search in the current direction is terminated.</p>
<p id="p-0140" num="0206">The minimum tolerance limit is determined at each step of the epsilon setting to be the mean value of all tolerance limits calculated on the preceding steps of the mapping setting for the current probing direction and with a user specified gain K<sub>T </sub>applied</p>
<p id="p-0141" num="0207">
<maths id="MATH-US-00015" num="00015">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>T</mi>
            <mi>min</mi>
          </msub>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mrow>
                <msup>
                  <mi>y</mi>
                  <mo>*</mo>
                </msup>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>h</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>,</mo>
              <mi>&#x25b;</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <msub>
              <mi>K</mi>
              <mi>T</mi>
            </msub>
            <mi>l</mi>
          </mfrac>
          <mo>&#xb7;</mo>
          <mrow>
            <munderover>
              <mo>&#x2211;</mo>
              <mrow>
                <mi>s</mi>
                <mo>=</mo>
                <mn>0</mn>
              </mrow>
              <mrow>
                <mi>l</mi>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
            </munderover>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>T</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <msup>
                      <mi>y</mi>
                      <mo>*</mo>
                    </msup>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>h</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                  <msub>
                    <mi>&#x25b;</mi>
                    <mi>s</mi>
                  </msub>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>32</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0142" num="0208">where
<ul id="ul0031" list-style="none">
    <li id="ul0031-0001" num="0000">
    <ul id="ul0032" list-style="none">
        <li id="ul0032-0001" num="0209">T(y*(h), &#x3b5;<sub>0</sub>)=tolerance limit corresponding to the mapping setting at the start of the optimization, before the first probing step is applied.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0143" num="0210">T(y*(h), &#x3b5;<sub>1</sub>)=tolerance limit corresponding to the mapping setting after the first probing step is applied.
<ul id="ul0033" list-style="none">
    <li id="ul0033-0001" num="0000">
    <ul id="ul0034" list-style="none">
        <li id="ul0034-0001" num="0211">T(y*(h), &#x3b5;<sub>l&#x2212;1</sub>)=tolerance limit corresponding to the mapping setting after the (l&#x2212;1)-th probing step is applied.</li>
        <li id="ul0034-0002" num="0212">l=current probing step.</li>
        <li id="ul0034-0003" num="0213">K<sub>T</sub>=gain used to adjust the magnitude of the tolerance limits. If the gain is too small, probing in the current stepping direction may stop too early. If the gain is too large, probing in the current stepping direction may deviate too far from the starting value of the mapping setting. In the illustrated embodiment of the present application, the gain K<sub>T </sub>is set to a value between 2 and 3.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0144" num="0214">The minimum tolerance limit is not calculated for the starting value of the mapping setting because the starting value represents a benchmark of the current performance. The minimum tolerance limit calculated on the first step in the current direction is equal to the tolerance limit calculated for starting value (benchmark) of the mapping setting. The minimum tolerance limit calculated on the second step in the current direction, where two preceding tolerance limits exist, is equal to the mean value of the two available tolerance limit values. This updating method for determining the minimum tolerance limit continues until the search in the current direction is terminated.</p>
<p id="p-0145" num="0215">The local variability for a specified number of scans Z<sub>sc</sub>, six as illustrated, are shown by boxes <b>220</b> in <figref idref="DRAWINGS">FIG. 10A</figref> which also shows the performance measure <b>222</b> and the tolerance limit calculated for the starting mapping alignment setting and the mapping alignment setting after the first step is applied. It is noted, and previously mentioned, that for the first mapping alignment setting step &#x3b5;<sub>1</sub>, only one set of performance measure and tolerance limit are available for the determination of the minimum performance measure and minimum tolerance limit. After the performance curve point has been established for the first mapping alignment setting step, the mapping alignment setting is stepped and the sequence is repeated. Calculation of the second and following minimum performance measure and minimum tolerance limit is based on all the sets of performance measure values and tolerance limit values from the mapping alignment setting steps for the first, second, third, etc. up to the mapping alignment setting step prior to the current mapping alignment setting such that the minimum performance measure and the minimum tolerance limit evolve throughout the probing.</p>
<p id="p-0146" num="0216">The diagram of <figref idref="DRAWINGS">FIG. 10B</figref> shows an example of the threshold for stopping a mapping probe after probing at a second epsilon value setting. It is noted that in <figref idref="DRAWINGS">FIG. 10B</figref>, the mapping alignment settings (epsilons) are being decreased and hence move to the left and the minimum performance measure is equal to the performance measure for the mapping setting &#x3b5;<sub>0 </sub>and that the stepping threshold for stopping the mapping probe is equal to T<sub>step</sub>(y*(h),&#x3b5;<sub>&#x2212;2</sub>) which is the minimum performance measure plus the minimum tolerance limit.</p>
<p id="p-0147" num="0217">Probing continues in the initial direction until the performance measure for the mapping alignment step either exceeds the stepping threshold (which can occur on the first mapping alignment step if the starting point is on an edge of the &#x201c;insensitivity&#x201d; region) or a user specified number of mapping alignment steps or search range has been exceeded. Thus, if the stepping threshold is not violated, there are hard limits, defined by D<sub>sr</sub>, that stop the changes in epsilon during a probing operation. Once probing or searching is stopped in the initial direction, a check is made to determine if there is a need to search in the other direction, i.e., search the other side of the performance curve. If the performance measure corresponding to the starting value of the mapping alignment, before any mapping alignment steps are made, is above the stepping threshold, i.e., minimum performance measure plus the minimum tolerance limit, there is no need to search the other side of the curve. A performance measure corresponding to the starting value of the mapping alignment above the stepping threshold indicates that a well-defined descending edge exists on the other side of the probing starting point on the performance curve. Two illustrative examples are shown in <figref idref="DRAWINGS">FIGS. 11 and 12</figref>. In <figref idref="DRAWINGS">FIG. 11</figref>, the search in the initial direction of decreasing epsilon value is terminated by the performance measure on the last mapping alignment step exceeding the stepping threshold. In <figref idref="DRAWINGS">FIG. 12</figref>, the search in the initial direction of decreasing the epsilon value is terminated by reaching the hard limit or number of mapping alignment steps set by the user. In both <figref idref="DRAWINGS">FIGS. 11 and 12</figref>, the performance measure corresponding to the starting value of the mapping setting is above the stepping threshold, so that no probing is done in the reverse direction or in the direction of increasing the epsilon value.</p>
<p id="p-0148" num="0218">An example of actuator probing that goes from one side of the performance curve to the other side of the performance curve and is stopped by exceeding the stepping threshold as described above is shown in <figref idref="DRAWINGS">FIG. 13</figref>. For actuator probing, a performance measure and tolerance limit is determined from the local variabilities <b>224</b> as benchmarks for the starting point <b>226</b>. Probing is then started in a first direction, to the left as shown in <figref idref="DRAWINGS">FIG. 13</figref> (although initial probing could be to the right to increase the mapping alignment settings), to decrease the mapping alignment settings (epsilon values) with probing being stopped when the performance measure for the epsilon value exceeds the stepping threshold. Since the performance measure of the local variability at the starting epsilon value after probing in the first direction has been stopped is not above the stepping threshold at the conclusion of probing in the first direction, the other side of the performance curve is probed or searched. Probing in the second direction, the right as shown in <figref idref="DRAWINGS">FIG. 13</figref>, to increase the epsilon value, is started afresh by taking a new benchmark for the starting point <b>226</b>. A new benchmark is taken to ensure accurate probing in the second direction. Probing is stopped when the performance measure for the epsilon value exceeds the stepping threshold in the second probing direction. The outermost points <b>227</b>A, <b>227</b>B of the performance curve <b>227</b> are defined by the two stop probing points with the edges of the &#x201c;insensitivity&#x201d; region <b>227</b>C, <b>227</b>D, i.e., optimal range for the probed actuator mapping alignment, being defined by the last performance measure within the stepping threshold or hard limit.</p>
<p id="p-0149" num="0219">Once the performance curve <b>227</b> has been generated, the optimal performance point <b>230</b> is identified as shown in <figref idref="DRAWINGS">FIG. 13</figref> and used as the mapping alignment for the probed actuator. The optimal point <b>230</b> is determined based on the midpoint between the left and right sides <b>227</b>C, <b>227</b>D of the increasing edges of the performance curve <b>227</b>. The sides of the performance curve are defined as the point on the curve where the last performance measure is still within the stepping threshold or hard limit.</p>
<p id="p-0150" num="0220">Normally, mapping misalignment does not result in the profile going bad at just one point across the profile. Rather, several profile points often go bad as a result of mapping misalignment. However, the problem is that the mapping misalignment rarely starts to go bad at different profile points at the same time. As a result, the probing and monitoring routines continue to work together after initial probing has begun and new probing areas that are identified are received by the probing routine from the monitoring routine and processed while probing of previously identified probing areas is taking place. This is illustrated in the <figref idref="DRAWINGS">FIG. 14</figref>.</p>
<p id="p-0151" num="0221">Notice in <figref idref="DRAWINGS">FIG. 14</figref> that problem <b>2</b> starts before problem <b>1</b> has been resolved and problem <b>3</b> starts before problem <b>2</b> has been resolved. Once a problem has been resolved, the corresponding probing area cannot be reintroduced as a mapping problem until an entire probing sequence has been completed. Otherwise, the probing sequence may never stop. A probing sequence is completed after all areas to be probed have been resolved or after there are no further areas of the profile to be monitored, i.e., the blocking operations after probing profile has been blocked to the point that monitoring is not effective.</p>
<p id="p-0152" num="0222">Once a probing operation or optimization has been completed, a second related optimization can be performed. Each time an actuator is introduced into the probing routine, a set of pinning actuators are set based on the user specified pinning window width such that the probed actuator is centered between the pinning actuators. In some instances, it is possible that probing can result in mapping misalignment at the pinning locations of a first optimization pass. As a result, performance can be further improvement by running a second optimization pass using the pinning actuators as the probed actuators in the second pass. Such a second optimization process is illustrated in <figref idref="DRAWINGS">FIGS. 15 and 16</figref>. In <figref idref="DRAWINGS">FIG. 15</figref>, the pinning actuators <b>240</b> in the first pass become the probed actuators <b>240</b>&#x2032; in the second pass. Similarly, the probed actuators <b>242</b> in the first pass become pinning actuators <b>242</b>&#x2032; for the second pass. Since the original pinning actuators <b>240</b> must be surrounded by pinning actuators when they are probed, additional pinning actuators <b>242</b>&#x2033; are selected based on the user specified pinning window width for the probed actuators <b>240</b>&#x2032;.</p>
<p id="p-0153" num="0223">In <figref idref="DRAWINGS">FIG. 15</figref>, the closest adjacent pinning actuators 240 (the two central pinning actuators 240) in the first optimization pass are spaced so that when a second optimization pass is made to probe the pinning actuators 240&#x2032;, the generally centered additional pinning actuators 242&#x2033; permit proper probing. In <figref idref="DRAWINGS">FIG. 16</figref>, this is not the case. In <figref idref="DRAWINGS">FIG. 16</figref>, two outermost pinning actuators 244 in the first pass become probed actuators 244&#x2032; in the second pass with the probed actuators 246 in the first pass become pinning actuators 246&#x2032; for the second pass. Since the original pinning actuators 244&#x2032; must be surrounded by pinning actuators when they are probed, additional pinning actuators 246&#x2033; are selected based on the user specified pinning window width for the probed actuators 246&#x2033; as in <figref idref="DRAWINGS">FIG. 15</figref>. However, the spacing between the central pinning actuators 244 in the first pass is such that they cannot be individually probed. Accordingly, an intermediate actuator 248, centered between the pinning actuators 244 in the first pass, is selected to be probed in the second pass. Pinning actuators 250 for the probed actuator 248 are selected based on the user specified pinning window width. Probing during a second optimization pass is the same as for a first optimization pass as described above except for the selection of the pinning and probed actuators.</p>
<p id="p-0154" num="0224">After either a first optimization pass or an optional second optimization pass, a global smoothing operation also can be performed selectively. That is, the user can select to have a second optimization pass and also whether to perform a smoothing operation after optimization has been performed. The smoothing factor is the upper bound of the second order difference of the actuator setpoints, the same factor that is used in referenced patent application Ser. No. 09/592,921 for global profile performance optimization, now U.S. Pat. No. 6,564,117. For global smoothing, the smaller the smoothing factor, the less second order difference is permitted for a CD actuator. An unbounded smoothing factor can result in over-control of the profile, leading to higher frequency variation in the sensor profile. An over-bounded smoothing factor can restrict an actuator setpoint to the extent that the setpoint vector is flat, resulting in no control actions taken for deviations in the sensor profile.</p>
<p id="p-0155" num="0225">The global smoothing search operates in a manner similar to the local (mapping) optimization. However, the parameter being optimized to improve performance of the CD controller is a single global smoothing factor b(l) instead of a set of CD actuator mapping alignments. In the CD controller that the current application is applied to, the single global smoothing factor is limited to the value range of zero (0) and one (1), where zero corresponds to completely over-bounding the actuator setpoints and one corresponds to completely unbounding the actuator setpoints. Since the global smoothing factor affects the second order difference for all CD actuator setpoints and the CD actuators as a whole affect the full width CD profile, the performance measure for global smoothing search is the variability of the full width CD profile, again the same as in referenced patent application Ser. No. 09/592,921, now U.S. Pat. No. 6,564,117, instead of a local CD profile variability. However, the processes for updating the parameter being optimized, stopping updating of the parameter being optimized and analyzing the resultant curve are identical to those for the mapping optimization.</p>
<p id="p-0156" num="0226">Specific to the global smoothing search, in the step of defining the values corresponding to the lower and upper search range, a lower global smoothing factor (b<sub>ll</sub>) and an upper global smoothing factor (b<sub>el</sub>) are explicitly specified. The explicit declaration of the search ranges allows the global smoothing search to probe more in one direction than the other if the starting value of the global smoothing factor is not centered within the absolute limits of zero (0) and one (1). With the maximum, single-sided number of discrete steps N<sub>s </sub>being the same as in the mapping optimization, explicitly specified search limits results in a two-sided stepping size for updating the global smoothing factor in the decreasing and increasing search directions. The two-sided stepping sizes are determined by</p>
<p id="p-0157" num="0227">
<maths id="MATH-US-00016" num="00016">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <msub>
            <mi>S</mi>
            <mi>dsz</mi>
          </msub>
          <mo>=</mo>
          <mfrac>
            <mrow>
              <mo>&#xf603;</mo>
              <mrow>
                <msub>
                  <mi>b</mi>
                  <mi>ll</mi>
                </msub>
                <mo>-</mo>
                <mrow>
                  <mi>b</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mn>0</mn>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mo>&#xf604;</mo>
            </mrow>
            <msub>
              <mi>N</mi>
              <mi>s</mi>
            </msub>
          </mfrac>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <msub>
            <mi>S</mi>
            <mi>isz</mi>
          </msub>
          <mo>=</mo>
          <mfrac>
            <mrow>
              <mo>&#xf603;</mo>
              <mrow>
                <msub>
                  <mi>b</mi>
                  <mi>ul</mi>
                </msub>
                <mo>-</mo>
                <mrow>
                  <mi>b</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mn>0</mn>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
              <mo>&#xf604;</mo>
            </mrow>
            <msub>
              <mi>N</mi>
              <mi>s</mi>
            </msub>
          </mfrac>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>33</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0158" num="0228">where
<ul id="ul0035" list-style="none">
    <li id="ul0035-0001" num="0000">
    <ul id="ul0036" list-style="none">
        <li id="ul0036-0001" num="0229">S<sub>dsz</sub>=decreasing step size.</li>
        <li id="ul0036-0002" num="0230">S<sub>isz</sub>=increasing step size.</li>
        <li id="ul0036-0003" num="0231">N<sub>s</sub>=maximum, single-sided number of discrete steps.</li>
        <li id="ul0036-0004" num="0232">b<sub>ll</sub>=lower limit of search range.</li>
        <li id="ul0036-0005" num="0233">b<sub>ul</sub>=upper limit of search range.</li>
        <li id="ul0036-0006" num="0234">b(0)=starting value of global smoothing factor before any decreasing or increasing steps are applied.
<br/>
Relating now to Equation 25, the epsilon parameter in the global smoothing search can be represented as
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0159" num="0235">
<maths id="MATH-US-00017" num="00017">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>&#x25b;</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>&#x3b6;</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>l</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <mi>b</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mi>l</mi>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>-</mo>
            <mrow>
              <mi>b</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mn>0</mn>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <mi>b</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mi>l</mi>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mo>{</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mrow>
                        <mi>b</mi>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mn>0</mn>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>l</mi>
                        <mo>&#xb7;</mo>
                        <msub>
                          <mi>S</mi>
                          <mi>dsz</mi>
                        </msub>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <mo>-</mo>
                      <mrow>
                        <mo>(</mo>
                        <msub>
                          <mi>N</mi>
                          <mi>s</mi>
                        </msub>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>&#x2264;</mo>
                    <mi>l</mi>
                    <mo>&#x2264;</mo>
                    <mn>0</mn>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mrow>
                        <mi>b</mi>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mn>0</mn>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>+</mo>
                      <mrow>
                        <mi>l</mi>
                        <mo>&#xb7;</mo>
                        <msub>
                          <mi>S</mi>
                          <mi>isz</mi>
                        </msub>
                      </mrow>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mn>0</mn>
                    <mo>&#x3c;</mo>
                    <mi>l</mi>
                    <mo>&#x2264;</mo>
                    <msub>
                      <mi>N</mi>
                      <mi>s</mi>
                    </msub>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>34</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0160" num="0236">where
<ul id="ul0037" list-style="none">
    <li id="ul0037-0001" num="0000">
    <ul id="ul0038" list-style="none">
        <li id="ul0038-0001" num="0237">b(0)=starting value of global smoothing factor before any decreasing or increasing steps are applied.</li>
        <li id="ul0038-0002" num="0238">b(l)=global smoothing factor value on the l-th step of the probing process and in the direction denoted by the sign of l. A negative l value means that the mapping alignment value is decreasing. A positive l value means that the mapping alignment value is increasing.</li>
        <li id="ul0038-0003" num="0239">S<sub>dsz</sub>=decreasing step size.</li>
        <li id="ul0038-0004" num="0240">S<sub>isz</sub>=increasing step size.</li>
        <li id="ul0038-0005" num="0241">&#x3b6;(l)=stepping count for probing in both the decreasing and increasing directions.
<br/>
The shorthand notation &#x3b5;<sub>l </sub>for representing epsilon remains the same.
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0161" num="0242">Specific to the global smoothing search, in the step of determining the performance measure corresponding to each setting of the global smoothing factor, the variability of the full width CD profile is evaluated. With the number of scans Z<sub>sc </sub>of CD profiles analyzed after the probing step is allowed to settle being the same as in the mapping optimization, the CD databox numbers assigned to x<sub>a </sub>and x<sub>b </sub>in Equation 27 are equated to the lowest CD databox number with profile data and the highest CD databox number with profile data, respectively. The range between the newly defined values of x<sub>a </sub>and x<sub>b </sub>is the full width CD profile. For an individual skilled in the art, the step of determining the performance measures and tolerance limits at each probing step; the step of determining minimum performance measures, minimum tolerance limits and stepping threshold; the step of determining the stopping condition for probing in the first search direction with either the performance measure exceeding the stepping threshold or the hard limit being reached; the step of determining whether the second probing direction is performed; the step of performing the second probing direction; the step of marking out the performance curve; and, the step of determining the optimal setting for the global smoothing factor can be executed for the global smoothing search without further detailed description.</p>
<p id="p-0162" num="0243">The invention of the present application uses both spatial (CD profile) and temporal (MD history) analyses to determine if a local profile problem is starting to develop. The techniques enable local profile problem areas to be detected before they become apparent in the process. The local indicators act as triggers to allow for immediate probing for profile solutions in the local profile areas found. This is a substantial departure from existing techniques that use global profile optimization triggers.</p>
<p id="p-0163" num="0244">The invention of the present application also has the ability to distinguish between a persistent shape and a shape that is evolving. Accordingly, probing sequences will not trigger on persistent shapes so that only problems that are real and developing are addressed. This is a substantial departure from existing technology where monitoring sections of the profile having persistent problems must be disabled so that they are not repeatedly detected.</p>
<p id="p-0164" num="0245">Profile problems do not have to develop at the same time for the invention of the present application to find and correct them. Rather, problems are found and resolved as they occur. Once a local profile problem is found by monitoring the web, the problem is associated with an actuator and is probed. However, if a problem occurs at another profile point during the probing of the initial problem, that problem is identified and also probed for optimal mapping alignment for the new location as well. The only limit is the number of actuators. The ongoing identification of problems as they arise is a substantial departure from existing technology.</p>
<p id="p-0165" num="0246">Existing pattern recognition techniques are often sensitive to the grade of paper being manufactured. However, the invention of the present application normalizes the pattern recognition analysis results such that they are process independent so that it is a robust program that is easy to setup and use.</p>
<p id="p-0166" num="0247">Existing technology presumes that performance curves have a &#x201c;V&#x201d; cross-section. Rather, the inventors of the present application have recognized that instead of a &#x201c;V&#x201d; cross section, the cross section is more of a &#x201c;\___/&#x201d; shape. Accordingly, all small changes in a manipulated variable that generates the performance curve will not cause a change in performance. Because existing presumptions about the performance curve can result in marginally stable systems, the invention of the present application generates the actual performance curve for each manipulated variable that has been identified as causing a profile problem and uses that performance curve to select an optimal CD mapping.</p>
<p id="p-0167" num="0248">Since small changes in the center of the performance curve produce small or no change in profile performance, but small changes at the edges of the performance curve can cause significant process degradation, the invention of the present application stops changing the manipulated variable before the process degrades.</p>
<p id="p-0168" num="0249">After the performance curve has been generated, the invention of the present application locates the optimal point and then adjusts the manipulated variable such that optimal performance is realized.</p>
<p id="p-0169" num="0250">Memory usage is often a deterrent to implementing theoretical solutions. However, for the invention of the present application, several recursive calculations can be used to minimize memory usage and therefore reduce the need for historical data storage of profile and analysis results.</p>
<p id="p-0170" num="0251">In the invention of the present application, probing time is reduced by up to 10 scans by storing an MD history of profiles. Then, when the web monitor routine finds a mapping misalignment problem, the probing routine can immediately determine the initial conditions from the historical buffer so that probing can immediately begin rather than having to wait for an initialization period to be completed.</p>
<p id="p-0171" num="0252">Once a local profile point has been optimized, that point is updated in the global actuator to profile alignment arrays. However, if this point is significantly different than the current location, a discontinuity can result in the global actuator and profile alignment near the optimal point found. The invention of the present application can be operated to identify the optimal locations at this discontinuity and effectively &#x201c;smooth&#x201d; the global actuator and profile alignment array such that overall actuator to profile alignment can be achieved. Once a global actuator and profile alignment has been achieved, the invention of the present application uses them as the starting point for the next monitoring/probing actions. The result over time is a convergence towards the optimal actuator to profile alignment.</p>
<p id="p-0172" num="0253">Having thus described the invention of the present application in detail and by reference to preferred embodiments thereof, it will be apparent that modifications and variations are possible without departing from the scope of the invention defined in the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US07648614-20100119-M00001.NB">
<img id="EMI-M00001" he="19.39mm" wi="76.20mm" file="US07648614-20100119-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US07648614-20100119-M00002.NB">
<img id="EMI-M00002" he="16.93mm" wi="76.20mm" file="US07648614-20100119-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US07648614-20100119-M00003.NB">
<img id="EMI-M00003" he="20.15mm" wi="76.20mm" file="US07648614-20100119-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US07648614-20100119-M00004.NB">
<img id="EMI-M00004" he="19.39mm" wi="76.20mm" file="US07648614-20100119-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005" nb-file="US07648614-20100119-M00005.NB">
<img id="EMI-M00005" he="15.92mm" wi="76.20mm" file="US07648614-20100119-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US07648614-20100119-M00006.NB">
<img id="EMI-M00006" he="19.05mm" wi="76.20mm" file="US07648614-20100119-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00007" nb-file="US07648614-20100119-M00007.NB">
<img id="EMI-M00007" he="9.14mm" wi="76.20mm" file="US07648614-20100119-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00008" nb-file="US07648614-20100119-M00008.NB">
<img id="EMI-M00008" he="25.40mm" wi="76.20mm" file="US07648614-20100119-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00009" nb-file="US07648614-20100119-M00009.NB">
<img id="EMI-M00009" he="28.96mm" wi="76.20mm" file="US07648614-20100119-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00010" nb-file="US07648614-20100119-M00010.NB">
<img id="EMI-M00010" he="6.35mm" wi="76.20mm" file="US07648614-20100119-M00010.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00011" nb-file="US07648614-20100119-M00011.NB">
<img id="EMI-M00011" he="20.49mm" wi="76.20mm" file="US07648614-20100119-M00011.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00012" nb-file="US07648614-20100119-M00012.NB">
<img id="EMI-M00012" he="10.58mm" wi="76.20mm" file="US07648614-20100119-M00012.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00013" nb-file="US07648614-20100119-M00013.NB">
<img id="EMI-M00013" he="22.27mm" wi="76.20mm" file="US07648614-20100119-M00013.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00014" nb-file="US07648614-20100119-M00014.NB">
<img id="EMI-M00014" he="22.61mm" wi="76.20mm" file="US07648614-20100119-M00014.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00015" nb-file="US07648614-20100119-M00015.NB">
<img id="EMI-M00015" he="9.14mm" wi="76.20mm" file="US07648614-20100119-M00015.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00016" nb-file="US07648614-20100119-M00016.NB">
<img id="EMI-M00016" he="13.80mm" wi="76.20mm" file="US07648614-20100119-M00016.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00017" nb-file="US07648614-20100119-M00017.NB">
<img id="EMI-M00017" he="11.68mm" wi="76.20mm" file="US07648614-20100119-M00017.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. Apparatus for controlling cross-machine direction (CD) mapping in a web making machine, said apparatus comprising:
<claim-text>a sensor for monitoring said web making machine; and</claim-text>
<claim-text>a controller programmed to perform the operations of:
<claim-text>monitoring a web making machine;</claim-text>
<claim-text>generating at least two web analysis profiles from data representative of said web making machine;</claim-text>
<claim-text>combining a first one of said at least two web analysis profiles with a second one of said at least two web analysis profiles;</claim-text>
<claim-text>identifying a developing CD mapping problem of misalignment in a cross direction spatial relationship between CD actuators and a CD profile from said combination of a first one of said at least two web analysis profiles with a second one of said at least two web analysis profiles;</claim-text>
<claim-text>probing at least one CD actuator corresponding to said identified developing CD mapping problem;</claim-text>
<claim-text>determining an optimal performance point for said at least one CD actuator from results of probing said at least one CD actuator; and</claim-text>
<claim-text>adjusting CD mapping for said at least one CD actuator in accordance with said optimal performance point.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. Apparatus for controlling cross-machine direction (CD) mapping in a web making machine as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said controller performs the operation of monitoring a web being produced by said web making machine.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. Apparatus for controlling cross-machine direction (CD) mapping in a web making machine as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said controller performs the operation of monitoring CD actuators extending across said web making machine.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. Apparatus for controlling cross-machine direction (CD) mapping in a web making machine as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said controller performs the operations of:
<claim-text>monitoring a web being produced by said web making machine; and</claim-text>
<claim-text>monitoring CD actuators extending across said web making machine.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
